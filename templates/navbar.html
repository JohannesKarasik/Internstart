{% load static %}
{% load i18n %}


<header class="header header--loggedIn" style="margin-bottom: 0px !important; padding-bottom: 0px !important;">
  <!-- ===== Activity Ticker (top of header) ===== -->
<div class="header__ticker" id="headerTicker" role="region" aria-label="Recent activity">
  <div class="ticker__icon" aria-hidden="true">
    <img
      src="{% static 'images/favicon-32x32.png' %}"
      alt=""
      class="ticker__iconImg"
      width="16" height="16"
      decoding="async"
    />
  </div>

  <div class="ticker__viewport" aria-live="off">
    <div class="ticker__track" id="tickerTrack"></div>
  </div>

  <button class="ticker__close" type="button" aria-label="Hide updates">
    ×
  </button>
</div>
<!-- ===== /Activity Ticker ===== -->

    <div class="container" 
    style="display: flex; align-items: center; justify-content: space-between; position: relative; height: 100px !important; padding-left: 60px; padding-right: 40px;">      
      <!-- Logo (left) -->
      <div class="header__logo" style="display: flex; align-items: center;">
          <a href="{% url '' %}">
              <img src="{% static 'images/Internstartlogo (1).jpg' %}" 
                   alt="Internstart Logo"
                   class="logo-large" />
          </a>
      </div>

      <!-- Middle Menu -->
      <nav class="header__nav" 
           style="flex: 1; display: flex; justify-content: center; font-family: 'Manrope', sans-serif; font-weight: 600;">
          <div style="display: flex; gap: 32px; background: #f5f5f5; padding: 10px 30px; border-radius: 14px; align-items: center; display: none;">
              <a href="/browse/" style="text-decoration: none; color: #111; transition: color 0.3s;">Browse</a>
              <a href="/companies/" style="text-decoration: none; color: #111; transition: color 0.3s;">Companies</a>
              <a href="/resources/" style="text-decoration: none; color: #111; transition: color 0.3s;">Resources</a>
              <a href="/faq/" style="text-decoration: none; color: #111; transition: color 0.3s;">FAQ</a>
              <a href="/support/" style="text-decoration: none; color: #111; transition: color 0.3s;">Support</a>
              <a href="/mission/" style="text-decoration: none; color: #111; transition: color 0.3s;">Our Mission</a>
          </div>
      </nav>

      <!-- User / Auth (right) -->
      <nav class="header__menu" style="display: flex; align-items: center;">
        {% if request.user.is_authenticated %}
        <div class="header__authCluster" style="padding-right: 20px; display:flex; align-items:center; gap:12px;">
          <!-- Logout (left) -->
          <form action="{% url 'logout' %}" method="post" class="logout-form">
            {% csrf_token %}
            <button type="submit" class="btn btn--brand-700" aria-label="Log out">
              <svg class="btn__icon" viewBox="0 0 24 24" aria-hidden="true" style="color: white !important;">
                <path d="M12 3v8" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M6.2 6.2a8 8 0 1 0 11.6 0" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span>Logout</span>
            </button>
          </form>
      
          <!-- Account (right) -->
          <a href="{% url 'update-user' %}" class="btn btn--brand" aria-label="Account">
            <svg class="btn__icon" viewBox="0 0 24 24" aria-hidden="true" style="color: white !important;">
              <circle cx="12" cy="8" r="4" fill="none" stroke="currentColor" stroke-width="1.8"/>
              <path d="M4 20c1.8-3.4 5-5 8-5s6.2 1.6 8 5" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
            </svg>
            <span style="color: white;">Account</span>
          </a>
        </div>
      {% else %}
          <div class="auth-buttons" style="display: flex; gap: 12px; align-items: center; padding-right: 20px;">
              <a href="{% url 'app_login' %}" 
                 style="padding: 10px 20px; background: #f5f5f5; border-radius: 12px; text-decoration: none; font-weight: 600; color: #111; font-family: 'Manrope', sans-serif; transition: background 0.3s;">
                 {% trans "Login" %}
                </a>
              <a href="{% url 'register' %}" 
              style="padding: 10px 20px; border-radius: 12px; text-decoration: none; font-weight: 600; background: #FF2F5A; color: white; font-family: 'Manrope', sans-serif; transition: background 0.3s;">
              {% trans "Start applying to jobs with AI" %}    
              </a>
          </div>
          {% endif %}
      </nav>
  </div>

  <style>
    :root{
      --brand:#FF2F5A;
      --brand-700:#e92650;
    }

    .logo-large {
        width: 220px !important;
        height: auto !important;
    }

    .header__nav a:hover { color: var(--brand); }

    /* Brand-filled Account button (white text, softer shadow) */
    .btn-account{
    color: white;
      display:inline-flex; align-items:center; gap:10px;
      padding: 10px 18px;
      background:#FF2F5A;          /* requested brand fill */
      color:#fff;                   /* white text */
      text-decoration:none;
      font-weight:800;
      font-family:'Manrope', sans-serif;
      border-radius:12px;
      border:1px solid #FF2F5A;
      box-shadow: 0 6px 10px rgba(255,47,90,.18); /* softer */
      transition: background .2s ease, border-color .2s ease, box-shadow .2s ease, transform .06s ease;
    }
    .btn-account__icon{
      width:18px; height:18px; flex:0 0 18px; color: currentColor; /* inherits white */
      color: white !important;
    }
    .btn-account:hover{
      background:#e92650;
      border-color:#e92650;
      box-shadow: 0 8px 14px rgba(255,47,90,.22);
      transform: translateY(-1px);
    }
    .btn-account:active{
      transform: translateY(0);
      box-shadow: 0 4px 8px rgba(255,47,90,.18);
    }
    .btn-account:focus{
      outline: none;
      box-shadow: 0 0 0 3px rgba(255,47,90,.25);
    }
/* ===== Mobile header clean-up (≤600px) ===== */
@media (max-width: 600px){
  /* Center the whole header and tighten spacing */
  .header .container{
    display: grid !important;
    grid-template-columns: 1fr;        /* single column */
    align-items: center;
    justify-items: center;              /* center content (logo) */
    height: 72px !important;
    padding-left: max(16px, env(safe-area-inset-left)) !important;
    padding-right: max(16px, env(safe-area-inset-right)) !important;
    gap: 0;
  }

  /* Center logo */
  .header__logo{
    justify-self: center;
  }
  .header__logo .logo-large{
    max-width: 180px;                   /* scale down for phones */
    height: auto !important;
    display: block;
  }

  /* Hide middle menu (Browse, Companies, Resources, FAQ, Support, Our Mission) */
  .header__nav{
    display: none !important;
  }

  /* Hide auth cluster on the right */
  .auth-buttons{                         /* Login + Start Your Journey */
    display: none !important;
  }
  .header__user{                         /* Account button (if logged in) */
    display: none !important;
  }
  /* (If you only want to hide Login/Register and KEEP Account,
     remove the .header__user rule above.) */

  /* Remove leftover spacing from inline styles */
  .header .container{
    padding-left: 16px !important;
    padding-right: 16px !important;
  }
}

/* Base brand colors already defined:
:root { --brand:#FF2F5A; --brand-700:#e92650; }
*/

/* ONE button style used by both Account (link) and Logout (button) */
.btn{
  display:inline-flex; align-items:center; gap:10px;
  padding:10px 18px;                       /* identical padding */
  min-height: 42px;                         /* identical height */
  box-sizing: border-box;                   /* normalize sizing */
  font-family:'Manrope', sans-serif;
  font-weight:800;
  font-size:14px; line-height:1;            /* identical typography */
  color:#fff; text-decoration:none;
  border-radius:12px;
  border:1px solid transparent;
  background: var(--brand);
  box-shadow: 0 6px 10px rgba(255,47,90,.18);
  transition: background .2s ease, border-color .2s ease, box-shadow .2s ease, transform .06s ease;
  cursor:pointer;
}

.btn--brand    { background: var(--brand);    border-color: var(--brand); }
.btn--brand-700{ background: var(--brand-700);border-color: var(--brand-700); }

.btn__icon{
  width:18px; height:18px; flex:0 0 18px;
  color: currentColor; /* inherits white */
}

.btn:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 14px rgba(255,47,90,.22);
}

.btn--brand:hover     { background:#e92650; border-color:#e92650; }
.btn--brand-700:hover { background:#d61f46; border-color:#d61f46; }

.btn:active{
  transform: translateY(0);
  box-shadow: 0 4px 8px rgba(255,47,90,.18);
}
.btn:focus{
  outline: none;
  box-shadow: 0 0 0 3px rgba(255,47,90,.25);
}

/* Mobile: hide the cluster (same as before) */
@media (max-width: 600px){
  .header__authCluster{ display:none !important; }
  .logout-form{ display:none !important; }
}

/* ===== Top Ticker Styles ===== */
.header__ticker{
  --ticker-bg: linear-gradient(90deg,#fff5f8 0%, #ffe9ef 100%);
  --ticker-fg: #7a1030;
  --ticker-pill-bg: #ffffff;
  --ticker-pill-fg: #111;
  --ticker-gap: 32px;

  display:flex; align-items:center; gap:12px;
  width:100%;
  height:36px;
  padding:6px 14px;
  background: var(--ticker-bg);
  color: var(--ticker-fg);
  border-bottom: 1px solid rgba(255,47,90,.18);
  box-sizing: border-box;
  overflow:hidden;
}

.ticker__icon{
  display:grid; place-items:center;
  width:22px; height:22px;
  color: var(--brand);                 /* uses your brand color */
  background:#fff; border-radius:8px;
  box-shadow: 0 1px 2px rgba(0,0,0,.06);
  flex:0 0 auto;
}

.ticker__viewport{ flex:1 1 auto; overflow:hidden; }
.ticker__track{
  display:flex; align-items:center;
  gap: var(--ticker-gap);
  white-space: nowrap;
  will-change: transform;
  animation: ticker-scroll var(--duration, 30s) linear infinite;
}

.ticker__item{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px;
  background: var(--ticker-pill-bg);
  color: var(--ticker-pill-fg);
  border: 1px solid rgba(17,17,17,.06);
  border-radius: 999px;
  box-shadow: 0 1px 2px rgba(0,0,0,.04);
  font-family:'Manrope',sans-serif;
  font-weight:600; font-size:13px; line-height:1;
}

.ticker__item strong{ color: var(--brand); font-weight:800; }

.ticker__close{
  appearance:none; border:0; background:transparent; color: #9a2c45;
  font-size:18px; line-height:1; padding:2px 6px; cursor:pointer;
  border-radius:6px;
}
.ticker__close:hover{ background: rgba(255,47,90,.08); }
.ticker__close:focus{ outline:none; box-shadow:0 0 0 3px rgba(255,47,90,.25); }

/* Animation: we duplicate content & scroll -50% for a seamless loop */
@keyframes ticker-scroll { to { transform: translateX(-50%); } }

/* Pause on hover */
.header__ticker:hover .ticker__track { animation-play-state: paused; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  .ticker__track{ animation: none !important; transform: none !important; }
}

/* Mobile tuning */
@media (max-width: 600px){
  .header__ticker{
    height: 34px;
    padding: 6px 10px;
  }
  .ticker__item{ font-size:12px; padding:5px 8px; }
  .ticker__icon{ display:none; }              /* keep it minimal on phones */
}

.ticker__iconImg{
  display:block;
  width:16px; height:16px;          /* fits nicely inside the 22x22 icon box */
  object-fit:contain;
}



  </style>
  <script>
    (function(){
      // Respect a previous dismissal
      const bar = document.getElementById('headerTicker');
      if (!bar) return;
      if (localStorage.getItem('hideTicker') === '1'){ bar.remove(); return; }
    
      const track = document.getElementById('tickerTrack');
      if (!track) return;
    
      // Generate simple, realistic-looking messages
      const NAMES = ['Anna','Stephan','Noah','Emma','Lucas','Mia','Leon','Ava','Mateo','Sofia','Liam','Olivia'];
      const ROLES = [
        'data analyst','machine learning','frontend developer','backend developer',
        'data engineer','AI research','product manager','UX designer','BI analyst'
      ];
      const rand = (min,max)=>Math.floor(Math.random()*(max-min+1))+min;
    
      const buildMessage = () => {
        const name = NAMES[rand(0, NAMES.length-1)];
        const role = ROLES[rand(0, ROLES.length-1)];
        const count = rand(50, 300);
        return `<span class="ticker__item"><strong>${name}</strong> just applied to <strong>${count}</strong> jobs for <strong>${role}</strong> positions</span>`;
      };
    
      // Create a set of items (you can also fetch from Django if you prefer)
      const items = Array.from({length: 10}, buildMessage).join('');
      // Duplicate content for seamless loop (animation translates -50%)
      track.innerHTML = items + items;
    
      // Compute duration from content width for consistent speed
      const PX_PER_SECOND = 60; // lower = slower, higher = faster
      const oneSetWidth = track.scrollWidth / 2;
      const duration = Math.max(15, Math.round(oneSetWidth / PX_PER_SECOND));
      track.style.setProperty('--duration', duration + 's');
    
      // Dismiss button
      const closeBtn = bar.querySelector('.ticker__close');
      if (closeBtn){
        closeBtn.addEventListener('click', () => {
          localStorage.setItem('hideTicker','1');
          bar.remove();
        });
      }
    
      // Recompute speed on resize (debounced)
      let t;
      window.addEventListener('resize', () => {
        clearTimeout(t);
        t = setTimeout(() => {
          const newWidth = track.scrollWidth / 2;
          const newDuration = Math.max(15, Math.round(newWidth / PX_PER_SECOND));
          track.style.setProperty('--duration', newDuration + 's');
        }, 150);
      });
    })();
    </script>
    
</header>
