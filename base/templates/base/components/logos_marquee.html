{# base/templates/base/components/logos_marquee.html #}
{% load static i18n %}
{% load static %}

<section class="logos" aria-label="{% trans 'Companies where users landed interviews' %}">
  <div class="logos__inner">
    <h3 class="logos__title">
      {% blocktrans %}Land interviews at top companies with AI-tailored applications{% endblocktrans %}
    </h3>

```
<!-- Masked viewport -->
<div class="logos__viewport" aria-hidden="true">

  <!-- Row A -->
  <div class="logos__track logos__track--a" data-speed="32">
    <div class="logo"><img class="logo__img" src="{% static 'images/netflix.png' %}" alt="Netflix"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/airbnb.png' %}" alt="Airbnb"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/amazon.png' %}" alt="Amazon"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/anthropic.png' %}" alt="Anthropic"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/adobe.png' %}" alt="Adobe"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/facebook.png' %}" alt="Facebook"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/stripe.png' %}" alt="Stripe"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/spotify.png' %}" alt="Spotify"></div>
  </div>

  <!-- Row B -->
  <div class="logos__track logos__track--b" data-speed="42">
    <div class="logo"><img class="logo__img" src="{% static 'images/goldman.png' %}" alt="Goldman Sachs"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/spacex.png' %}" alt="SpaceX"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/checkout.png' %}" alt="Checkout.com"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/clickup.png' %}" alt="ClickUp"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/twitch.png' %}" alt="Twitch"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/canva.png' %}" alt="Canva"></div>
  </div>

  <!-- Row C -->
  <div class="logos__track logos__track--c" data-speed="52">
    <div class="logo"><img class="logo__img" src="{% static 'images/discord.png' %}" alt="Discord"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/benchling.jpeg' %}" alt="Benchling"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/mistral.png' %}" alt="Mistral AI"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/robinhood.png' %}" alt="Robinhood"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/vercel.png' %}" alt="Vercel"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/anduril.png' %}" alt="Anduril"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/x.jpg' %}" alt="X (Twitter)"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/databricks.png' %}" alt="Databricks"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/snowflake.png' %}" alt="Snowflake"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/figma.png' %}" alt="Figma"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/paypal.png' %}" alt="PayPal"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/uber.png' %}" alt="Uber"></div>
    <div class="logo"><img class="logo__img" src="{% static 'images/doordash.png' %}" alt="DoorDash"></div>
  </div>

</div>
```

  </div>
</section>

<style>
  /* =======================================================
     Marquee with animated "Stripe-like" gradient background
     - Multi-layer radial gradients that drift like liquid.
     - GPU-friendly transforms; stops on prefers-reduced-motion.
  ======================================================== */
  :root{
    --logos-gap: clamp(16px, 2.2vw, 28px);
    --logos-pad-y: clamp(28px, 5vw, 60px);
    --section-pad-y: clamp(36px, 6vw, 84px);

    --logos-card: #ffffff;
    --logos-border: rgba(255,255,255,.35);
    --logos-shadow: 0 8px 24px rgba(2,8,23,.10);

    /* gradient tokens */
    --g-purple: #7b61ff;   /* purple */
    --g-pink:   #ff5ecd;   /* pink   */
    --g-orange: #ff9966;   /* orange */
    --g-cyan:   #4dd2ff;   /* blue/cyan */
    --g-green:  #80ff72;   /* green  */
    --g-bg:     #eef1ff;   /* light fallback background */
  }

  .logos{
    position: relative;
    padding: var(--section-pad-y) 0;
    background: linear-gradient(135deg,
                var(--g-purple),
                var(--g-pink),
                var(--g-orange),
                var(--g-cyan),
                var(--g-green)); /* Fallback if animations aren't supported */
    border-top: 0;
    overflow: hidden;
    isolation: isolate;
  }

  /* Animated gradient field behind content */
  .logos::before{
    content:"";
    position:absolute;
    inset:-10% -2%; /* bleed a bit for transforms */
    z-index:0;

    /* Five drifting "blobs" using radial-gradients. Transparent edges keep it airy. */
    background:
      radial-gradient(40vmax 40vmax at 12% 18%, rgba(123, 97, 255, .95) 0%, rgba(123, 97, 255, .75) 22%, transparent 62%) ,
      radial-gradient(42vmax 42vmax at 86% 12%, rgba(255, 94, 205, .92) 0%, rgba(255, 94, 205, .65) 24%, transparent 60%),
      radial-gradient(46vmax 46vmax at 80% 78%, rgba(77, 210, 255, .90) 0%, rgba(77, 210, 255, .65) 26%, transparent 62%),
      radial-gradient(44vmax 44vmax at 16% 84%, rgba(255, 153, 102, .90) 0%, rgba(255, 153, 102, .60) 24%, transparent 60%),
      radial-gradient(52vmax 52vmax at 52% 50%, rgba(128, 255, 114, .85) 0%, rgba(128, 255, 114, .55) 28%, transparent 64%);

    filter: saturate(1.06) contrast(1.02) blur(2px);
    transform: translateZ(0) scale(1.02);
    animation: bg-shift 32s ease-in-out infinite alternate,
               hue 48s linear infinite;
    will-change: transform, background-position, filter;
  }

  /* optional subtle vignette for depth */
  .logos::after{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    background:
      radial-gradient(120vmax 80vmax at 50% 60%, rgba(0,0,0,.0) 40%, rgba(0,0,0,.05) 80%);
    mix-blend-mode: multiply;
    z-index:0;
  }

  .logos__inner{
    max-width: min(1480px, 94vw);
    margin: 0 auto;
    padding: 0 12px; /* keep normal page gutters for title only */
    position: relative;
    z-index: 1; /* ensure content sits above gradient layers */
  }

  .logos__title{
    text-align: center;
    font-weight: 800;
    letter-spacing: -0.01em;
    font-size: clamp(16px, 2.3vw, 22px);
    color: #000000;
    margin-bottom: 14px;
  }

  .logos__viewport{
    /* FULL-BLEED: pull viewport out of the container gutters */
    margin-inline: calc(50% - 50vw);
    width: 100vw;

    overflow: hidden;
    border-radius: 0;                 /* let content reach page edges */
    padding: var(--logos-pad-y) 0;
    display: flex;
    flex-direction: column;
    gap: 18px;

    background: transparent;
    border: 0;
    box-shadow: none;

    /* Fades start almost at the edge */
    -webkit-mask-image: linear-gradient(
      to right,
      transparent 0%,
      #000 0.6%,
      #000 99.4%,
      transparent 100%
    );
            mask-image: linear-gradient(
      to right,
      transparent 0%,
      #000 0.6%,
      #000 99.4%,
      transparent 100%
    );
  }

  .logos__track{
    display: flex;
    align-items: center;
    gap: var(--logos-gap);
    animation: marquee linear infinite;
    will-change: transform;
  }
  .logos__viewport:hover .logos__track{ animation-play-state: paused; }

  .logos__track--a{ animation-duration: 32s; }
  .logos__track--b{ animation-duration: 42s; opacity:.98; }
  .logos__track--c{ animation-duration: 52s; opacity:.96; }

  @keyframes marquee{
    from{ transform: translateX(0); }
    to  { transform: translateX(-50%); }
  }

  /* Background drift + breathing scale */
  @keyframes bg-shift{
    0%{
      background-position:
        12% 18%,
        86% 12%,
        80% 78%,
        16% 84%,
        52% 50%;
      transform: translate3d(0,0,0) scale(1.02);
    }
    33%{
      background-position:
        18% 26%,
        78% 18%,
        72% 84%,
        22% 76%,
        48% 54%;
      transform: translate3d(0,0,0) scale(1.03);
    }
    66%{
      background-position:
        10% 24%,
        82% 20%,
        88% 70%,
        10% 86%,
        56% 46%;
      transform: translate3d(0,0,0) scale(1.015);
    }
    100%{
      background-position:
        20% 16%,
        74% 26%,
        70% 76%,
        26% 88%,
        50% 50%;
      transform: translate3d(0,0,0) scale(1.03);
    }
  }

  /* gentle color cycling for natural motion */
  @keyframes hue{
    0%   { filter: saturate(1.06) contrast(1.02) hue-rotate(0deg) blur(2px); }
    50%  { filter: saturate(1.10) contrast(1.04) hue-rotate(12deg) blur(2px); }
    100% { filter: saturate(1.06) contrast(1.02) hue-rotate(0deg) blur(2px); }
  }

  .logo{
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 18px;
    min-width: clamp(140px, 16vw, 220px);
    height: clamp(52px, 6vw, 68px);
    background: var(--logos-card);
    border: 1px solid var(--logos-border);
    border-radius: 16px;
    box-shadow: var(--logos-shadow);
  }

  .logo__img{
    display: block;
    max-height: 28px;
    max-width: 140px;
    object-fit: contain;
    filter: saturate(.95) contrast(1);
  }

  @media (prefers-reduced-motion: reduce){
    .logos__track{ animation: none !important; }
    .logos::before{ animation: none !important; transform: none; }
  }
</style>

<script>
(() => {
  const onReady = (fn) =>
    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', fn, { once: true })
      : fn();

  onReady(() => {
    const tracks = document.querySelectorAll('.logos__track');
    tracks.forEach(track => {
      const speed = Number(track.dataset.speed || 32);
      const children = Array.from(track.children);
      children.forEach(node => track.appendChild(node.cloneNode(true)));
      track.style.animationDuration = `${Math.max(18, speed)}s`;
    });
  });
})();
</script>
