{# base/templates/base/components/logos_marquee.html #}
{% load static i18n %}
{% load static %}

<section class="logos" aria-label="{% trans 'Companies where users landed interviews' %}">
  <div class="logos__inner">
    <h3 class="logos__title">
      {% blocktrans %}Land interviews at top companies with AI-tailored applications{% endblocktrans %}
    </h3>

    <div class="logos__viewport" aria-hidden="true">
      <!-- Row A -->
      <div class="logos__track logos__track--a" data-speed="32">
        <div class="logo"><img class="logo__img" src="{% static 'images/netflix.png' %}" alt="Netflix"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/airbnb.png' %}" alt="Airbnb"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/amazon.png' %}" alt="Amazon"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/anthropic.png' %}" alt="Anthropic"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/adobe.png' %}" alt="Adobe"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/facebook.png' %}" alt="Facebook"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/stripe.png' %}" alt="Stripe"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/spotify.png' %}" alt="Spotify"></div>
      </div>

      <!-- Row B -->
      <div class="logos__track logos__track--b" data-speed="42">
        <div class="logo"><img class="logo__img" src="{% static 'images/goldman.png' %}" alt="Goldman Sachs"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/spacex.png' %}" alt="SpaceX"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/checkout.png' %}" alt="Checkout.com"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/clickup.png' %}" alt="ClickUp"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/twitch.png' %}" alt="Twitch"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/canva.png' %}" alt="Canva"></div>
      </div>

      <!-- Row C -->
      <div class="logos__track logos__track--c" data-speed="52">
        <div class="logo"><img class="logo__img" src="{% static 'images/discord.png' %}" alt="Discord"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/benchling.jpeg' %}" alt="Benchling"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/mistral.png' %}" alt="Mistral AI"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/robinhood.png' %}" alt="Robinhood"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/vercel.png' %}" alt="Vercel"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/anduril.png' %}" alt="Anduril"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/x.jpg' %}" alt="X (Twitter)"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/databricks.png' %}" alt="Databricks"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/snowflake.png' %}" alt="Snowflake"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/figma.png' %}" alt="Figma"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/paypal.png' %}" alt="PayPal"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/uber.png' %}" alt="Uber"></div>
        <div class="logo"><img class="logo__img" src="{% static 'images/doordash.png' %}" alt="DoorDash"></div>
      </div>
    </div>
  </div>
</section>

<style>
  /* =======================================================
     OBLIQUE, PARALLEL "BAND" + LAVA-LAMP BACKGROUND
     - Centered diagonally through the section
     - White in top-left & bottom-right corners
     - Smooth, morphing blobs inside the band
  ======================================================== */
  :root{
    --logos-gap: clamp(16px, 2.2vw, 28px);
    --logos-pad-y: clamp(28px, 5vw, 60px);
    --section-pad-y: clamp(36px, 6vw, 84px);

    --logos-card: rgba(255,255,255,.54);
    --logos-border: rgba(255,255,255,.48);
    --logos-shadow: 0 10px 30px rgba(2,8,23,.12);

    /* palette */
    --g-violet: #7a4dff;
    --g-purple: #a463ff;
    --g-magenta:#ff4fd8;
    --g-orange: #ff8e6e;
    --g-cyan:   #68c0ff;

    /* ---------- Parallel band controls (centered) ---------- */
    /* Keep the same angle (difference 20%), but make the band TALLER. */
    --band-top-left: 45%;
    --band-top-right: 25%;
    --band-thickness: 48%; /* was 30% â€” fills more of the section */
    --band-bottom-left: calc(var(--band-top-left) + var(--band-thickness));
    --band-bottom-right: calc(var(--band-top-right) + var(--band-thickness));
  }

  .logos{
    position: relative;
    padding: var(--section-pad-y) 0;
    overflow: hidden;
    isolation: isolate;
    background: #fff; /* corners remain white */
  }

  /* === Animated gradient blobs, clipped to ONE clean slanted band === */
  .logos::before,
  .logos::after{
    content:"";
    position:absolute;
    inset:-30% -20%;
    z-index:0;
    background-repeat:no-repeat;
    will-change: transform, background-position, filter;
    /* PARALLEL diagonal band (top & bottom edges share the same angle) */
    clip-path: polygon(
      0%  var(--band-top-left),
      100% var(--band-top-right),
      100% var(--band-bottom-right),
      0%  var(--band-bottom-left)
    );
  }

  /* Base morphing layer */
  .logos::before{
    background:
      radial-gradient(60vmax 60vmax at 20% 20%, rgba(255,142,110,.75) 0%, rgba(255,79,216,.45) 45%, transparent 100%),
      radial-gradient(70vmax 70vmax at 80% 25%, rgba(104,192,255,.75) 0%, rgba(122,77,255,.45) 50%, transparent 100%),
      radial-gradient(65vmax 65vmax at 70% 80%, rgba(255,79,216,.70) 0%, rgba(104,192,255,.45) 60%, transparent 100%),
      radial-gradient(60vmax 60vmax at 30% 85%, rgba(122,77,255,.70) 0%, rgba(255,142,110,.35) 65%, transparent 100%);
    filter: saturate(1.15) contrast(1.05) blur(8px);
    animation: lavaFlow 52s ease-in-out infinite alternate,
               hueCycle 70s linear infinite;
  }

  /* Secondary counter-moving layer for depth */
  .logos::after{
    background:
      radial-gradient(80vmax 80vmax at 15% 25%, rgba(255,79,216,.28) 0%, transparent 70%),
      radial-gradient(90vmax 80vmax at 85% 25%, rgba(104,192,255,.30) 0%, transparent 70%),
      radial-gradient(90vmax 80vmax at 75% 80%, rgba(122,77,255,.28) 0%, transparent 70%),
      radial-gradient(95vmax 85vmax at 25% 85%, rgba(255,142,110,.26) 0%, transparent 70%);
    filter: blur(10px) saturate(1.1);
    animation: lavaFlowReverse 68s ease-in-out infinite alternate;
  }

  /* Morphing motion (lava-like) */
  @keyframes lavaFlow{
    0%  { transform: translate3d(0,0,0) scale(1);   background-position: 20% 20%, 80% 25%, 70% 80%, 30% 85%; }
    25% { transform: translate3d(-1%,1%,0) scale(1.03); background-position: 26% 26%, 74% 22%, 65% 75%, 36% 90%; }
    50% { transform: translate3d(1%,-1%,0) scale(1.06); background-position: 18% 22%, 82% 18%, 72% 84%, 28% 78%; }
    75% { transform: translate3d(-1%,-1%,0) scale(1.02); background-position: 14% 18%, 76% 20%, 68% 88%, 26% 80%; }
    100%{ transform: translate3d(0.6%,1%,0) scale(1.04); background-position: 22% 28%, 78% 22%, 70% 82%, 30% 84%; }
  }
  @keyframes lavaFlowReverse{
    0%  { transform: translate3d(0,0,0) scale(1.02); }
    50% { transform: translate3d(1.6%,-0.8%,0) scale(1.06); }
    100%{ transform: translate3d(-1%,1%,0) scale(1.03); }
  }
  @keyframes hueCycle{
    0%{ filter: hue-rotate(0deg) saturate(1.15) blur(8px); }
    50%{ filter: hue-rotate(20deg) saturate(1.22) blur(8px); }
    100%{ filter: hue-rotate(0deg) saturate(1.15) blur(8px); }
  }

  .logos__inner{
    max-width: min(1480px, 94vw);
    margin: 0 auto;
    padding: 0 12px;
    position: relative;
    z-index: 1;
  }

  .logos__title{
    text-align: center;
    font-weight: 800;
    letter-spacing: -0.01em;
    font-size: clamp(16px, 2.3vw, 22px);
    color: #0b1220;
    margin-bottom: 14px;
  }

  .logos__viewport{
    margin-inline: calc(50% - 50vw);
    width: 100vw;
    overflow: hidden;
    border-radius: 0;
    padding: var(--logos-pad-y) 0;
    display: flex;
    flex-direction: column;
    gap: 18px;
    background: transparent;
    -webkit-mask-image: linear-gradient(to right, transparent 0%, #000 0.6%, #000 99.4%, transparent 100%);
            mask-image: linear-gradient(to right, transparent 0%, #000 0.6%, #000 99.4%, transparent 100%);
  }

  .logos__track{
    display: flex;
    align-items: center;
    gap: var(--logos-gap);
    animation: marquee linear infinite;
  }
  .logos__viewport:hover .logos__track{ animation-play-state: paused; }

  .logos__track--a{ animation-duration: 32s; }
  .logos__track--b{ animation-duration: 42s; opacity:.98; }
  .logos__track--c{ animation-duration: 52s; opacity:.96; }

  @keyframes marquee{
    from{ transform: translateX(0); }
    to  { transform: translateX(-50%); }
  }

  /* Glassy logo cards */
  .logo{
    flex: 0 0 auto;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 14px 18px;
    min-width: clamp(140px, 16vw, 220px);
    height: clamp(52px, 6vw, 68px);
    background: var(--logos-card);
    border: 1px solid var(--logos-border);
    border-radius: 16px;
    box-shadow: var(--logos-shadow), inset 0 1px 0 rgba(255,255,255,.35);
    backdrop-filter: saturate(160%) blur(12px);
    -webkit-backdrop-filter: saturate(160%) blur(12px);
    transition: transform .25s ease, background-color .2s ease, box-shadow .2s ease;
  }

  .logo:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,.62);
    box-shadow: 0 12px 34px rgba(2,8,23,.16), inset 0 1px 0 rgba(255,255,255,.45);
  }

  .logo__img{
    display: block;
    max-height: 28px;
    max-width: 140px;
    object-fit: contain;
    filter: saturate(.95) contrast(1);
  }

  @media (prefers-reduced-motion: reduce){
    .logos::before, .logos::after { animation: none !important; }
    .logos__track{ animation: none !important; }
  }
</style>

<script>
(() => {
  const onReady = (fn) =>
    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', fn, { once: true })
      : fn();

  onReady(() => {
    const tracks = document.querySelectorAll('.logos__track');
    tracks.forEach(track => {
      const speed = Number(track.dataset.speed || 32);
      const children = Array.from(track.children);
      children.forEach(node => track.appendChild(node.cloneNode(true)));
      track.style.animationDuration = `${Math.max(18, speed)}s`;
    });
  });
})();
</script>
