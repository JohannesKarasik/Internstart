<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Manual Job Entry</title>
  <style>
    body { font-family: Inter, sans-serif; background:#0b0f1a; color:#fff; padding:40px; }
    .card { background:#11182b; padding:30px; border-radius:16px; max-width:900px; margin:auto; }
    h2 { margin-bottom:20px; }
    label { font-size:14px; color:#ccc; margin-top:12px; display:block; }
    input, textarea, select {
      width:100%; padding:12px; margin-top:6px;
      border-radius:8px; border:none; font-size:15px;
      background:#1b2235; color:white;
    }
    textarea { height:100px; resize:vertical; }
    button {
      width:100%; padding:14px; border:none; border-radius:8px;
      font-weight:600; margin-top:14px; cursor:pointer;
      transition:0.2s ease-in-out;
    }
    #addBtn { background:#FF2F5A; color:white; }
    #addBtn:hover { background:#ff4a70; }
    .success { background:#182a20; color:#46ff98; padding:10px; border-radius:8px; margin-top:20px; display:none; }
    .error { background:#2a1818; color:#ff5c5c; padding:10px; border-radius:8px; margin-top:20px; display:none; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Manual Job Import</h2>
    <p>Insert job info manually ‚Äî AI will detect company name, logo, location, and description.</p>

    <label>Country</label>
    <select id="country">
      <option value="">Select...</option>
      <option value="UK">üá¨üáß United Kingdom</option>
      <option value="DK">üá©üá∞ Denmark</option>
      <option value="US">üá∫üá∏ United States</option>
    </select>

    <label>Industry</label>
    <select id="industry">
      <option value="">Select...</option>
      <option value="marketing">Marketing</option>
      <option value="engineering">Engineering</option>
      <option value="sales">Sales</option>
      <option value="software">Software</option>
    </select>

    <label>Job Type</label>
    <select id="job_type">
      <option value="">Select...</option>
      <option value="full_time">Full Time</option>
      <option value="internship">Internship</option>
      <option value="student_job">Student Job</option>
    </select>

    <hr style="border:none; border-top:1px solid #333; margin:20px 0;">

    <label>Job Title</label>
    <input id="title" type="text" placeholder="e.g. Digital Marketing Manager" />

    <label>Job Link</label>
    <input id="link" type="text" placeholder="e.g. https://uk.linkedin.com/jobs/view/..." />

    <label>Job Snippet / Description</label>
    <textarea id="snippet" placeholder="Paste a short description or snippet here..."></textarea>

    <button id="addBtn">Add to Database / Process</button>

    <div id="successMsg" class="success">‚úÖ Successfully processed!</div>
    <div id="errorMsg" class="error">‚ùå Something went wrong.</div>
  </div>

  <script>
    document.getElementById("addBtn").addEventListener("click", async () => {
      const payload = {
        title: document.getElementById("title").value.trim(),
        link: document.getElementById("link").value.trim(),
        snippet: document.getElementById("snippet").value.trim(),
        country: document.getElementById("country").value,
        industry: document.getElementById("industry").value,
        job_type: document.getElementById("job_type").value
      };

      if (!payload.title || !payload.link) {
        alert("Please fill in at least title and link");
        return;
      }

      document.getElementById("addBtn").innerText = "‚è≥ Processing...";
      try {
        const res = await fetch("/process_manual_job/", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        const data = await res.json();

        document.getElementById("addBtn").innerText = "Add to Database / Process";
        if (data.success) {
          document.getElementById("successMsg").innerText = `‚úÖ Added ${data.company}`;
          document.getElementById("successMsg").style.display = "block";
          document.getElementById("errorMsg").style.display = "none";
        } else {
          document.getElementById("errorMsg").innerText = `‚ùå ${data.error}`;
          document.getElementById("errorMsg").style.display = "block";
          document.getElementById("successMsg").style.display = "none";
        }
      } catch (err) {
        console.error(err);
        document.getElementById("addBtn").innerText = "Add to Database / Process";
        document.getElementById("errorMsg").innerText = "‚ùå Failed to send request.";
        document.getElementById("errorMsg").style.display = "block";
      }
    });
  </script>
</body>
</html>
