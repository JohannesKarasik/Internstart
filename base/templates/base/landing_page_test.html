{% extends 'main.html' %}
{% load static %}
{% load i18n %}
{% block content %}

<!-- Google Font -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&display=swap" rel="stylesheet">

<!-- =========================
      HERO
========================= -->
<!-- =========================
      HERO  (now shows TikTok-style phone carousel)
========================= -->
<section class="hero">
  <div class="hero__copy">
    <h1 class="hero__title">
      {% blocktrans trimmed %}Apply to <span class="accent">200+ jobs</span> in minutes<br>powered by <span class="accent">AI</span>{% endblocktrans %}
    </h1>

    <p class="hero__subhead">
      {% trans "Internstart finds the right opportunities, fills out applications, and sends them for you. Land interviews faster without the endless forms." %}
    </p>

    <div class="hero__ctas">
      <a href="{% url 'register' %}" class="btn btn--primary">
        {% trans "Start applying to jobs with AI" %}
      </a>
      <a href="{% url 'app_login' %}" class="btn btn--ghost" style="box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08) !important;">{% trans "Login" %}</a>
    </div>
  </div>

  <!-- Phone-shaped TikTok carousel -->
  <div class="hero__phone">
    <div class="sp__rail" aria-label="{% trans 'User videos' %}">
      <!-- Card 1 -->
      <article class="sp__card is-active">
        <video class="sp__video" playsinline muted loop preload="metadata"
               src="{% static 'images/internstart1_small.mp4' %}"></video>
        <div class="sp__overlay">
          <div class="sp__meta">
            <div class="sp__handle">@sofia • {% trans "CBS" %}</div>
            <div class="sp__caption">{% trans "“Sent 40 apps this week.”" %}</div>
          </div>
          <div class="sp__actions">
            <button type="button" class="sp__mute" aria-pressed="true" aria-label="{% trans 'Unmute video' %}">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 9v6h4l5 4V5L8 9H4zM16 8v8m3-10v12" fill="currentColor"></path>
              </svg>
            </button>
            <div class="sp__stat">❤️ 1.2k</div>
          </div>
        </div>
      </article>

      <!-- Card 2 -->
      <article class="sp__card">
        <video class="sp__video" playsinline muted loop preload="metadata"
               src="{% static 'images/internstart2_small.mp4' %}"></video>
        <div class="sp__overlay">
          <div class="sp__meta">
            <div class="sp__handle">@mikkel • {% trans "DTU" %}</div>
            <div class="sp__caption">{% trans "“AI filled my apps while I studied.”" %}</div>
          </div>
          <div class="sp__actions">
            <button type="button" class="sp__mute" aria-pressed="true" aria-label="{% trans 'Unmute video' %}">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 9v6h4l5 4V5L8 9H4zM16 8v8m3-10v12" fill="currentColor"></path>
              </svg>
            </button>
            <div class="sp__stat">❤️ 980</div>
          </div>
        </div>
      </article>

      <!-- Card 3 -->
      <article class="sp__card">
        <video class="sp__video" playsinline muted loop preload="metadata"
               src="{% static 'images/internstart3_small.mp4' %}"></video>
        <div class="sp__overlay">
          <div class="sp__meta">
            <div class="sp__handle">@lina • {% trans "KU" %}</div>
            <div class="sp__caption">{% trans "“2 interviews after one evening.”" %}</div>
          </div>
          <div class="sp__actions">
            <button type="button" class="sp__mute" aria-pressed="true" aria-label="{% trans 'Unmute video' %}">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 9v6h4l5 4V5L8 9H4zM16 8v8m3-10v12" fill="currentColor"></path>
              </svg>
            </button>
            <div class="sp__stat">❤️ 1.6k</div>
          </div>
        </div>
      </article>
    </div>
  </div>
</section>


<!-- =========================
      APPLY DEMO (Tinder cards + AI Form) — now under hero
========================= -->
<section class="social-proof" id="social-proof">
  <div class="sp__inner">
    <header class="sp__head">
      <h2 class="sp__title">
        {% trans "Do like everyone else — apply with AI" %}
      </h2>
      <p class="sp__sub">
        {% trans "Real students auto-applying to dozens of roles in minutes." %}
      </p>
    </header>

    <!-- Original demo-stage moved here -->
    <div class="demo-stage">
      <div class="demo-overlay" aria-live="polite">
        <span class="demo-overlay__text" role="status" aria-atomic="true"></span>
      </div>

      <!-- Tinder-style Swipe Demo -->
      <div class="tinder-section" aria-label="{% trans 'Automatic swipe demo' %}">
        <div class="tinder-deck" data-autoplay="true">
          <!-- T-Card 1 -->
          <article class="card card--pink">
            <div class="card__body">
              <div class="card__info">
                <img src="{% static 'images/Goldman-Sachs-1869.png' %}" alt="Goldman Sachs logo" class="card__logo">
                <h4 class="card__role">{% trans "Investment Banking Intern" %}</h4>
                <h3 class="card__company">Goldman Sachs</h3>
                <p class="card__meta">{% trans "Location: New York, NY" %}</p>
              </div>
              <div class="card__actions" aria-label="{% trans 'Card actions' %}">
                <button type="button" class="action action--dismiss" aria-label="{% trans 'Dismiss' %}">{% trans "Dismiss" %}</button>
                <button type="button" class="action action--apply"   aria-label="{% trans 'Apply' %}">{% trans "Apply" %}</button>
              </div>
            </div>
          </article>

          <!-- T-Card 2 -->
          <article class="card card--blue">
            <div class="card__body">
              <div class="card__info">
                <img src="{% static 'images/danske-bank.png' %}" alt="Danske Bank logo" class="card__logo">
                <h4 class="card__role">{% trans "Corporate Finance Intern" %}</h4>
                <h3 class="card__company">Danske Bank</h3>
                <p class="card__meta">{% trans "Location: Copenhagen, Denmark" %}</p>
              </div>
              <div class="card__actions" aria-label="{% trans 'Card actions' %}">
                <button type="button" class="action action--dismiss" aria-label="{% trans 'Dismiss' %}">{% trans "Dismiss" %}</button>
                <button type="button" class="action action--apply"   aria-label="{% trans 'Apply' %}">{% trans "Apply" %}</button>
              </div>
            </div>
          </article>

          <!-- T-Card 3 -->
          <article class="card card--yellow">
            <div class="card__body">
              <div class="card__info">
                <img src="{% static 'images/deutsche-bank.png' %}" alt="Deutsche Bank logo" class="card__logo">
                <h4 class="card__role">{% trans "Global Markets Intern" %}</h4>
                <h3 class="card__company">Deutsche Bank</h3>
                <p class="card__meta">{% trans "Location: Frankfurt, Germany" %}</p>
              </div>
              <div class="card__actions" aria-label="{% trans 'Card actions' %}">
                <button type="button" class="action action--dismiss" aria-label="{% trans 'Dismiss' %}">{% trans "Dismiss" %}</button>
                <button type="button" class="action action--apply"   aria-label="{% trans 'Apply' %}">{% trans "Apply" %}</button>
              </div>
            </div>
          </article>
        </div>
      </div>

      <!-- AI Autofill Demo -->
      <div class="ai-demo" role="region" aria-label="AI auto-filling a job application">
        <div class="ai-demo__window">
          <div class="ai-demo__chrome">
            <div class="ai-demo__dots"><span></span><span></span><span></span></div>
            <div class="ai-demo__title">Job Application — Preview</div>
            <div class="ai-demo__progress">
              <div class="ai-demo__bar"></div><span class="ai-demo__pct">0%</span>
            </div>
          </div>

          <form class="ai-form" autocomplete="off" aria-describedby="ai-status">
            <div class="ai-field">
              <label for="ai-name">{% trans "Full name" %}</label>
              <input id="ai-name" type="text" placeholder="{% trans 'e.g., Ava Jensen' %}" inputmode="text" />
              <div class="ai-field__check" aria-hidden="true">✓</div>
            </div>

            <div class="ai-field">
              <label for="ai-email">{% trans "Email" %}</label>
              <input id="ai-email" type="email" placeholder="name@university.dk" />
              <div class="ai-field__check" aria-hidden="true">✓</div>
            </div>

            <div class="ai-field">
              <label for="ai-portfolio">{% trans "Portfolio / LinkedIn" %}</label>
              <input id="ai-portfolio" type="url" placeholder="https://…" />
              <div class="ai-field__check" aria-hidden="true">✓</div>
            </div>

            <div class="ai-field ai-field--file">
              <label for="ai-resume">{% trans "Resume" %}</label>
              <input id="ai-resume" type="file" accept=".pdf,.doc,.docx,.rtf" hidden>
              <div class="ai-file">
                <button type="button" class="ai-file__btn">{% trans "Attach resume" %}</button>
                <span class="ai-file__name" data-empty="{% trans 'No file selected' %}">{% trans "No file selected" %}</span>
              </div>
              <div class="ai-upload" aria-hidden="true"><div class="ai-upload__bar"></div></div>
              <div class="ai-field__check" aria-hidden="true">✓</div>
            </div>

            <div class="ai-field ai-field--textarea">
              <label for="ai-cover">{% trans "Short cover note" %}</label>
              <textarea id="ai-cover" rows="4" placeholder="{% trans 'A few sentences…' %}"></textarea>
              <div class="ai-field__check" aria-hidden="true">✓</div>
            </div>

            <div class="ai-consent">
              <input id="ai-consent" type="checkbox" />
              <label for="ai-consent">{% trans "I consent to submit this application." %}</label>
            </div>

            <div class="ai-actions">
              <button type="button" class="btn btn--primary ai-submit" disabled>{% trans "Apply now" %}</button>
            </div>

            <p id="ai-status" class="ai-status" aria-live="polite">{% trans "AI is preparing your application…" %}</p>
          </form>
        </div>
      </div>
      <!-- /.AI Autofill Demo -->
    </div><!-- /.demo-stage -->
  </div>
</section>



<!-- =========================
      FOOTER
========================= -->
<footer class="site-footer">
  <div class="footer__inner">
    <h3>{% trans "Internstart" %}</h3>
    <p>{% trans "Helping students and graduates connect with top companies and discover career opportunities." %}</p>
    <nav class="footer__links" aria-label="Footer">
      <a href="{% url 'about' %}">{% trans "About" %}</a>
      <a href="#">{% trans "Careers" %}</a>
      <a href="{% url 'contact' %}">{% trans "Contact" %}</a>
      <a href="{% url 'privacy_policy' %}">{% trans "Privacy Policy" %}</a>
    </nav>
    <div class="footer__legal">© 2025 {% trans "Internship Platform. All rights reserved." %}</div>
  </div>
</footer>

<style>
  :root{
    /* Layout */
    --container-max: 1480px;
    --gutter-x: 60px;
    --hero-copy-max: 620px;
    --hero-gap-min: 72px;
    --hero-gap-max: 96px;

    /* Cards */
    --card-w: clamp(360px, 30vw, 440px);
    --card-h: 600px;
    --card-pad: 28px;

    /* Action buttons */
    --action-size: 48px;
    --action-gap: 14px;

    /* Typography */
    --font: 'Manrope', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    --text: #111;
    --muted: #667085;
    --meta: #6b7280;
    --brand: #FF2F5A;
  }

  *{ box-sizing:border-box; }
  body{ font-family: var(--font); color:var(--text); }

  /* ---------- Hero ---------- */
  .hero{
    display: grid;
    grid-template-columns: minmax(520px, var(--hero-copy-max)) minmax(0,1fr);
    column-gap: clamp(var(--hero-gap-min), 6vw, var(--hero-gap-max));
    align-items: center;
    min-height: 80vh;
    max-width: var(--container-max);
    margin: 0 auto;
    padding: 40px var(--gutter-x) 0;
  }
  .hero__copy{ max-width: var(--hero-copy-max); }
  .hero__title{
    font-size: clamp(48px, 5.4vw, 72px);
    line-height: 1.08;
    letter-spacing: -0.3px;
    font-weight: 800;
    margin: 0;
  }
  .hero__title .accent{ background-color:#FF2F5A; -webkit-background-clip:text; background-clip:text; color:transparent; }
  .hero__title .accent::after{ content:none; }
  .hero__subhead{ margin-top:28px; font-size:18px; line-height:1.55; color:var(--muted); max-width:58ch; }
  .hero__ctas{ margin-top:24px; display:flex; gap:18px; }

  .btn{
    display:inline-flex; align-items:center; justify-content:center;
    height:56px; padding:0 22px; border-radius:12px; font-weight:700; font-size:18px;
    text-decoration:none; transition:.2s ease; border:1px solid transparent;
  }
  .btn--primary{ background:var(--brand); color:#fff; box-shadow:0 4px 12px rgba(0,0,0,.08); }
  .btn--primary:hover{ transform: translateY(-1px); }
  .btn--ghost{ background:#f5f5f5; color:#111; }
  .btn--ghost:hover{ background:#efefef; }

  /* ---------- Stage (overlay container) ---------- */
  /* Keep demo content centered but full-width */
  .demo-stage {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    min-height: var(--card-h);
    margin: 0;
  }

  /* Center both layers */
  .demo-stage .tinder-section,
  .demo-stage .ai-demo {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin: 0;
  }

  /* --- Restore the normal width of the AI form --- */
  .ai-demo {
    --ai-w: 760px; /* wider than before (was 560px) */
    width: var(--ai-w);
    max-width: 100%;
    transform: translate(-50%, -50%);
  }

  /* Keep form window at that width too */
  .ai-demo__window {
    width: 100%;
    max-width: var(--ai-w);
    margin: 0 auto;
  }

  /* On small screens, scale back down gracefully */
  @media (max-width: 900px) {
    .ai-demo { --ai-w: 520px; }
  }
  @media (max-width: 600px) {
    .ai-demo { --ai-w: 100%; transform: none; left: 0; }
  }

  .ai-demo{ --ai-w: 560px; --ai-pad: 18px; max-width: var(--ai-w); margin: 0; }

  .demo-stage .tinder-section,
  .demo-stage .ai-demo {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    margin: 0;
  }

  .demo-stage .tinder-section { z-index: 2; }
  .demo-stage .ai-demo { z-index: 1; }

  /* ---------- Card base (neutral, no 3D rules) ---------- */
  .card{
    width: var(--card-w);
    height: var(--card-h);
    background:#fff;
    border-radius: 24px;
    box-shadow: 0 24px 50px rgba(0,0,0,.22);
  }
  .card__body{
    height:100%; padding:var(--card-pad);
    display:flex; flex-direction:column; justify-content:space-between; align-items:center; text-align:center;
  }

  .card__info{
    display:flex;
    flex-direction:column;
    align-items:center;
    margin-top:40px;
    flex:1 0 auto;
  } 
  .card__logo{
    width:auto;
    height:auto;
    max-width:240px;
    max-height:140px;
    object-fit:contain;
    object-position:center;
    margin-bottom:22px;
  }
  .card__role{ font-size:18px; font-weight:600; color:#4b5563; margin:8px 0 6px; }
  .card__company{ font-size:22px; font-weight:800; color:#2F4858; margin:2px 0; }
  .card__meta{ font-size:15px; color:var(--meta); margin:6px 0 0; }
  .card--pink{ background:#FFE7EC; }
  .card--blue{ background:#E7F0FF; }
  .card--yellow{ background:#FFF9E6; }

  /* ---------- Tinder deck ---------- */
  .tinder-section{ margin-top: 0; }
  .tinder-deck{
    position: relative;
    width: var(--card-w);
    min-height: var(--card-h);
    margin: 0 auto;
    perspective:1200px;
  }
  .tinder-deck .card{
    position:absolute; top:0; left:50%;
    transform: translateX(-50%) translateY(0) rotate(0deg) scale(1);
    opacity:0; pointer-events:none;
    transition: transform .6s ease, opacity .35s ease, filter .35s ease;
  }

  .tinder-deck .card__actions{
    margin-top:auto;
    padding-bottom:32px;
  }
  
  .tinder-deck .card.is-top{
    opacity:1;
    filter:none;                 /* ensure crisp display */
    pointer-events:auto;
    z-index:3;
    transform: translateX(-50%) translateY(0) scale(1);
  }

  .tinder-deck .card.is-next{
    opacity:1; z-index:2; transform: translateX(-50%) translateY(12px) scale(.992);
    pointer-events:none; box-shadow:0 14px 32px rgba(0,0,0,.14);
  }
  .tinder-deck .card:not(.is-top):not(.is-next){ opacity:0; z-index:1; }
  .tinder-deck .card__actions{ opacity:1; pointer-events:auto; }

  @keyframes tSwipeLeft {
    0% { transform: translateX(-50%) translateY(0) rotate(0) scale(1); opacity:1; }
    100%{ transform: translateX(calc(-50% - 740px)) rotate(0) scale(1); opacity:0; }
  }
  @keyframes tSwipeRight {
    0% { transform: translateX(-50%) translateY(0) rotate(0) scale(1); opacity:1; }
    100%{ transform: translateX(calc(-50% + 740px)) rotate(0) scale(1); opacity:0; }
  }
  .tinder-deck { --swipe-duration: 1.8s; }
  .tinder-deck .card.swipe-left  { animation: tSwipeLeft  var(--swipe-duration) cubic-bezier(.22,.61,.36,1) forwards; }
  .tinder-deck .card.swipe-right { animation: tSwipeRight var(--swipe-duration) cubic-bezier(.22,.61,.36,1) forwards; }

  .tinder-deck .card__actions{ display:flex; gap:var(--action-gap); justify-content:center; margin-top:auto; padding-bottom:22px; }
  .tinder-deck .action{
    height:48px; min-width:116px; padding:0 16px; border-radius:999px;
    background:#fff; border:1.5px solid #e5e7eb; box-shadow:0 2px 6px rgba(0,0,0,.12);
    font-weight:800; font-size:14px; letter-spacing:.2px; color:#111;
    cursor:default; transition: transform .15s ease, background .15s ease, border-color .15s ease;
  }
  .tinder-deck .action.is-pressed{ transform: scale(.96); box-shadow: inset 0 2px 0 rgba(0,0,0,.02), 0 1px 2px rgba(0,0,0,.06); }
  .tinder-deck .action--dismiss{ color:#EF4444; border-color:#FECACA; background:#fff; }
  .tinder-deck .action--apply{   color:#10B981; border-color:#A7F3D0; background:#fff; }

  /* ---------- AI Autofill Demo ---------- */
  .ai-demo{ --ai-w: 560px; --ai-pad: 16px; max-width: var(--ai-w); margin: 0; }
  @media (max-width:1024px){ .ai-demo{ margin: 0; width:min(100%,var(--ai-w)); } }
  .ai-demo__window{ border-radius:16px; background:#fff; box-shadow:0 18px 40px rgba(0,0,0,.12); border:1px solid #e5e7eb; overflow:hidden; font-family:var(--font); }
  .ai-demo__chrome{
    display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:8px;
    padding:8px 10px; background:linear-gradient(180deg,#f8fafc 0%, #eef2f7 100%); border-bottom:1px solid #e5e7eb;
  }
  .ai-demo__dots span{ display:inline-block; width:10px; height:10px; border-radius:50%; margin-right:6px; background:#ff5f56; }
  .ai-demo__dots span:nth-child(2){ background:#ffbd2e; } .ai-demo__dots span:nth-child(3){ background:#27c93f; }
  .ai-demo__title{ font-weight:700; color:#111; font-size:14px; }
  .ai-demo__progress{ display:flex; align-items:center; gap:8px; }
  .ai-demo__bar{ --pct:0%; width:96px; height:6px; border-radius:999px; background:#e5e7eb; position:relative; overflow:hidden; }
  .ai-demo__bar::after{ content:""; position:absolute; inset:0 auto 0 0; width:var(--pct); background:linear-gradient(90deg,#10B981,#3B82F6); transition: width .25s ease; }
  .ai-demo__pct{ font-size:11px; color:#374151; min-width:32px; text-align:right; }
  .ai-form{ padding:14px var(--ai-pad) 18px; display:grid; grid-template-columns: repeat(2,minmax(0,1fr)); gap:14px 16px; align-items:start; }
  .ai-field{ position:relative; display:grid; grid-template-columns:1fr 28px; grid-template-rows:auto auto; align-items:center; gap:6px 8px; margin:0; }
  .ai-field label{ grid-column:1 / -1; grid-row:1; font-size:12px; color:#6b7280; font-weight:600; letter-spacing:.2px; }
  .ai-field input, .ai-field textarea{ grid-column:1; grid-row:2; width:100%; padding:12px 12px; font-size:14px; line-height:1.35; border-radius:12px; border:1px solid #e5e7eb; background:#fff; color:#111; outline:none; transition: border-color .2s, box-shadow .2s, background .2s; }
  .ai-field--textarea textarea{ min-height:140px; line-height:1.5; padding:16px 16px 20px 14px; resize:vertical; }

  /* Make the short cover note field span full width */
  .ai-field--textarea {
    grid-column: 1 / -1; /* span across both columns */
  }

  .ai-field.is-active input, .ai-field.is-active textarea{ border-color: rgba(59,130,246,.6); box-shadow: 0 0 0 3px rgba(59,130,246,.15); }
  .ai-field.is-done input, .ai-field.is-done textarea{ border-color: rgba(16,185,129,.6); box-shadow: 0 0 0 3px rgba(16,185,129,.12); background:#f7fffb; }
  .ai-field__check{ grid-column:2; grid-row:2; position:static; width:22px; height:22px; border-radius:50%; background:#10B981; color:#fff; display:grid; place-items:center; font-size:14px; transform:scale(.6); opacity:0; transition:.18s; }
  .ai-field.is-done .ai-field__check{ transform:scale(1); opacity:1; }
  .ai-consent, .ai-actions, .ai-status{ grid-column:1 / -1; }
  .ai-consent{ display:flex; gap:10px; align-items:flex-start; margin:6px 0 10px; font-size:13px; color:#374151; }
  .ai-consent input{ width:18px; height:18px; margin-top:2px; }
  .ai-actions{ display:flex; gap:10px; flex-wrap:wrap; }
  .ai-actions .btn{ height:48px; font-size:16px; }
  .ai-actions .ai-submit[disabled]{ opacity:.6; cursor:not-allowed; }
  .ai-status{ margin-top:12px; font-size:13px; color:#6b7280; }

  .ai-file{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
  .ai-file__btn{ height:36px; padding:0 14px; border-radius:10px; background:#fff; border:1.5px solid #e5e7eb; color:#111; font-weight:700; font-size:13px; box-shadow:0 1px 3px rgba(0,0,0,.08); transition:.15s; }
  .ai-file__btn.is-pressed{ transform:scale(.97); background:#ECFDF5; border-color:#A7F3D0; color:#059669; box-shadow: inset 0 2px 0 rgba(0,0,0,.02), 0 1px 2px rgba(0,0,0,.06); }
  .ai-file__name{ flex:1; text-align:right; font-size:13px; color:#6b7280; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .ai-upload{ --up:0%; height:6px; border-radius:999px; background:#eef2f7; overflow:hidden; margin-top:8px; opacity:0; transition:opacity .2s; }
  .ai-upload.is-visible{ opacity:1; }
  .ai-upload__bar{ width:var(--up); height:100%; background:linear-gradient(90deg,#10B981,#3B82F6); transition:width .08s linear; }

  .ai-demo__window{ transition: opacity .35s ease, transform .35s ease; }
  .ai-demo__window.is-fading{ opacity:0; transform: translateY(8px) scale(.98); }
  .ai-demo[hidden]{ display:none !important; }

  .ai-success{ position:absolute; inset:0; display:grid; place-items:center; background: rgba(255,255,255,.55); backdrop-filter:blur(4px); -webkit-backdrop-filter:blur(4px); opacity:0; visibility:hidden; pointer-events:none; transition: opacity .25s, visibility .25s; border-radius:16px; }
  .ai-success.is-visible{ opacity:1; visibility:visible; pointer-events:auto; }
  .ai-success__card{ background:#fff; border-radius:16px; padding:24px 28px; width:min(92%,380px); text-align:center; border:1px solid #e5e7eb; box-shadow:0 12px 30px rgba(0,0,0,.14); }
  .ai-success__card h4{ margin:12px 0 6px; font-weight:800; }
  .ai-success__card p{ margin:0 0 14px; color:#6b7280; }
  .ai-success__icon svg{ width:56px; height:56px; }
  .ai-success__icon .ring{ stroke:#A7F3D0; stroke-width:5; fill:none; opacity:.9; }
  .ai-success__icon .mark{ stroke:#10B981; stroke-width:5; fill:none; stroke-linecap:round; stroke-linejoin:round; stroke-dasharray:60; stroke-dashoffset:60; animation: aiCheck .6s ease forwards .15s; }
  @keyframes aiCheck{ to{ stroke-dashoffset:0; } }
  .ai-demo__window.is-success{ border-color: rgba(16,185,129,.6); box-shadow: 0 0 0 3px rgba(16,185,129,.18), 0 18px 40px rgba(0,0,0,.12); }
  .ai-form.is-success input, .ai-form.is-success textarea{ border-color: rgba(16,185,129,.7); background:#F0FDF4; }
  .ai-form.is-success .ai-actions .ai-submit{ background:#10B981; }

  /* ---------- Responsive tweaks ---------- */
  @media (max-width: 1279px){ .hero{ column-gap: clamp(56px, 6vw, 80px); } .card__logo{ max-width:200px; } }
  @media (max-width: 1024px){
    .hero{ grid-template-columns: 1fr; row-gap:24px; padding:32px 28px 0; }
    .demo-stage{ margin: 0 auto; }
  }
  @media (max-width: 640px){
    :root{ --card-w: 332px; --card-h: 520px; }
    .hero__ctas{ flex-direction: column; gap:16px; }
  }

  @media (max-width: 600px){
    .header,.header .container{ height:50px !important; padding:0 10px !important; margin-bottom:0 !important; }
    .header + .hero{ margin-top:0 !important; }
    :root{ --gutter-x:14px; }
    .hero{ grid-template-columns:1fr; padding:64px var(--gutter-x) 120px !important; row-gap:16px; min-height:auto; flex:1 0 auto; }
    .hero__copy{ max-width:34rem; margin-top:20px; }
    .hero__title{ font-size: clamp(40px, 10vw, 54px) !important; line-height:1.1; letter-spacing:-0.6px; margin:0; }
    .hero__subhead{ margin-top:14px; font-size:20px !important; line-height:1.5; color:#4f5b6a; max-width:34ch; }
    .hero__ctas{ margin-top:28px; gap:12px; flex-direction:column; }
    .btn{ height:48px; font-size:17px; padding:0 16px; border-radius:12px; }
    .btn--ghost{ background:#f3f4f6; border:1px solid #e5e7eb; }
  }
  @media (max-width: 380px){
    .hero__title{ font-size: clamp(36px, 4.4vw, 56px); line-height:1.1; letter-spacing:-0.4px; font-weight:800; margin:0; color:#111; }
    .hero__subhead{ font-size:15px; }
    .card__logo{ max-width:150px; }
  }
  @media (max-width: 600px){
    .hero__title{ color:#000 !important; }
    .hero__title .accent{ background-color:#FF2F5A; -webkit-background-clip:text; background-clip:text; color:transparent; }
  }

  html[lang="da"] .hero__title{ font-size: clamp(40px, 5vw, 64px); line-height:1.1; max-width:700px; }
  html[lang="da"] .hero__subhead{ font-size:18px; max-width:600px; }
  .hero__title br{ display:block; content:""; margin-bottom: .2em; }

  /* Footer */
  .site-footer{ background:#111; color:#bbb; text-align:center; padding:56px 20px; margin-top:80px; font-family:var(--font); }
  .footer__inner{ max-width:1000px; margin:0 auto; }
  .site-footer h3{ color:#fff; font-weight:600; margin:0 0 16px; }
  .site-footer p{ font-size:16px; line-height:1.6; margin:0 0 24px; color:#cfcfcf; }
  .footer__links a{ color:#bbb; text-decoration:none; margin: 0 14px; }
  .footer__links{ margin-bottom:28px; }
  .footer__legal{ font-size:14px; color:#777; }

  /* ---------- Side explainer (low-key) ---------- */
  .demo-overlay{
    position:absolute;
    z-index:5;
    pointer-events:none;
    font-family: var(--font);
    color:#667085;
    font-size:14px;
    font-weight:600;
    line-height:1.35;
    max-width:220px;
  }
  .demo-overlay__text{
    display:block;
    opacity:0;
    transform: translateY(-4px);
    transition: opacity .35s ease, transform .35s ease;
  }
  .demo-overlay__text.is-visible{ opacity:1; transform:none; }

  /* next to the deck — RIGHT side */
  .demo-overlay.is-deck-right{
    top:50%;
    left:50%;
    margin-left: calc(var(--card-w)/2 + 22px);
    transform: translateY(-50%);
    text-align:left;
  }
  /* next to the deck — LEFT side */
  .demo-overlay.is-deck-left{
    top:50%;
    right:50%;
    margin-right: calc(var(--card-w)/2 + 22px);
    transform: translateY(-50%);
    text-align:right;
  }
  /* next to the form (always on the right) */
  /* Over the form — centered above top border */
  .demo-overlay.is-form {
    position: absolute;
    left: 50%;
    top: calc(50% - var(--card-h) / 2 - 28px); /* move above the top border */
    transform: translateX(-50%);
    width: 100%;
    text-align: center;
    max-width: 100%;
    pointer-events: none;
  }

  /* tuck under the animation on tablets, hide on very small */
  @media (max-width:1024px){
    .demo-overlay{
      top:auto !important; bottom:-18px;
      left:50% !important; right:auto !important;
      margin:0 !important; transform: translateX(-50%) !important;
      text-align:center; max-width:90vw;
    }
  }
  @media (max-width:600px){ .demo-overlay{ display:none; } }

  .ai-chip{
    margin-left:10px;
    padding:4px 8px;
    border-radius:999px;
    font-size:12px; font-weight:700;
    color:#0f5132; background:#d1fae5;  /* subtle success */
    border:1px solid #a7f3d0;
    opacity:0; transform:translateY(-2px);
    transition:opacity .3s ease, transform .3s ease;
  }
  .ai-chip.is-on{ opacity:1; transform:none; }
  @media (prefers-reduced-motion: reduce){ .ai-chip{ transition:none; } }

  .ai-status{ font-size:12px; color:#475467; }
  .ai-status::before{
    content:""; display:inline-block; width:6px; height:6px; border-radius:50%;
    background:#22c55e; margin-right:8px; box-shadow:0 0 0 0 rgba(34,197,94,.7); 
    animation:pulse 1.6s infinite;
  }
  @keyframes pulse { 70%{ box-shadow:0 0 0 8px rgba(34,197,94,0) } }
  @media (prefers-reduced-motion: reduce){ .ai-status::before{ animation:none; } }

  /* ---------- Social Proof (TikTok phone-style) ---------- */
  .social-proof{
    --sp-max: var(--container-max, 1280px);
    --sp-radius: 24px;
    --sp-h: 640px;          /* visual height target; used only for older fallbacks */
    --phone-w: 360px;       /* phone body width */
    padding: 56px 0 24px;   /* center section */
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .sp__inner{
    max-width: var(--sp-max);
    margin: 0 auto;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .sp__head{ text-align:center; margin-bottom: 22px; }
  .sp__title{
    margin:0;
    font-weight: 900;
    letter-spacing:-0.3px;
    font-size: clamp(22px, 3vw, 34px);
  }
  .sp__sub{
    margin:.5rem 0 0;
    color: var(--muted);
    font-size: clamp(14px, 1.6vw, 16px);
  }

  /* Single, phone-shaped viewport for the videos */
  .sp__rail {
    position: relative;
    width: var(--phone-w);
    max-width: 90vw;
    aspect-ratio: 9 / 16;     /* phone ratio */
    overflow: hidden;
    border-radius: var(--sp-radius);
    box-shadow: 0 8px 28px rgba(0,0,0,.3);
    background: #000;
  }

  .sp__card{
    position: absolute;
    inset: 0;
    opacity: 0;
    transform: scale(0.98);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }
  .sp__card.is-active{
    opacity: 1;
    transform: scale(1);
    z-index: 2;
  }

  .sp__video{
    width:100%;
    height:100%;
    object-fit: cover;
    display:block;
    border-radius: inherit;
  }

  /* Overlay UI */
  .sp__overlay{
    position:absolute; inset:0;
    display:flex; flex-direction:column; justify-content:flex-end;
    pointer-events:none;
    background: linear-gradient(180deg, rgba(0,0,0,0) 60%, rgba(0,0,0,.45) 100%);
    border-radius: inherit;
  }
  .sp__meta{
    color:#fff; padding:12px 12px 8px;
    font-family: var(--font);
  }
  .sp__handle{ font-weight:800; font-size:14px; opacity:.95; }
  .sp__caption{ font-size:13px; opacity:.9; margin-top:4px; }

  .sp__actions{
    display:flex; align-items:center; justify-content:space-between;
    padding:0 10px 10px;
  }
  .sp__mute{
    pointer-events:auto;
    display:inline-grid; place-items:center;
    width:38px; height:38px; border-radius:999px;
    background: rgba(255,255,255,.2);
    color:#fff; border:1px solid rgba(255,255,255,.3);
    backdrop-filter: blur(6px);
    transition: transform .15s ease, background .15s ease;
  }
  .sp__mute:hover{ transform: scale(1.05); background: rgba(255,255,255,.28); }
  .sp__mute svg{ width:18px; height:18px; }
  .sp__mute.is-on{ background: rgba(16,185,129,.9); border-color: rgba(16,185,129,.95); }

  .sp__stat{
    color:#fff; font-weight:800; font-size:13px;
    padding:6px 10px; border-radius:999px;
    background: rgba(255,255,255,.16); border:1px solid rgba(255,255,255,.26);
    backdrop-filter: blur(8px);
  }

  /* CTA */
  .sp__cta{ display:flex; justify-content:center; margin-top: 20px; }

  /* Responsiveness for the phone viewport */
  @media (max-width: 480px){
    .social-proof{ --phone-w: 320px; --sp-radius: 20px; }
  }
</style>

<script>
  /* =========================
     A) AI Form controller (AIDemo)
  ========================= */
  (() => {
    const onReady = (fn) =>
      document.readyState === 'loading'
        ? document.addEventListener('DOMContentLoaded', fn, { once: true })
        : fn();

    onReady(() => {
      const root = document.querySelector('.ai-demo');
      if (!root) return;

      const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const pause = (ms) => new Promise(r => setTimeout(r, ms));

      const fields = {
        name:      document.getElementById('ai-name'),
        email:     document.getElementById('ai-email'),
        portfolio: document.getElementById('ai-portfolio'),
        resume:    document.getElementById('ai-resume'),
        cover:     document.getElementById('ai-cover'),
        consent:   document.getElementById('ai-consent'),
      };

      const resumeBtn  = root.querySelector('.ai-file__btn');
      const winEl      = root.querySelector('.ai-demo__window');
      const formEl     = root.querySelector('.ai-form');

      const progressBar = root.querySelector('.ai-demo__bar');
      const progressPct = root.querySelector('.ai-demo__pct');
      const statusText  = root.querySelector('#ai-status');

      // ✅ tiny chip in title bar
      const chip = root.querySelector('#ai-chip');
      const showChip = (ms = 2200) => {
        if (!chip) return;
        chip.classList.add('is-on');
        setTimeout(() => chip.classList.remove('is-on'), ms);
      };

      // success overlay
      const ensureSuccessUI = () => {
        let overlay = winEl.querySelector('.ai-success');
        if (!overlay) {
          winEl.insertAdjacentHTML('beforeend', `
            <div class="ai-success" hidden>
              <div class="ai-success__card" role="dialog" aria-modal="true" aria-label="Application sent">
                <div class="ai-success__icon" aria-hidden="true">
                  <svg viewBox="0 0 52 52">
                    <circle class="ring" cx="26" cy="26" r="24"></circle>
                    <path class="mark" d="M16 27l7 7 13-13"></path>
                  </svg>
                </div>
                <h4>Application sent!</h4>
                <p>Your application was sent successfully.</p>
                <button type="button" class="btn btn--primary ai-success__ok">Nice!</button>
              </div>
            </div>
          `);
          overlay = winEl.querySelector('.ai-success');
        }
        return { overlay, ok: overlay.querySelector('.ai-success__ok') };
      };
      const success = ensureSuccessUI();

      const setProgress = (v) => {
        const pct = Math.min(100, Math.max(0, Math.round(v)));
        progressBar.style.setProperty('--pct', pct + '%');
        progressPct.textContent = pct + '%';
      };

      const typeInto = (el, text, speed = 22, onTick) => new Promise((resolve) => {
        if (prefersReduced) { el.value = text; onTick?.(text.length); resolve(); return; }
        let i = 0; el.value = '';
        const tick = () => {
          if (i > text.length) return resolve();
          el.value = text.slice(0, i);
          onTick?.(1);
          i++;
          setTimeout(tick, speed + Math.random() * 18);
        };
        tick();
      });

      const RESUME_WEIGHT = prefersReduced ? 1 : 60;
      const steps = [
        { el: fields.name,      text: 'Ava Jensen' },
        { el: fields.email,     text: 'ava.jensen@uni.dk' },
        { el: fields.portfolio, text: 'https://ava.work' },
        { el: fields.resume,    upload: true, focusEl: resumeBtn },
        { el: fields.cover,     text:
          "I’m excited to apply for the Investment Banking Intern role. At CBS Finance Club, I led a 4-member team on DCF/LBO case prep and placed top 3 in a regional valuation challenge. I’m comfortable with Excel, PowerPoint, and Bloomberg, and I’m eager to contribute from day one."
        },
        { el: fields.consent,   check: true }
      ];

      const showSuccess = () => {
        winEl.classList.add('is-success');
        formEl.classList.add('is-success');
        success.overlay.removeAttribute('hidden');
        success.overlay.classList.add('is-visible');
        success.ok?.focus();
      };
      const hideSuccess = () => {
        success.overlay.classList.remove('is-visible');
        success.overlay.setAttribute('hidden','');
        winEl.classList.remove('is-success');
        formEl.classList.remove('is-success');
      };
      const fadeOutAndHide = async (delay = 1100) => {
        if (prefersReduced) { root.setAttribute('hidden',''); root.setAttribute('aria-hidden','true'); return; }
        await pause(delay);
        winEl.classList.add('is-fading');
        await new Promise(res => winEl.addEventListener('transitionend', res, { once: true }));
        root.setAttribute('hidden',''); root.setAttribute('aria-hidden','true');
        winEl.classList.remove('is-fading');
      };
      const autoPressAndCelebrate = async () => {
        statusText.textContent = "Submitting…";
        await pause(prefersReduced ? 120 : 600);
        showSuccess();
        await fadeOutAndHide(prefersReduced ? 0 : 1100);
      };

      let isRunning = false;
      const run = async () => {
        if (isRunning) return;
        isRunning = true;

        hideSuccess();
        root.removeAttribute('hidden'); root.removeAttribute('aria-hidden');

        // narrate & show chip at start of form phase
        statusText.textContent = "AI is preparing your application…";
        showChip();

        // reset
        Object.values(fields).forEach((el) => {
          if (!el) return;
          if (el.type === 'checkbox') el.checked = false;
          else el.value = '';
          el.closest('.ai-field')?.classList.remove('is-active','is-done');
        });
        const resumeName = root.querySelector('.ai-file__name');
        const uploadWrap = root.querySelector('.ai-upload');
        const uploadBar  = root.querySelector('.ai-upload__bar');
        resumeName && (resumeName.textContent = resumeName.getAttribute('data-empty') || '');
        uploadWrap?.classList.remove('is-visible'); uploadBar?.style.setProperty('--up','0%');

        const totalChars = steps.reduce((n, s) => n + (s.text ? s.text.length : 0), 0) + RESUME_WEIGHT || 1;
        let typed = 0; setProgress(0);

        const focusField = (el) => {
          const wrap = el.closest('.ai-field');
          root.querySelectorAll('.ai-field').forEach(w => w.classList.remove('is-active'));
          wrap?.classList.add('is-active');
          wrap?.scrollIntoView?.({ block: 'nearest', behavior: prefersReduced ? 'auto' : 'smooth' });
        };
        const checkField = (el) => el.closest('.ai-field')?.classList.add('is-done');

        const attachResume = async () => {
          // ✅ narrate upload
          statusText.textContent = "AI is uploading your CV…";
          const D = prefersReduced ? 40 : 1200; let used = 0;
          const btn = root.querySelector('.ai-file__btn');
          const upW = root.querySelector('.ai-upload');
          const upB = root.querySelector('.ai-upload__bar');
          btn?.classList.add('is-pressed'); await new Promise(r=>setTimeout(r,200)); btn?.classList.remove('is-pressed');
          upW?.classList.add('is-visible'); upB?.style.setProperty('--up','0%');
          await new Promise((resolve) => {
            const start = performance.now();
            const step = (now) => {
              const t = Math.min(1,(now-start)/D);
              upB?.style.setProperty('--up', Math.round(t*100)+'%');
              const add = Math.round(RESUME_WEIGHT * t) - used;
              if (add > 0){ used += add; typed += add; setProgress(typed/totalChars*100); }
              if (t<1) requestAnimationFrame(step); else resolve();
            }; requestAnimationFrame(step);
          });
          const nameEl = root.querySelector('.ai-file__name');
          if (nameEl) nameEl.textContent = 'Ava_Jensen_Resume.pdf';
          upW?.classList.remove('is-visible');
        };

        const pauseStep = prefersReduced ? 40 : 180;

        for (const s of steps) {
          if (!s.el) continue;
          focusField(s.focusEl || s.el);

          if (s.upload){ await attachResume(); checkField(s.el); await new Promise(r=>setTimeout(r,pauseStep)); continue; }
          if (s.check){ if (!prefersReduced) await new Promise(r=>setTimeout(r,300)); s.el.checked = true; if (!prefersReduced) await new Promise(r=>setTimeout(r,200)); checkField(s.el); continue; }

          const label = (s.el.labels?.[0]?.innerText || '').trim();
          statusText.textContent = `AI is filling “${label}”…`;
          await typeInto(s.el, s.text, 22, () => { typed += 1; setProgress(typed/totalChars*100); });
          checkField(s.el);
          await new Promise(r=>setTimeout(r,pauseStep));
        }

        setProgress(100);
        root.querySelector('#ai-status').textContent = "Ready to submit — optimized by AI.";
        await autoPressAndCelebrate();
        isRunning = false;
        return true;
      };

      root.querySelector('.ai-replay')?.addEventListener('click', run);

      window.AIDemo = {
        runOnce: run,
        hide: () => { root.setAttribute('hidden',''); root.setAttribute('aria-hidden','true'); },
        show: () => { root.removeAttribute('hidden'); root.removeAttribute('aria-hidden'); }
      };
    });
  })();
</script>

<script>
  /* =========================
   B) Tinder controller (side explainer that flips per swipe)
  ========================= */
  (() => {
    const ready = (fn) =>
      document.readyState === 'loading'
        ? document.addEventListener('DOMContentLoaded', fn, { once: true })
        : fn();
  
    ready(() => {
      const section = document.querySelector('.tinder-section');
      const deck    = document.querySelector('.tinder-deck');
      const stage   = document.querySelector('.demo-stage');
      const overlay = document.querySelector('.demo-overlay');
      const overlayTextEl = document.querySelector('.demo-overlay__text');
      if (!deck || !section || !stage || !overlay || !overlayTextEl) return;
  
      const setDeckSide = (side) => {
        overlay.classList.remove('is-form','is-deck-left','is-deck-right');
        overlay.classList.add(side === 'left' ? 'is-deck-left' : 'is-deck-right');
      };
      const showOverlayText = (text) => {
        overlayTextEl.textContent = text;
        overlayTextEl.classList.remove('is-visible');
        void overlayTextEl.offsetWidth; // restart transition
        overlayTextEl.classList.add('is-visible');
      };
  
      const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const PAUSE = 1600, PRESS = 220;
      const pause = (ms) => new Promise(r => setTimeout(r, ms));
  
      const setStack = () => {
        const cards = [...deck.querySelectorAll('.card')];
        cards.forEach(c => c.classList.remove('is-top','is-next'));
        cards.forEach((c, i) => c.style.zIndex = String(cards.length - i));
        if (cards[0]) cards[0].classList.add('is-top');
        if (cards[1]) cards[1].classList.add('is-next');
      };
  
      const swipeOnce = async (stepIndex, totalSteps) => {
  const top = deck.querySelector('.card.is-top') || deck.querySelector('.card');
  if (!top) return;

  const btnDismiss = top.querySelector('.action--dismiss');
  const btnApply   = top.querySelector('.action--apply');

  const direction = (stepIndex < totalSteps - 1) ? 'left' : 'right';
  const pressBtn  = direction === 'right' ? btnApply : btnDismiss;

  // --- Overlay logic ---
  if (stepIndex < 1) {
    // First cards → swipe left prompt
    setDeckSide('left');
    showOverlayText('Swipe left to dismiss');
  }

  // Simulate button press
  if (pressBtn) {
    pressBtn.classList.add('is-pressed');
    pressBtn.setAttribute('aria-pressed', 'true');
    await pause(PRESS);
    pressBtn.classList.remove('is-pressed');
    pressBtn.removeAttribute('aria-pressed');
  }

  // Start swipe animation
  top.classList.add(direction === 'right' ? 'swipe-right' : 'swipe-left');

  // Wait until animation finishes
  await new Promise(res => top.addEventListener('animationend', res, { once: true }));

  // Move card to back and restack
  top.classList.remove('swipe-left', 'swipe-right', 'is-top');
  top.style.opacity = '0';
  deck.appendChild(top);
  setStack();

  // ✅ Add short delay before showing “Swipe right to apply”
  if (stepIndex === 1) {
    await pause(500); // wait a bit after yellow card appears
    setDeckSide('right');
    showOverlayText('Swipe right to apply');
  }
};



  
      setStack();
      setDeckSide('left'); // default starting side
  
      window.TinderDemo = {
        count: () => deck.querySelectorAll('.card').length,
        setVisible: (show) => {
          if (show) {
            section.removeAttribute('hidden'); section.removeAttribute('aria-hidden');
            setDeckSide('left');
          } else {
            section.setAttribute('hidden',''); section.setAttribute('aria-hidden','true');
          }
        },
        play: async (swipes = 3) => {
          if (prefersReduced) return true;
          window.TinderDemo.setVisible(true);
          setStack();
          await pause(600);
          for (let i = 0; i < swipes; i++) {
            await swipeOnce(i, swipes);
            if (i < swipes - 1) await pause(PAUSE);
          }
          return true;
        }
      };
    });
  })();
  </script>
  


  <script>
    /* =========================
     C) ORCHESTRATOR — positions explainer beside deck/form
    ========================= */
    (() => {
      const ready = (fn) =>
        document.readyState === 'loading'
          ? document.addEventListener('DOMContentLoaded', fn, { once: true })
          : fn();
    
      ready(() => {
        const stage  = document.querySelector('.demo-stage');
        const tinder = document.querySelector('.tinder-section');
        const deck   = document.querySelector('.tinder-deck');
        const form   = document.querySelector('.ai-demo');
        const overlay = document.querySelector('.demo-overlay');
        const overlayText = document.querySelector('.demo-overlay__text');
        if (!stage || !tinder || !form || !deck || !overlay || !overlayText) return;
    
        const pause = (ms) => new Promise(r => setTimeout(r, ms));
    
        const measure = () => {
          const tHidden = tinder.hasAttribute('hidden');
          const fHidden = form.hasAttribute('hidden');
          if (tHidden) tinder.removeAttribute('hidden');
          if (fHidden) form.removeAttribute('hidden');
          const h = Math.max(tinder.offsetHeight || 0, form.offsetHeight || 0, 420);
          stage.style.minHeight = h + 'px';
          if (tHidden) tinder.setAttribute('hidden','');
          if (fHidden) form.setAttribute('hidden','');
        };
        measure();
        addEventListener('resize', measure);
    
        const resetDeck = () => {
          const cards = [...deck.querySelectorAll('.card')];
          const order = ['card--pink','card--blue','card--yellow'];
          cards.sort((a,b) =>
            order.indexOf([...a.classList].find(c => order.includes(c))) -
            order.indexOf([...b.classList].find(c => order.includes(c)))
          );
          deck.innerHTML = '';
          cards.forEach(c => {
            c.style.opacity = '';
            c.classList.remove('swipe-left','swipe-right','is-top','is-next');
            deck.appendChild(c);
          });
          if (cards[0]) cards[0].classList.add('is-top');
          if (cards[1]) cards[1].classList.add('is-next');
        };
    
        (async function loop(){
          // wait until visible
          await new Promise(res => {
            const io = new IntersectionObserver((entries) => {
              if (entries.some(e => e.isIntersecting)) { io.disconnect(); res(); }
            }, { threshold: 0.3 });
            io.observe(stage);
          });
    
          while (true) {
            resetDeck();
            overlayText.classList.remove('is-visible');
            overlay.classList.add('is-deck');
            overlay.classList.remove('is-form');
    
            form.setAttribute('hidden',''); form.setAttribute('aria-hidden','true');
            tinder.removeAttribute('hidden'); tinder.removeAttribute('aria-hidden');
            measure();
    
            const swipes = Math.max(3, window.TinderDemo?.count?.() || 3);
            await window.TinderDemo?.play?.(swipes);
    
            // Show form + move explainer to the form side
            tinder.setAttribute('hidden',''); tinder.setAttribute('aria-hidden','true');
            form.removeAttribute('hidden');   form.removeAttribute('aria-hidden');
            overlay.classList.remove('is-deck-left','is-deck-right');
            overlay.classList.add('is-form');
            measure();
    
            overlayText.textContent = 'AI applies for you';
            overlayText.classList.add('is-visible');
    
            await window.AIDemo?.runOnce?.();
            await pause(800);
    
            resetDeck();
            await pause(800);
          }
        })();
      });
    })();
    </script>
    
    <script>
      (() => {
        const ready = (fn) =>
          document.readyState === 'loading'
            ? document.addEventListener('DOMContentLoaded', fn, { once: true })
            : fn();
      
        ready(() => {
          const cards = [...document.querySelectorAll('.sp__card')];
          const videos = [...document.querySelectorAll('.sp__video')];
          if (!cards.length || !videos.length) return;
      
          /* ---------- A) TikTok-style rotation ---------- */
          let index = 0;
          const DURATION = 5000; // 5 seconds per video
      
          const showCard = (i) => {
            cards.forEach((c, j) => {
              const v = c.querySelector('video');
              if (j === i) {
                c.classList.add('is-active');
                v.currentTime = 0;
                v.play().catch(() => {});
              } else {
                c.classList.remove('is-active');
                v.pause();
              }
            });
          };
      
          // Show the first card immediately
          showCard(index);
      
          // Auto-advance every few seconds
          setInterval(() => {
            index = (index + 1) % cards.length;
            showCard(index);
          }, DURATION);
      
          /* ---------- B) Tap to toggle mute ---------- */
          document.querySelectorAll('.sp__mute').forEach((btn) => {
            const card = btn.closest('.sp__card');
            const video = card?.querySelector('video');
            if (!video) return;
      
            btn.addEventListener('click', (e) => {
              e.stopPropagation();
              video.muted = !video.muted;
              btn.classList.toggle('is-on', !video.muted);
              btn.setAttribute('aria-pressed', String(!video.muted));
              btn.setAttribute(
                'aria-label',
                video.muted ? 'Unmute video' : 'Mute video'
              );
              if (!video.paused) video.play().catch(() => {});
            });
      
            // Allow tapping the video itself to toggle mute
            card.addEventListener('click', () => btn.click());
          });
        });
      })();
      </script>
      
  
  
{% endblock content %}
