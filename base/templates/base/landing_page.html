


{# base/templates/landing_page.html #}
{% extends "main.html" %}
{% load static i18n %}

{% block content %}
  {# Hero / phone carousel #}
  {% include "base/components/hero.html" %}

  <div class="home-layout">

    <section class="reviews" aria-label="User reviews">
      <div class="reviews__inner">
        <div class="reviews__viewport">
          <ul class="reviews__track">

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.7"></div>
              </div>
              <p class="review-text">‚ÄúPretty good, bought starter first but wanted more swipes so i got pro, ended up getting a student job from it, not the one i wanted the most but still a decent app cant compain.‚Äù</p>
              <div class="reviewer">Milo Selvan</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:5"></div>
              </div>
              <p class="review-text">‚ÄúFirst thing i will say is BIG TIMESAVER. Yes, maybe i could write better applications myself but i think its quantity over quality in this ridiculous job market. Sent 200 applications for internships in boston and got 4 interviews, and actually ended up getting 2 offers and took the best one. Great app.‚Äù</p>
              <div class="reviewer">Chael Anderson</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.6"></div>
              </div>
              <p class="review-text">‚ÄúLets you send applications much faster and they are also decent.‚Äù</p>
              <div class="reviewer">Ezra Bloom</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.9"></div>
              </div>
              <p class="review-text">‚ÄúGamechanger, i tried a couple other ai apps but the applications it sent where more generic and quite obviously ai. I like that it only uses the stuff from your resume thats actually relevant and makes human-like applications.‚Äù</p>
              <div class="reviewer">Connor Williams</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.8"></div>
              </div>
              <p class="review-text">‚ÄúApplications are maybe not as good as the ones you can make yourself, but i literally got more responses from using this then when i send applications myself, and here i could send a bunch of applications in minutes lol‚Äù</p>
              <div class="reviewer">Sofia Garcia</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:5"></div>
              </div>
              <p class="review-text">‚ÄúAwesome‚Äù</p>
              <div class="reviewer">Sebastian Miller</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:5"></div>
              </div>
              <p class="review-text">‚ÄúCant recommend enough‚Äù</p>
              <div class="reviewer">Anna Davis</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.9"></div>
              </div>
              <p class="review-text">‚ÄúA great app. I think people should take advandtadge of this before recruiters start using AI detectors because its a freaking cheat code.‚Äù</p>
              <div class="reviewer">Cassia Monroe</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:5"></div>
              </div>
              <p class="review-text">‚ÄúLiterally changed my life, got a consulting internship from sending 300+ applications and got several other offers as well.‚Äù</p>
              <div class="reviewer">Arden Jackson</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.7"></div>
              </div>
              <p class="review-text">‚ÄúNice app, saved me time.‚Äù</p>
              <div class="reviewer">Soren davis</div>
            </li>

            <li class="review-card" data-country="US">
              <span class="review-flag" aria-hidden="true">üá∫üá∏</span>
              <div class="review-meta">
                <div class="stars" style="--rating:4.6"></div>
              </div>
              <p class="review-text">‚ÄúGot starter and sent 50 applications in a minute basically, didnt get responses yet but i also just sent them. I checked the applications it sent and i think they are better then any i could write myself.‚Äù</p>
              <div class="reviewer">Indira Wren</div>
            </li>

          </ul>
        </div>
      </div>
    </section>

    <!-- ‚úÖ Moved INSIDE .home-layout so order works -->
    <section class="logos-sec">
      {% include "base/components/logos_marquee.html" %}
    </section>

  </div> 
  
  <style>
    :root{
      --rv-gap: clamp(16px, 2.4vw, 28px);
      --rv-card-w: clamp(320px, 30vw, 420px);
      --rv-card-h: 280px;
      --rv-pad-y: clamp(56px, 8vw, 112px);
      --rv-shadow: 0 16px 36px rgba(0,0,0,0.06);
      --accent: #FF2F5A;
    }
  
    .reviews{
      position: relative;
      background: none;
      padding-top: 2px;
    }
  
    .reviews__inner{
      max-width: 1480px;
      margin: 0 auto;
    }
  
    .reviews__viewport{
      overflow: hidden;
      position: relative;
      padding: 0px 0 60px;
      padding-top: 55px !important;
      -webkit-mask-image: none !important;
              mask-image: none !important;
    }
  
    .reviews__viewport::after{
      content: "";
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 100%;
      height: 3px;
      background: #fff;
      pointer-events: none;
      z-index: 3;
    }
  
    .reviews__track{
      display: flex;
      align-items: stretch;
      gap: var(--rv-gap);
      will-change: transform;
    }
  
    /* ‚ú® Modern subtle AI-style card outline */
    .review-card{
      position: relative;
      flex: 0 0 var(--rv-card-w);
      width: var(--rv-card-w);
      min-height: var(--rv-card-h);
      background: linear-gradient(145deg, #ffffff, #fafbfc);
      border: 1px solid rgba(255, 47, 90, 0.15);
      border-radius: 18px;
      box-shadow:
        0 0 0 1px rgba(255, 47, 90, 0.08),
        0 0 12px rgba(255, 47, 90, 0.05),
        var(--rv-shadow);
      padding: 22px 22px 18px;
      display: grid;
      grid-template-rows: auto 1fr auto;
      row-gap: 12px;
      transition:
        transform .25s ease,
        box-shadow .25s ease,
        border .25s ease;
    }
  
    .review-card:hover{
      transform: translateY(-4px);
      border-color: rgba(255, 47, 90, 0.3);
      box-shadow:
        0 0 0 1px rgba(255, 47, 90, 0.2),
        0 0 18px rgba(255, 47, 90, 0.15),
        0 12px 28px rgba(0,0,0,0.06);
    }
  
    /* Optional subtle animated shimmer border (uncomment if you want it) */
    /*
    .review-card::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 18px;
      padding: 1px;
      background: linear-gradient(135deg, rgba(255,47,90,0.3), rgba(255,47,90,0.1), rgba(255,47,90,0.3));
      -webkit-mask: 
        linear-gradient(#fff 0 0) content-box, 
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      animation: shimmer 6s linear infinite;
    }
  
    @keyframes shimmer {
      0% { background-position: 0% 50%; }
      100% { background-position: 200% 50%; }
    }
    */
  
    .review-flag{
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 20px;
      filter: saturate(1.1);
    }
  
    .review-meta{
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
  
    .stars{
      --rating: 4.8;
      position: relative;
      display: inline-block;
      font-size: 20px;
      letter-spacing: 2px;
      user-select:none;
    }
  
    .stars::before{ content: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ"; color:#e5e7eb; }
    .stars::after{
      content: "‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ";
      color:#f59e0b;
      position:absolute;
      left:0;
      top:0;
      width: calc(var(--rating) / 5 * 100%);
      overflow: hidden;
      white-space: nowrap;
    }
  
    .review-text{
      margin: 0;
      color: #0f172a;
      font: 600 15.5px/1.7 system-ui, sans-serif;
    }
  
    .reviewer{
      margin-top: 2px;
      color:#344054;
      font: 800 13.5px/1 system-ui, sans-serif;
    }
  
    @media (prefers-reduced-motion: reduce){
      .reviews__track{ transform: none !important; transition: none !important; }
    }


    /* üö´ Disable ALL horizontal scrolling */
html, body {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100% !important;
  position: relative;
}

/* Ensure internal containers never grow wider than the viewport */
* {
  max-width: 100vw !important;
  box-sizing: border-box;
}

  </style>
  
  

  <script>
    (() => {
      const viewport = document.querySelector('.reviews__viewport');
      const track = document.querySelector('.reviews__track');
      if (!viewport || !track) return;
    
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) return;
    
      // Duplicate items once for a smooth, infinite loop
      const originals = Array.from(track.children);
      originals.forEach(node => track.appendChild(node.cloneNode(true)));
    
      let step = 0;
      let index = 0;
      let gapPx = 0;
    
      const computeStep = () => {
        const first = track.querySelector('.review-card');
        if (!first) return;
        const rect = first.getBoundingClientRect();
        const styles = getComputedStyle(track);
        const rawGap = parseFloat(styles.columnGap || styles.gap || '0') || 0;
        gapPx = rawGap;
        step = rect.width + gapPx;
    
        track.style.transition = 'none';
        track.style.transform = `translateX(${-index * step}px)`;
        requestAnimationFrame(() => track.style.transition = '');
      };
    
      const advance = () => {
        index += 1;
        track.style.transition = 'transform .6s cubic-bezier(.22,.61,.36,1)';
        track.style.transform = `translateX(${-index * step}px)`;
    
        if (index >= originals.length) {
          setTimeout(() => {
            track.style.transition = 'none';
            index = 0;
            track.style.transform = 'translateX(0)';
            requestAnimationFrame(() => track.style.transition = '');
          }, 620);
        }
      };
    
      const ro = new ResizeObserver(computeStep);
      ro.observe(viewport);
      window.addEventListener('load', computeStep, { once:true });
      computeStep();
    
      // Move one card every 3 seconds
      setInterval(advance, 3000);
    
      // Pause transition when scrolled out (optional)
      const io = new IntersectionObserver((entries) => {
        const visible = entries[0].isIntersecting;
        if (!visible) { track.style.transition = 'none'; }
      }, { threshold: 0.05 });
      io.observe(viewport);
    })();
    </script>



<!-- ===== Count Up (KPIs) ===== -->
<section class="kpi" aria-label="Key product stats">

  <div class="kpi__head" style="text-align:center; margin-bottom:22px;">
    <h3 style="font-weight:800; font-size:clamp(22px,3vw,30px); line-height:1.25; color:#111;">
      Thousands already use AI to land jobs ‚Äî
      <span style="color:#FF2F5A;">keep up with your competition.</span>
    </h3>
  </div>

  <div class="kpi__inner">
    <div class="kpi__item">
      <div class="kpi__label">Applications sent</div>
      <div class="kpi__value">
        <span class="countup" data-target="324261" data-locale="es-ES">324.261</span>
      </div>
    </div>

    <div class="kpi__item">
      <div class="kpi__label">Users</div>
      <div class="kpi__value">
        <span class="countup" data-target="4795" data-locale="es-ES">4.795</span>
      </div>
    </div>

    <div class="kpi__item">
      <div class="kpi__label">Pro users who landed an interview</div>
      <div class="kpi__value">
        <span class="countup" data-target="73" data-suffix="%" data-locale="es-ES">81%</span>
      </div>
    </div>
  </div>
</section>


<style>
  :root{
    --kpi-accent:#FF2F5A;
    --kpi-ink:#0b1220;
    --kpi-muted:#667085;
    --kpi-bg:#fff;
  }

  /* Subtle themed background for the whole section */
  .kpi{
    padding: 55px 0 55px; /* same top + bottom now */
    background:
      linear-gradient(115deg,
        rgba(255,47,90,0.06) 0%,
        rgba(255,84,0,0.04) 55%,
        rgba(255,47,90,0.05) 100%);
  }

  .kpi__inner{
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 16px;
    display: grid;
    grid-template-columns: repeat(3, minmax(0,1fr));
    gap: clamp(14px, 3vw, 28px);
  }

  .kpi__item{
    background: var(--kpi-bg);
    border: 1px solid rgba(255,47,90,0.16);
    border-radius: 16px;
    padding: clamp(16px, 2.4vw, 22px);
    box-shadow:
      0 0 0 1px rgba(255,47,90,0.06),
      0 8px 24px rgba(2,8,23,0.06);
  }

  .kpi__label{
    font: 600 13px/1.3 system-ui, sans-serif;
    color: var(--kpi-muted);
    letter-spacing:.02em;
    margin-bottom: 8px;
  }

  .kpi__value{
    font: 800 clamp(24px, 5vw, 44px)/1.1 system-ui, sans-serif;
    color: var(--kpi-ink);
  }

  .kpi__value .countup{
    color: var(--kpi-ink);
  }

  /* Subtle accent bar */
  .kpi__item::after{
    content:"";
    display:block;
    height: 3px;
    width: 42%;
    margin-top: 12px;
    background: linear-gradient(90deg, #FF2F5A, rgba(255,47,90,0.15));
    border-radius: 999px;
  }

  @media (max-width: 840px){
    .kpi__inner{ grid-template-columns: 1fr; }
    .kpi__item::after{ width: 28%; }
  }


  .home-layout {
  display: flex;
  flex-direction: column;
}

/* Default desktop order */
.reviews { order: 1; }
.logos-sec { order: 2; }

/* Mobile: swap them */
@media (max-width: 600px) {
  .reviews { order: 2; }
  .logos-sec { order: 1; }
}

</style>

<script>
(() => {
  const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  const formatNumber = (value, locale = 'es-ES', suffix = '') => {
    const formatted = new Intl.NumberFormat(locale, { maximumFractionDigits: 0 }).format(value);
    return suffix ? formatted + suffix : formatted;
  };

  // Smooth easing
  const easeOutQuint = t => 1 - Math.pow(1 - t, 5);

  // Animate one element from 0 -> target, returns a promise
  const animateCount = (el, target, { duration = 3200, locale = 'es-ES', suffix = '' } = {}) => {
    return new Promise(resolve => {
      if (prefersReduced) {
        el.textContent = formatNumber(target, locale, suffix);
        resolve();
        return;
      }

      const start = 0;
      const startTime = performance.now();

      const tick = now => {
        const p = Math.min(1, (now - startTime) / duration);
        const eased = easeOutQuint(p);
        const current = Math.round(start + (target - start) * eased);
        el.textContent = formatNumber(current, locale, suffix);
        if (p < 1) requestAnimationFrame(tick);
        else resolve();
      };

      requestAnimationFrame(tick);
    });
  };

  const init = () => {
    const section = document.querySelector('.kpi');
    if (!section) return;
    const nodes = Array.from(section.querySelectorAll('.countup'));
    if (!nodes.length) return;

    // Observe the section ONCE so all counters start together
    const io = new IntersectionObserver(async (entries, obs) => {
      if (!entries[0].isIntersecting) return;
      obs.disconnect();

      const DURATION = 3200; // all finish at the same time
      await Promise.all(nodes.map(el => {
        const target = Number(el.getAttribute('data-target') || '0');
        const suffix = el.getAttribute('data-suffix') || '';
        const locale = el.getAttribute('data-locale') || 'es-ES';
        return animateCount(el, target, { duration: DURATION, locale, suffix });
      }));
    }, { threshold: 0.25 });

    io.observe(section);
  };

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init, { once: true });
  } else {
    init();
  }
})();
</script>

<script>
  (function(){
    const today = new Date().toISOString().slice(0,10);
    const saved = JSON.parse(localStorage.getItem('kpi_growth')||'{}');
  
    // BASE
    const baseApps  = 324261;
    const baseUsers = 4795;
  
    // FIND ELEMENTS
    const elApps  = document.querySelector('[data-target="324261"]');
    const elUsers = document.querySelector('[data-target="4795"]');
  
    let apps;
    let users;
  
    if(saved.date === today){
      apps  = saved.apps;
      users = saved.users;
    } else {
      // NEW DAY
      const bumpApps  = Math.floor(Math.random()*1001) + 1000; // 1000‚Äì2000
      const bumpUsers = 10;
  
      apps  = baseApps  + bumpApps;
      users = baseUsers + bumpUsers;
  
      localStorage.setItem('kpi_growth', JSON.stringify({
        date: today,
        apps,
        users
      }));
    }
  
    if(elApps){
      elApps.textContent = apps.toLocaleString('es-ES');
      elApps.setAttribute('data-target', apps);
    }
  
    if(elUsers){
      elUsers.textContent = users.toLocaleString('es-ES');
      elUsers.setAttribute('data-target', users);
    }
  })();
  </script>
  

<noscript>
  <style>.countup{opacity:1 !important}</style>
</noscript>


  {# Tinder cards + AI form section #}
  {% include "base/components/tinder_form.html" %}

  <section class="homepage-blog">
    <div class="homepage-blog__inner">
  
      <h3 class="homepage-blog__title">
        Real stories. Real jobhunters.
      </h3>
  
      <p class="homepage-blog__text">
        Learn how other students land interviews, improve their resumes, and break into top companies ‚Äî read the latest insights on our blog.
      </p>
  
      <a href="{% url 'blog_index' %}" class="homepage-blog__cta">
        Visit the Blog ‚Üí
      </a>
  
    </div>
  </section>
  
  
  <style>
  .homepage-blog{
    margin:120px auto 0;
    padding:64px 20px;
    border-radius:20px;
    background:linear-gradient(90deg, rgba(255,47,90,0.05), rgba(255,47,90,0.12));
    text-align:center;
    font-family:var(--font);
  }
  
  .homepage-blog__inner{
    max-width:760px;
    margin:auto;
  }
  
  .homepage-blog__title{
    font-size:28px;
    font-weight:800;
    margin-bottom:10px;
    color:#111;
  }
  
  .homepage-blog__text{
    font-size:18px;
    line-height:1.6;
    margin-bottom:28px;
    color:#333;
  }
  
  .homepage-blog__cta{
    display:inline-block;
    font-size:17px;
    font-weight:700;
    text-decoration:none;
    padding:14px 28px;
    border-radius:12px;
    background:#FF2F5A;
    color:white;
    transition:opacity .2s ease;
  }
  
  .homepage-blog__cta:hover{
    opacity:.7;
  }
  </style>
  




  <footer class="site-footer">
    <div class="footer__inner">
      <h3>Internstart</h3>
      <p>Helping students and graduates connect with top companies and discover career opportunities.</p>
      
      <nav class="footer__links" aria-label="Footer">
        <a href="{% url 'about' %}">About</a>
        <a href="#">Careers</a>
        <a href="{% url 'blog_index' %}">Blog</a>
        <a href="{% url 'contact' %}">Contact</a>
        <a href="{% url 'privacy_policy' %}">Privacy Policy</a>
      </nav>
  
      <div class="footer__legal">
        ¬© 2025 Internship Platform. All rights reserved.
      </div>
    </div>
  </footer>

  
  <style>
  
    /* Footer */
    .site-footer{ background:#111; color:#bbb; text-align:center; padding:56px 20px; font-family:var(--font); }
    .footer__inner{ max-width:1000px; margin:0 auto; }
    .site-footer h3{ color:#fff; font-weight:600; margin:0 0 16px; }
    .site-footer p{ font-size:16px; line-height:1.6; margin:0 0 24px; color:#cfcfcf; }
    .footer__links a{ color:#bbb; text-decoration:none; margin: 0 14px; }
    .footer__links{ margin-bottom:28px; }
    .footer__legal{ font-size:14px; color:#777; }
  
  
  </style>

<!-- ‚úÖ Bottom-left popup notification -->
<div id="upgradePopup" class="upgrade-popup" hidden>
  <div class="upgrade-popup__content">
    <strong id="upgradeName">Mark upgraded to Pro</strong>
    <p id="upgradeTime">10 minutes ago</p>
    <img id="popupMap" src="" alt="City map" />
  </div>
</div>

<style>
  .upgrade-popup {
    position: fixed;
    bottom: 24px;
    left: 24px;
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    overflow: hidden;
    width: 240px;
    max-width: 90vw;
    font-family: system-ui, sans-serif;
    opacity: 0;
    transform: translateX(-120%);
    transition: transform 0.6s ease, opacity 0.6s ease;
    z-index: 1000;
  }

  .upgrade-popup.visible {
    opacity: 1;
    transform: translateX(0);
  }

  .upgrade-popup.hide {
    opacity: 0;
    transform: translateX(-120%);
  }

  .upgrade-popup__content {
    padding: 16px;
    text-align: left;
  }

  .upgrade-popup__content strong {
    display: block;
    color: #111;
    font-size: 16px;
    margin-bottom: 4px;
  }

  .upgrade-popup__content p {
    color: #666;
    font-size: 14px;
    margin-bottom: 10px;
  }

  .upgrade-popup__content img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 8px;
  }

  @media (max-width: 640px) {
  #upgradePopup {
    display: none !important;
  }
}

</style>

<script>
(() => {
  const popup = document.getElementById('upgradePopup');
  const nameEl = document.getElementById('upgradeName');
  const timeEl = document.getElementById('upgradeTime');
  const img = document.getElementById('popupMap');

  const apiKey = "{{ google_maps_key }}";

  const cities = [

    { name: "Chicago", lat: 41.8781, lon: -87.6298 },
    { name: "Houston", lat: 29.7604, lon: -95.3698 },
    { name: "Phoenix", lat: 33.4484, lon: -112.0740 },
    { name: "Philadelphia", lat: 39.9526, lon: -75.1652 },
    { name: "San Francisco", lat: 37.7749, lon: -122.4194 },
    { name: "Seattle", lat: 47.6062, lon: -122.3321 },
    { name: "Miami", lat: 25.7617, lon: -80.1918 },
    { name: "Boston", lat: 42.3601, lon: -71.0589 }
  ];

  const names = [
    "Olivia","Liam","Emma","Noah","Sophia","James","Ava","Lucas","Isabella","Mason",
    "Mia","Ethan","Charlotte","Henry","Amelia","Alexander","Harper","Benjamin","Evelyn","Elijah",
    "Ella","Michael","Scarlett","Daniel","Aria","Matthew","Luna","Jack","Layla","Owen",
    "Zoe","Sebastian","Nora","Aiden","Hazel","David","Grace","Carter","Chloe","Wyatt"
  ];

  // ‚úÖ Generate random realistic timeframe between 12 minutes and 4 hours
  function randomTimeframe() {
    const minMinutes = 12;
    const maxMinutes = 240; // 4 hours
    const randomMinutes = Math.floor(Math.random() * (maxMinutes - minMinutes + 1)) + minMinutes;

    if (randomMinutes >= 60) {
      const hours = Math.floor(randomMinutes / 60);
      return hours === 1 ? "1 hour ago" : `${hours} hours ago`;
    } else {
      return `${randomMinutes} minutes ago`;
    }
  }

  // ‚úÖ Removed marker parameter
  function mapUrl(lat, lon) {
    return `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lon}&zoom=12&size=300x200&scale=2&maptype=roadmap&key=${apiKey}`;
  }

  const randomItem = arr => arr[Math.floor(Math.random() * arr.length)];

  function setSafeSrc(el, src) {
    const testImg = new Image();
    testImg.onload = () => el.src = src;
    testImg.onerror = () =>
      el.src = "https://upload.wikimedia.org/wikipedia/commons/6/65/No-Image-Placeholder.svg";
    testImg.src = src;
  }

  function showPopup() {
    const city = randomItem(cities);
    const name = randomItem(names);
    const time = randomTimeframe();

    nameEl.textContent = `${name} upgraded to Pro`;
    timeEl.textContent = time;
    setSafeSrc(img, mapUrl(city.lat, city.lon));

    popup.hidden = false;
    popup.classList.remove("hide");
    popup.classList.add("visible");

    // Hide after 4 seconds
    setTimeout(() => {
      popup.classList.remove("visible");
      popup.classList.add("hide");
    }, 4000);
  }

  // ‚úÖ Show first popup after 10s, then one every 10s up to 5 total
  setTimeout(() => {
    let count = 0;
    const maxPopups = 5;
    const popupInterval = setInterval(() => {
      if (count >= maxPopups) {
        clearInterval(popupInterval);
        return;
      }
      showPopup();
      count++;
    }, 10000);

    // Show first immediately at 10s
    showPopup();
    count++;
  }, 10000);
})();
</script>





{% endblock content %}


