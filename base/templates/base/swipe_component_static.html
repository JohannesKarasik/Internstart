{% load static %}

{% block content %}
{% if not partial %}

<main

  class="layout"
  data-user-id="{{ request.user.id|default_if_none:'anon' }}"
  data-first-login="{{ first_login|yesno:'true,false' }}"
  data-email-configured="{{ email_configured|yesno:'true,false' }}"
  data-plan="{{ request.user.subscription_tier|default:'free' }}"
  data-plan-label="{{ request.user.get_subscription_tier_display|default:'Free' }}"
  style="
    position: relative;
    height: 100dvh;
    min-height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    /* default: DARK, overridden in .theme-light below */
    background:
      radial-gradient(1100px 520px at 100% -10%, rgba(237,0,60,.10), transparent 60%),
      linear-gradient(135deg, #0b0f1a 0%, #0e162a 40%, #0b0f1a 100%);
    transition: background 1s ease;
    font-family: 'Inter', sans-serif;
    overflow: hidden;
  "
>

<!-- Full-page loading overlay (5s) -->
<div id="page-loader">
  <div class="page-loader__inner">
    <div class="page-loader__spinner"></div>
    <p class="page-loader__text">Loading your jobs‚Ä¶</p>
  </div>
</div>


<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<input type="hidden" name="csrfmiddlewaretoken" value="{{ csrf_token }}">

  <!-- ===== Collapsible Sidebar ===== -->

  <aside id="sidebar" class="sidebar" aria-label="Primary">
    <div class="sidebar__header">
      <div class="sidebar__brand">
        <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true">
          <defs>
            <linearGradient id="sbG" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0%" stop-color="#ed003c"/>
              <stop offset="100%" stop-color="#ed003c"/>
            </linearGradient>
          </defs>
          <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="none" stroke="url(#sbG)" stroke-width="2" stroke-linejoin="round" stroke-linecap="round"/>
        </svg>

        <button id="showEFSNow" class="btn-secondary"
        style="position:fixed;bottom:14px;left:14px;z-index:9999;
               display:flex;align-items:center;justify-content:center;">
          Show demo
        </button>

        <script>
          document.addEventListener('DOMContentLoaded', () => {
            const btn = document.getElementById('showEFSNow');
            if (!btn) {
              console.log('‚ùå showEFSNow not found in DOM');
              return;
            }
            console.log('‚úÖ showEFSNow found, forcing visible');
            btn.style.display = 'flex';
          });
        </script>

        <span class="logo-chip">
          <img class="sidebar__brand-img" src="{% static 'images/logolog.png' %}" alt="Internstart" loading="lazy">
        </span>
      </div>

      <button id="sidebarToggle" class="sidebar__toggle" aria-controls="sidebar" aria-expanded="true" aria-label="Toggle sidebar">
        <svg class="chev" width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>

    <nav class="sidebar__nav" role="navigation">
      <a class="sbi is-active" href="#" title="Discover">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24"><path d="M3 10l9-7 9 7v9a2 2 0 0 1-2 2h-3v-7H8v7H5a2 2 0 0 1-2-2z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span class="sbi__label">Discover</span>
      </a>

      <a class="sbi" href="#" id="openSaved" title="Saved">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span class="sbi__label">Saved</span>
        <span class="sbi__badge" id="savedBadge">{{ request.user.savedjob_set.count|default:0 }}</span>
      </a>

      <a class="sbi" href="#" title="Applied" style="display: none;">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span class="sbi__label">Applied</span>
      </a>

      <a class="sbi" href="#" title="Messages" style="display: none;">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 24 24"><path d="M21 15a4 4 0 0 1-4 4H8l-5 3V5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span class="sbi__label">Messages</span>
        <span class="sbi__dot" aria-hidden="true"></span>
      </a>

      <div class="sidebar__sep" role="separator" aria-hidden="true"></div>

      <a class="sbi" href="{% url 'update-user' %}" title="Settings">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24"><path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm7.94-3a6.94 6.94 0 0 0-.12-1l2.12-1.65-2-3.46-2.56 1a7.1 7.1 0 0 0-1.7-1L13 2h-2l-.68 2.24a7.1 7.1 0 0 0-1.7 1l-2.56-1-2 3.46L5.5 11a6.94 6.94 0 0 0 0 2l-2.12 1.65 2 3.46 2.56-1a7.1 7.1 0 0 0 1.7 1L11 22h2l.68-2.24a7.1 7.1 0 0 0 1.7-1l2.56 1 2-3.46L19.82 13a6.94 6.94 0 0 0 .12-1z" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </span>
        <span class="sbi__label">Settings</span>
      </a>

      <a class="sbi" href="{% url 'app_logout' %}" title="Logout">
        <span class="sbi__icon" aria-hidden="true">
          <svg width="18" height="18" viewBox="0 0 24 24">
            <path d="M10 17l5-5-5-5M15 12H3M21 19V5a2 2 0 0 0-2-2h-7" 
                  fill="none" stroke="currentColor" stroke-width="2" 
                  stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        <span class="sbi__label">Logout</span>
      </a>
    </nav>

    <div class="sidebar__footer">
      <div class="sidebar__plan">
        <span class="plan-dot" aria-hidden="true"></span>
        <span class="plan-text">{{ request.user.subscription_tier|default:'free'|title }}</span>
      </div>
      <button class="sidebar__upgrade" type="button" id="openPremium">Get more swipes</button>
    </div>

  </aside>
  <div id="sidebarBackdrop" class="sidebar-backdrop" hidden></div>
  <!-- ===== /Sidebar ===== -->

  <!-- ===== Header ===== -->

  <header class="custom-header">
    <div class="header-left">
      <!-- Theme switch -->
      <button id="themeToggle" class="theme-toggle desktop-only" aria-label="Toggle light mode" aria-pressed="false" title="Toggle light / dark">
        <span class="tt-knob"></span>
        <svg class="tt-sun" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z"/></svg>
        <svg class="tt-moon" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M21 12.79A9 9 0 1 1 11.21 3a7 7 0 1 0 9.79 9.79Z"/></svg>
      </button>

      <!-- Mobile: Get more swipes -->
      <button class="mobile-premium-btn mobile-only" id="openPremiumMobile">
        Get more swipes
      </button>
    </div>

    <a class="header__account" href="{% url 'update-user' %}" aria-label="Account">
      <svg xmlns="http://.w3.org/2000/svg" width="18" height="18" fill="none" viewBox="0 0 24 24" aria-hidden="true">
        <path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
          d="M20 21a8 8 0 1 0-16 0M12 11a4 4 0 1 0 0-8 4 4 4 0 0 0 0 8Z"/>
      </svg>
    </a>

  </header>

  <!-- ===== Background FX ===== -->

  <div class="bgFX" aria-hidden="true">
    <div class="bgFX__grid"></div>
    <div class="bgFX__beam b1"></div>
    <div class="bgFX__beam b2"></div>
    <div class="bgFX__orb o1"></div>
    <div class="bgFX__orb o2"></div>
    <div class="bgFX__orb o3"></div>
  </div>

<!-- ===== HUD ===== -->

<div class="hud hud--balanced">
  <div class="hud__left">
    <!-- Streak -->
    <div class="hud__streak">üî• Streak <span id="streakVal">0</span></div>
    <div class="hud__combo" id="comboBadge" aria-live="polite"></div>
  </div>

  <!-- new compact mobile HUD -->

  <div class="hud-mobile">
    <div class="hud-mobile__swipes">
      <span id="swipesLeftMobile">{{ swipes_left }}</span> left
    </div>
    <div class="hud-mobile__applied">
      <span id="appliedCountMobile">0</span> applied
    </div>
  </div>

  <div class="hud__right" title="Cards remaining / applied">
    <!-- Swipes left -->
    <div class="swipes-widget" id="swipesWidget" aria-live="polite" role="status">
      <div class="swipes-widget__icon" aria-hidden="true">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
          <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        </svg>
      </div>
      <div class="swipes-widget__text">
        <span id="swipesLeft">{{ swipes_left }}</span>
        <small>Swipes left</small>
      </div>
    </div>

    <!-- Applied -->
    <div class="applied-widget" id="appliedWidget" aria-live="polite" role="status">
      <div class="applied-widget__icon" aria-hidden="true">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
          <path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="applied-widget__text">
        <span id="appliedCount">0</span>
        <small>Applied</small>
      </div>
    </div>

    <!-- Deck progress -->
    <div class="ring" role="img" style="display: none;" aria-label="Deck progress">
      <svg viewBox="0 0 36 36">
        <path class="ring-track" d="M18 2 a16 16 0 0 1 0 32 a16 16 0 0 1 0 -32"/>
        <path class="ring-bar" id="ringBar" d="M18 2 a16 16 0 0 1 0 32 a16 16 0 0 1 0 -32"/>
      </svg>
      <div class="ring__label" style="display: none;"><span id="cardsLeft">0</span></div>
    </div>

  </div>
</div>
<!-- ===== /HUD ===== -->

  <!-- Hidden topics -->

  <div class="topics" style="display:none;"></div>

  <!-- Premium upsell modal -->

<!-- Premium upsell modal -->

<!-- Premium upsell modal -->

<!-- Load the font -->

<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  html, body { margin:0; padding:0; height:100%; overflow:hidden; overscroll-behavior:none; background:#0b0f1a; }

  /* ===== Simple full-page loading overlay (5s) ===== */
  #page-loader {
    position: fixed;
    inset: 0;
    background:
      radial-gradient(circle at 20% 0%, rgba(237,0,60,0.22), transparent 60%),
      #020617;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    transition: opacity 0.4s ease;
  }

  #page-loader.hidden {
    opacity: 0;
    pointer-events: none;
  }

  .page-loader__inner {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 20px 24px;
    border-radius: 16px;
    background: rgba(15,23,42,0.92);
    border: 1px solid rgba(148,163,184,0.4);
    box-shadow: 0 18px 42px rgba(0,0,0,0.7);
    font-family: 'Manrope', sans-serif;
    color: #e5e7eb;
  }

  .page-loader__spinner {
    width: 36px;
    height: 36px;
    border-radius: 999px;
    border: 3px solid rgba(148,163,184,0.5);
    border-top-color: #FF2F5A;
    animation: loaderSpin 0.8s linear infinite;
  }

  .page-loader__text {
    font-size: 14px;
    font-weight: 600;
  }

  @keyframes loaderSpin {
    to { transform: rotate(360deg); }
  }

  /* Keep borders visible on hover & avoid clipping */
  #noSwipesModal .modal__plans { overflow: visible !important; }
  #noSwipesModal .plan-card { position: relative; z-index: 1; }
  #noSwipesModal .plan-card:hover { z-index: 3; }
</style>

{% include "base/components/no_swipes_modal.html" %}

<style>
  /* Keep borders visible on hover & avoid clipping */
  #noSwipesModal .modal__plans { overflow: visible !important; }
  #noSwipesModal .plan-card { position: relative; z-index: 1; }
  #noSwipesModal .plan-card:hover { z-index: 3; }

  #noSwipesModal,
  #noSwipesModal h2,
  #noSwipesModal p,
  #noSwipesModal button {
    font-family: 'Manrope', sans-serif !important;
  }

  /* üì± Mobile only: stack plans vertically */
  @media (max-width: 768px) {
    #noSwipesModal .modal__plans {
      flex-direction: column !important;
      justify-content: flex-start !important;
      align-items: stretch !important;
    }
    #noSwipesModal .plan-card {
      width: 100% !important;
      flex: none !important;
    }
  }
</style>

<!-- (Stripe scripts removed in staging) -->

<style>
  #noSwipesModal,
  #noSwipesModal h2,
  #noSwipesModal p,
  #noSwipesModal button {
    font-family: 'Manrope', sans-serif !important;
  }
</style>

<script>

  
  // (checkout + quota logic removed for staging)
  
</script>

</div>

<div class="swipe-container" id="swipeDeck" style="opacity:0; pointer-events:none;">
  <div class="swipe-card is-top" id="swipeCard" data-room-id="{{ first_room.id|default:'demo' }}">
    <div class="card-inner">
      <!-- FRONT -->
      <div class="card-front">
        <div class="logo-frame">
          <img class="company-logo" id="cLogo" src="https://logo.clearbit.com/{{ first_room.logo_domain|default:'openai.com' }}" alt="" loading="lazy">
        </div>

        <div class="title-block">
          <h4 id="cCompany">{{ first_room.company|default:'OpenAI' }}</h4>
          <h3 id="cTitle">{{ first_room.title|default:'Software Engineer' }}</h3>
          <h2 id="cRole">{{ first_room.role|default:'Intern' }}</h2>
          <p class="meta"><span class="dot"></span> <span id="cLoc">{{ request.user.city|default:"Your city" }}</span></p>
        </div>

        <div class="info-badges" id="cBadges"></div>

        <div class="card-cta">
          <button class="swipe-btn swipe-left"  aria-label="Skip"><span class="btn-ripple"></span>‚úï</button>
          <button class="swipe-btn swipe-right" aria-label="Apply"><span class="btn-ripple"></span>‚úì</button>
        </div>

        <div class="stamp stamp--apply">APPLY</div>
        <div class="stamp stamp--dismiss">SKIP</div>
      </div>

      <!-- BACK -->
      <!-- BACK -->
      <div class="card-back">
        <h3 id="bCompany">{{ first_room.company|default:'OpenAI' }}</h3>
        <h4 id="bRole">{{ first_room.role|default:'Intern' }}</h4>
        <p class="location">
          üìç <span id="bLoc">{{ first_room.location|default:'Copenhagen, DK' }}</span>
        </p>

        <div class="divider"></div>

        <!-- Main description (longer text from AI) -->
        <p class="desc" id="bDesc">
          {{ first_room.desc|default:'AI generated example job. Upgrade to unlock real listings.' }}
        </p>

        <!-- Compensation block (filled by JS; hidden if no data) -->
        <div class="compensation" id="bCompWrap" style="margin-top:10px; display:none;">
          <p class="comp-line">
            üí∞ <span id="bCompType">Compensation</span>:
            <span id="bCompValue">N/A</span>
          </p>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- üîπ New explainer: shows every time page loads -->

<div id="swipeHint" class="swipe-hint">
  <span class="swipe-hint__icon">‚úì</span>
  <span class="swipe-hint__text">Swipe right to apply</span>
  <button type="button" class="swipe-hint__next">Next</button>
</div>

<div id="loadMoreSentinel" style="height:1px;"></div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<div id="onboarding-overlay" 
style="position:fixed; inset:0; background:rgba(2,6,23,0.6); display:none; align-items:center; justify-content:center; z-index:10000; font-family:'Manrope', sans-serif !important;">

 <div id="onboarding-dialog" role="dialog" aria-modal="true" aria-labelledby="onb-title" aria-describedby="onb-desc" 
      style="position:relative; margin:auto; max-width:380px; width:calc(100% - 32px); background:#0f1525; border-radius:14px; box-shadow:0 20px 50px rgba(0,0,0,0.45); padding:20px; border:1px solid rgba(148,163,184,.15); color:#e6eef8; font-family:'Manrope', sans-serif !important; left:0; right:0;">

   <!-- Step info -->

   <div style="font-size:12px; color:#94a3b8; margin-bottom:6px; display: none;">Step <span id="onb-step" style="display: none;">1</span> of <span id="onb-total">3</span></div>

   <!-- Title + desc -->

   <h3 id="onb-title" style="margin:0 0 8px; font-size:19px; color:#fff; font-weight:700;">Welcome!</h3>
   <p id="onb-desc" style="margin:0 0 16px; font-size:14px; color:#cbd5e1;">
     Let‚Äôs get started by connecting your email so applications can be sent directly.
   </p>

   <!-- Guide box -->

   <div style="padding:14px 16px; margin-bottom:14px; border-radius:10px; background:linear-gradient(145deg, rgba(45,55,72,.6), rgba(26,32,44,.9)); border:1px solid rgba(99,102,241,.25); font-size:13px; line-height:1.55; color:#e6eaf2; text-align:left;">
    <div style="font-weight:600; color:#f8fafc; margin-bottom:6px; font-size:14px;">Connect your Gmail to send applications</div>
    <p style="margin:0 0 8px 0;">
      To send your applications directly to employers, you need to connect your Gmail account. This allows Internstart to send your cover letter and resume on your behalf when you apply for a position.
    </p>
    <p style="margin:0 0 8px 0;">
      You can revoke this access at any time by going to <strong>Settings ‚Üí Access ‚Üí Revoke Gmail Access</strong> in your Google Account. Once revoked, Internstart will no longer be able to send emails from your account.
    </p>
    <p style="margin:0;">
      We only use this connection to send your job application emails. Internstart does <strong>not</strong> have access to read, view, or manage your Gmail inbox or messages.
    </p>
  </div>

   <!-- Action buttons -->

   <div style="display:flex; gap:8px; justify-content:flex-end;">
     <button id="onb-prev" type="button" style="display:none; padding:6px 10px; font-size:13px; background:#0b1220; color:#e6eef8; border:1px solid rgba(148,163,184,.28); border-radius:6px;">Back</button>
     <button id="onb-next" type="button" style="padding:6px 12px; font-size:13px; background:#1b2337; color:#fff; border:1px solid rgba(148,163,184,.28); border-radius:6px; display: none;">Okay</button>
     <a id="onb-primary-link" href="{% url 'start_gmail_auth' %}" 
        style="padding:6px 12px; font-size:13px; background:#ed003c; color:#fff; border-radius:6px; text-decoration:none; font-weight:600;">
        Configure email
     </a>
   </div>
 </div>
</div>

  <div id="savedList" style="display:none; width:min(440px, 92vw);"></div>

  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap" rel="stylesheet">

<!-- Mobile trigger (optional) -->


<!-- ===== Onboarding overlay ===== -->

<div id="ifOnb" hidden>
  <div class="ifOnb__backdrop" data-onb-close></div>

  <!-- Floating ‚Äúspotlight‚Äù & tooltip that point to real UI -->

  <div class="ifOnb__spot" id="ifOnbSpot"></div>
  <div class="ifOnb__tooltip" id="ifOnbTip">
    <div class="ifOnb__tipTitle" id="ifOnbTipTitle">Dismiss</div>
    <div class="ifOnb__tipText"  id="ifOnbTipText">Swipe left or tap the X to skip and keep browsing.</div>
  </div>

  <!-- add -->

  <div class="ifOnb__leader" id="ifOnbLeader" aria-hidden="true"></div>

  <!-- Mini demo card (we animate this so we don‚Äôt touch real data) -->

  <div class="ifOnb__demoCard" id="ifOnbDemo" aria-hidden="true">
    <div class="ifOnb__demoStamp" id="ifOnbDemoStamp">SKIP</div>
  </div>
</div>

<!-- after -->

<div id="emailConnectedToast" 
     style="
       position: fixed;
       top: 20px;
       left: 50%;
       transform: translateX(-50%);
       background-color: #4CAF50;
       color: white;
       padding: 12px 24px;
       border-radius: 8px;
       font-size: 16px;
       font-weight: 500;
       box-shadow: 0 4px 10px rgba(0,0,0,0.2);
       opacity: 0;
       transition: opacity 0.4s ease, transform 0.4s ease;
       z-index: 99999;
     ">
  Your email was connected
</div>

<!-- ============================
     FULL ONBOARDING TOOLTIP UI
============================= -->

<div id="ifOnb" hidden></div>

<div id="ifOnbSpot" class="ifOnb__spotlight"></div>

<div id="ifOnbTip" class="ifOnb__tooltip">
  <div id="ifOnbTipTitle" class="ifOnb__title">Title</div>
  <div id="ifOnbTipText" class="ifOnb__text">Text</div>

  <!-- Buttons will be injected here by JS -->

</div>

<div id="ifOnbDemo" class="ifOnb__demo" style="display:none;">
  <div id="ifOnbDemoStamp" class="ifOnb__stamp"></div>
</div>

  <style>


@import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700;800&display=swap');

    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; height:100%; overflow:hidden; overscroll-behavior:none; background:#0b0f1a; }
  
    /* Brand + theme tokens (default: DARK) */
    :root{
      --brand: #ed003c;
      --brand-50: rgba(237,0,60,.08);
      --brand-100: rgba(237,0,60,.18);
      --brand-200: rgba(237,0,60,.28);
      --brand-400: #ff4f7a;
      --brand-600: #c0002f;
  
      --bg: #0b0f1a;
      --panel: #0f1525;
      --ink: #e6eef8;
      --ink-600:#b8c2d3;
      --ink-500:#94a3b8;
      --border: rgba(148,163,184,.22);
      --border-subtle: rgba(148,163,184,.12);
  
      --card: #ffffff;
  
      --elev-1: 0 10px 26px rgba(2,6,23,.35);
      --elev-2: 0 18px 48px rgba(2,6,23,.55);
  
      --sb-w: 264px;
      --sb-cw: 64px;
      --sb-pad: 14px;
  
      /* shared container width so header + HUD align perfectly */
      --chrome-w: 1200px;
      --chrome-pad: clamp(8px, 3vw, 24px);
    }
  
    /* Animateable custom property for conic gradient angle */
    @property --aiAngle {
      syntax: '<angle>';
      initial-value: 0deg;
      inherits: false;
    }
  
    /* === Modal base === */
    .modal {
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      z-index:10000;
    }
    .modal.show{display:flex;}
    .modal__backdrop{
      position:absolute;inset:0;
      background:rgba(2,6,23,.75);
      backdrop-filter:blur(10px);
    }
    .modal__dialog{
      position:relative;
      max-width:1100px;                /* wider */
      width:calc(100% - 40px);
      background:var(--panel);
      border-radius:24px;              /* more rounded */
      border:1px solid var(--border);
      box-shadow:0 40px 80px rgba(0,0,0,.6);
      padding:40px;                    /* bigger padding */
      z-index:1;
      color:var(--ink);
    }
    .theme-light .modal__dialog{
      background:#f6f8fb;color:#0e1320;border-color:rgba(15,23,42,.12);
    }
    .modal__close{
      position:absolute;top:20px;right:20px;
      background:none;border:0;font-size:28px;
      color:var(--ink);cursor:pointer;
    }
    .theme-light .modal__close{color:#0e1320;}
    .modal__content h2{
      margin:0 0 12px;
      font:800 28px/1.3 Inter;          /* larger */
      text-align:center;
    }
    .modal__content p{
      margin:0 0 30px;
      font:500 16px/1.6 Inter;
      color:var(--ink-500);
      text-align:center;
    }
    .theme-light .modal__content p{ color:#4a5a75; }
    .modal__actions{
      display:flex;gap:12px;justify-content:flex-end;flex-wrap:wrap;
    }
    .btn-primary,.btn-secondary{
      padding:12px 18px;
      border-radius:14px;
      font:700 15px/1 Inter;
      cursor:pointer;
      text-decoration:none;
      display:inline-block;
    }
    .btn-primary{background:var(--brand);color:#fff;border:0;}
    .btn-secondary{
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      color:var(--ink);
    }
    .theme-light .btn-secondary{background:rgba(2,6,23,.04);color:#0e1320;border-color:rgba(15,23,42,.12);}
  
    /* === Premium Plans === */
    .premium-dialog{max-width:1100px;width:calc(100% - 40px);}
    .premium-title{margin:0 0 10px;font:800 28px/1.3 Inter;text-align:center;}
    .premium-sub{margin:0 0 30px;font:500 16px/1.6 Inter;color:var(--ink-500);text-align:center;}
    .theme-light .premium-sub{color:#51607a;}
    .plans{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
      gap:24px;                         /* more gap */
    }
    .plan-card{
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:20px;
      padding:28px;                     /* more padding */
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      box-shadow:0 14px 34px rgba(0,0,0,.25);
      transition:transform .2s ease,box-shadow .2s ease;
      min-height:340px;                 /* taller card */
    }
    .plan-card:hover{transform:translateY(-4px);box-shadow:0 18px 44px rgba(0,0,0,.4);}
    .plan-head{
      display:flex;flex-direction:column;align-items:flex-start;
      gap:6px;margin-bottom:18px;
    }
    .plan-head h3{margin:0;font:700 20px Inter;color:var(--ink);}
    .price{font:800 26px/1 Inter;color:var(--brand);}
    .price span{font-size:14px;font-weight:500;color:var(--ink-500);}
    .plan-card ul{
      list-style:none;
      padding:0;
      margin:0 0 20px 0;
      font:500 14px/1.7 Inter;
      color:var(--ink-600);
    }
    .plan-card ul li{margin:6px 0;}
    .plan-popular{
      border-color:var(--brand);
      box-shadow:0 20px 48px rgba(237,0,60,.25);
    }
    .badge-popular{
      align-self:flex-start;
      background:var(--brand);color:#fff;
      font:700 12px/1 Inter;text-transform:uppercase;
      padding:4px 8px;border-radius:8px;margin-top:-4px;
    }
    .btn-primary.w-full{display:block;width:100%;text-align:center;}
    .theme-light .plan-card{
      background:#f6f8fb;
      border-color:rgba(15,23,42,.12);
      box-shadow:0 14px 28px rgba(15,23,42,.07);
    }
  
    /* ===== LIGHT THEME ‚Äî toned down whites, higher legibility ===== */
    .theme-light{
      --bg: #e9edf3;
      --panel: #f4f6fa;
      --ink: #0e1320;
      --ink-600:#33425a;
      --ink-500:#51607a;
  
      --border: rgba(15,23,42,.12);
      --border-subtle: rgba(15,23,42,.06);
  
      --elev-1: 0 8px 20px rgba(15,23,42,.07);
      --elev-2: 0 18px 34px rgba(15,23,42,.10);
    }
    .theme-light html, .theme-light body{ background:#e9edf3; }
    .theme-light .layout{
      background:
        radial-gradient(900px 420px at 100% -10%, rgba(237,0,60,.04), transparent 60%),
        linear-gradient(135deg, #f2f4f8 0%, #e9edf3 50%, #f2f4f8 100%) !important;
    }
  
    /* Hide base headers */
    body > header:not(.custom-header),
    .site-header, .global-header, nav.site-nav { display:none !important; }
  
    /* ===== Sidebar ===== */
    .sidebar{
      position:fixed; inset:0 auto 0 0;
      height:100dvh; width:var(--sb-w);
      padding:12px var(--sb-pad);
      display:flex; flex-direction:column;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border-right:1px solid var(--border);
      box-shadow: var(--elev-1);
      backdrop-filter: blur(12px);
      z-index:5;
      transform: translateX(calc(-100% + var(--sb-cw)));
      transition: transform .35s cubic-bezier(.22,1,.36,1), background .2s ease, border-color .2s ease, box-shadow .2s ease;
    }
    .theme-light .sidebar{
      background: linear-gradient(180deg, rgba(0,0,0,.018), rgba(0,0,0,.012));
      border-right:1px solid rgba(15,23,42,.10);
      box-shadow: var(--elev-1);
    }
  
    .sidebar.is-open{ transform: translateX(0); }
  
    .sidebar__header{ display:flex; align-items:center; justify-content:space-between; gap:8px; margin-bottom:10px; }
    .sidebar__brand{ display:flex; align-items:center; gap:10px; color:var(--ink); font-weight:800; }
  
    /* === Low-key animated brand chip === */

  
    .swipes-widget{
      display:flex; align-items:center; gap:10px;
      background:rgba(255,255,255,.06); border:1px solid var(--border);
      padding:8px 12px; border-radius:12px; color:var(--ink);
      backdrop-filter: blur(6px); user-select:none;
    }
    .theme-light .swipes-widget{ background:rgba(2,6,23,.04); border-color:rgba(15,23,42,.10); }
  
    .swipes-widget__icon{ display:grid; place-items:center; width:20px; height:20px; color:var(--brand); }
    .swipes-widget__text span{ font-size:16px; font-weight:800; }
    .swipes-widget__text small{ display:block; font-size:11px; font-weight:600; opacity:.75; }
  
    .theme-light .logo-chip{
      background:
        linear-gradient(#f6f8fb, #f6f8fb) padding-box,
        conic-gradient(from var(--aiAngle),
          rgba(237,0,60,.14) 0deg,
          rgba(237,0,60,.04) 60deg,
          rgba(237,0,60,.14) 360deg) border-box;
      box-shadow: 0 1px 4px rgba(2,6,23,.07);
    }
    .logo-chip:hover{ box-shadow: 0 2px 10px rgba(2,6,23,.12); }
    .sidebar__brand-img{ height:26px; display:block; border-radius:8px; filter: drop-shadow(0 1px 3px rgba(0,0,0,.2)); }
  
    .sidebar__toggle{
      display:grid; place-items:center;
      width:32px; height:32px; border-radius:999px; border:1px solid var(--border);
      background:rgba(255,255,255,.06); color:var(--ink); cursor:pointer;
      transition: transform .25s ease, background .2s ease;
    }
    .sidebar__toggle:hover{ background:rgba(255,255,255,.12); transform: translateX(0) scale(1.02); }
    .theme-light .sidebar__toggle{ background:#f4f6fa; border-color:rgba(15,23,42,.10); }
    .sidebar__toggle .chev{ transition: transform .25s ease; }
    .sidebar__toggle.rot .chev{ transform: rotate(180deg); }
  
    .sidebar__nav{
      flex:1; overflow:auto; padding:6px 0;
      mask-image: linear-gradient(to bottom, rgba(0,0,0,.96), rgba(0,0,0,.96) 90%, transparent);
    }
    .sidebar__sep{ height:1px; background:var(--border-subtle); margin:10px 0; }
  
    .sbi{
      position:relative; display:flex; align-items:center; gap:12px;
      color:#cbd5e1; text-decoration:none; padding:10px 10px; border-radius:10px; margin:2px 0;
      transition: background .2s ease, color .2s ease, border-color .2s ease, box-shadow .2s ease;
      border: 1px solid transparent;
    }
    .sbi:hover{ background:rgba(255,255,255,.07); color:#fff; }
    .sbi.is-active{
      background:linear-gradient(180deg, rgba(237,0,60,.20), rgba(237,0,60,.10));
      color:#fff; border:1px solid var(--border);
    }
    .theme-light .sbi{ color:#3b485e; }
    .theme-light .sbi:hover{ background:rgba(2,6,23,.035); color:#0e1320; box-shadow: none; }
    .theme-light .sbi.is-active{
      background:linear-gradient(180deg, rgba(237,0,60,.09), rgba(237,0,60,.05));
      color:#0e1320; border-color:rgba(15,23,42,.12);
    }
    .sbi__icon{ width:22px; height:22px; display:grid; place-items:center; color:#ffd6de; opacity:.95; flex:0 0 auto; }
    .theme-light .sbi__icon{ color:#ed003c; opacity:.85; }
    .sbi__label{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-weight:700; font-size:13px; }
    .sbi__badge{
      margin-left:auto; font-size:11px; font-weight:800; color:#0b0f1a; background:#ffd6de;
      border-radius:999px; padding:2px 8px;
    }
  
    /* Collapsed rail ‚Äî only show the arrow handle */
    .sidebar:not(.is-open){
      padding:12px 10px 12px 0;
    }
    .sidebar:not(.is-open) .sidebar__brand,
    .sidebar:not(.is-open) .sidebar__nav,
    .sidebar:not(.is-open) .sidebar__footer{ display:none; }
    .sidebar:not(.is-open) .sidebar__toggle{ margin-left:auto; }
  
    /* Sidebar footer */
    .sidebar__footer{ padding-top:8px; display:flex; align-items:center; gap:10px; justify-content:space-between; }
    .sidebar__plan{ display:flex; align-items:center; gap:8px; color:var(--ink); font-weight:800; }
    .plan-dot{ width:8px; height:8px; border-radius:999px; background:linear-gradient(135deg,var(--brand),var(--brand-400)); }
    .sidebar__upgrade{
      padding:8px 10px; border-radius:10px; border:1px solid var(--border);
      background:linear-gradient(135deg, rgba(237,0,60,.14), rgba(237,0,60,.10));
      color:#fff; font-weight:800; cursor:pointer;
    }
    .theme-light .sidebar__upgrade{
      background:linear-gradient(135deg, rgba(237,0,60,.07), rgba(237,0,60,.045));
      color:#0e1320; border-color:rgba(15,23,42,.12);
    }
  
    /* Backdrop (mobile) */
    .sidebar-backdrop{
      position:fixed; inset:0; background:rgba(2,6,23,.48);
      opacity:0; pointer-events:none; transition:.25s ease; z-index:4;
    }
    .sidebar-backdrop.show{ opacity:1; pointer-events:auto; }
  
    /* ===== Header ===== */
    .custom-header{
      position:fixed;
      top: 12px;;                           /* sit at the very top */
      background:transparent;                                /* slightly down from the very top */
      left:50%; transform:translateX(-50%);
      width:min(var(--chrome-w), 96vw);            /* == HUD width */
      padding:0 var(--chrome-pad);
      display:flex; align-items:center; justify-content:space-between;
      z-index:6;                                   /* stays above HUD; no overlap */
      background: transparent;
    }
    .header-left{ display:flex; align-items:center; gap:10px; }
  
    /* Theme toggle UI */
    .theme-toggle{
      position:relative; width:56px; height:30px; border-radius:999px; border:1px solid var(--border);
      background:rgba(255,255,255,.08); color:#fff; cursor:pointer;
      display:inline-block;
    }
    .theme-toggle .tt-knob{
      position:absolute; top:50%; left:3px; transform:translateY(-50%);
      width:24px; height:24px; border-radius:999px; background:#ffffff; box-shadow:0 2px 8px rgba(0,0,0,.25);
      transition:left .22s ease, background .2s ease;
    }
    .theme-toggle .tt-sun, .theme-toggle .tt-moon{
      position:absolute; top:50%; transform:translateY(-50%); width:16px; height:16px;
    }
    .tt-sun{ left:8px; color:#ffd34d; }
    .tt-moon{ right:8px; color:#93a4bd; }
    .theme-light .theme-toggle{ background:#e6ebf2; border-color:rgba(15,23,42,.12); }
    .theme-light .theme-toggle .tt-knob{ left:29px; background:#0b0f1a; }
    .theme-light .tt-sun{ color:#f2b650; }
    .theme-light .tt-moon{ color:#6a7a94; }
  
    .header__account{
      display:inline-flex; align-items:center; gap:8px; color: var(--ink);
      text-decoration:none; padding:8px 10px; border-radius:10px;
    }
    .header__account:hover{ background: rgba(255,255,255,.08); }
    .theme-light .header__account:hover{ background: rgba(2,6,23,.05); }
  
    /* Accessibility helper */
    .sr-only{
      position:absolute !important;
      width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;
    }
  
    /* ===== Background FX ===== */
    .bgFX{ position:absolute; inset:0; overflow:hidden; z-index:0; pointer-events:none; }
    .bgFX__grid{
      position:absolute; inset:-2px;
      background:
        radial-gradient(420px 200px at 20% 10%, rgba(237,0,60,.09), transparent 60%),
        repeating-linear-gradient(90deg, rgba(255,255,255,.04) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(0deg,  rgba(255,255,255,.035) 0 1px, transparent 1px 80px);
      opacity:.8;
      mask-image: radial-gradient(80% 60% at 50% 40%, black 60%, transparent 100%);
    }
    .theme-light .bgFX__grid{
      background:
        radial-gradient(420px 200px at 20% 10%, rgba(237,0,60,.03), transparent 60%),
        repeating-linear-gradient(90deg, rgba(2,6,23,.055) 0 1px, transparent 1px 80px),
        repeating-linear-gradient(0deg,  rgba(2,6,23,.035) 0 1px, transparent 1px 80px);
    }
    .bgFX__beam{ position:absolute; width:40%; height:160%; background: linear-gradient(180deg, rgba(237,0,60,.26), rgba(237,0,60,.10)); filter: blur(22px); transform: rotate(20deg); animation: floatY 14s ease-in-out infinite; opacity:.24; }
    .theme-light .bgFX__beam{ opacity:.12; }
    .bgFX__beam.b1{ left:-10%; top:-20%; }
    .bgFX__beam.b2{ right:-15%; top:-30%; transform: rotate(-18deg); animation-delay: 4s; }
    .bgFX__orb{ position:absolute; width:320px; height:320px; border-radius:999px; background: radial-gradient(circle at 30% 30%, rgba(237,0,60,.22), rgba(237,0,60,.12) 60%, transparent 70%); filter: blur(20px); animation: drift 18s ease-in-out infinite alternate; }
    .theme-light .bgFX__orb{ background: radial-gradient(circle at 30% 30%, rgba(237,0,60,.10), rgba(237,0,60,.05) 60%, transparent 70%); }
    .bgFX__orb.o1{ left:5%; top:8%; }
    .bgFX__orb.o2{ right:6%; bottom:10%; animation-delay: 5s; }
    .bgFX__orb.o3{ left:30%; bottom:-4%; width:260px; height:260px; animation-delay: 9s; }
    @keyframes floatY { 0%,100%{ transform: translateY(-4%) rotate(20deg) } 50%{ transform: translateY(4%) rotate(20deg) } }
    @keyframes drift { 0%{ transform: translate(0,0) } 100%{ transform: translate(6%, -4%) } }
  
    /* ===== HUD ===== */
    /* sits on its own row under the header; aligned width + comfy spacing */
    .hud{
      position:fixed;
      top:56px;                                 /* below header; no overlap; consistent gap from card */
      left:50%; transform:translateX(-50%);
      width:min(var(--chrome-w), 96vw);
      padding:0 var(--chrome-pad);
      display:flex; align-items:center; justify-content:space-between;
      z-index:3;
      color:var(--ink); font-weight:700;
      pointer-events:none;                      /* HUD floats; children re-enable pointer */
    }
    .hud > * { pointer-events:auto; }
  
    .hud__left,
    .hud__right{
      display:flex; align-items:center;
      gap:16px;                                 /* unified inner spacing */
    }
    .hud__right{ gap:20px; }                    /* a touch more gap on the right cluster */
  
    .hud__streak{
      background:rgba(255,255,255,.06);
      border:1px solid var(--border);
      padding:8px 12px;
      border-radius:999px;
      backdrop-filter: blur(6px);
    }
    .theme-light .hud__streak{ background:rgba(2,6,23,.045); border-color: rgba(15,23,42,.12); }
  
    .hud__combo{ opacity:0; transform:translateY(-6px); transition:.25s ease; color:#fff; font-weight:800; }
    .theme-light .hud__combo{ color:#0e1320; }
    .hud__combo.is-active{ opacity:1; transform:translateY(0); }
  
    /* progress ring */
    .ring{ position:relative; width:46px; height:46px; flex:0 0 auto; }
    .ring svg{ width:100%; height:100%; transform:rotate(-90deg); }
    .ring-track{ fill:none; stroke:rgba(255,255,255,.16); stroke-width:4; }
    .theme-light .ring-track{ stroke:rgba(2,6,23,.12); }
    .ring-bar{ fill:none; stroke:var(--brand); stroke-width:4; stroke-linecap:round; transition:stroke-dashoffset .25s ease; }
    .ring__label{ position:absolute; inset:0; display:grid; place-items:center; font-size:12px; font-weight:800; color:var(--ink); }
  
    /* chips */
    .swipes-widget,
    .applied-widget{
      position:relative; display:flex; align-items:center; gap:10px;
      background:rgba(255,255,255,.06); border:1px solid var(--border);
      padding:8px 12px; border-radius:12px; color:var(--ink); backdrop-filter: blur(6px); user-select:none;
      box-shadow:none;
      min-height:40px;                           /* consistent touch size */
    }
    .theme-light .swipes-widget,
    .theme-light .applied-widget{ background:rgba(2,6,23,.045); border-color:rgba(15,23,42,.12); }
  
    /* Responsive HUD layout */
    @media (max-width: 820px){
      .custom-header{ width:min(var(--chrome-w), 96vw); padding:0 12px; }
      .hud{
        top:54px;
        width:min(var(--chrome-w), 96vw);
        padding:0 12px;
        flex-wrap:wrap;
        row-gap:10px;
      }
      .hud__left{ order:1; width:100%; justify-content:flex-start; }
      .hud__right{ order:2; width:100%; justify-content:flex-end; gap:12px; }
    }
  
    /* ===== Cards ===== */
    .swipe-container{
      position: relative;
      width: min(440px, 92vw);
      height: min(640px, calc(100dvh - 220px));
      perspective: 1400px;
      z-index:1;
    }
  
    /* Accent vars per card color */
    .swipe-card { --accent:#ed003c; --accent-soft:rgba(237,0,60,.16); --accent-glow:rgba(237,0,60,.14); }
    .swipe-card.card-color-blue   { --accent:#2ea7ff; --accent-soft:rgba(46,167,255,.16); --accent-glow:rgba(46,167,255,.14); }
    .swipe-card.card-color-yellow { --accent:#ffb21e; --accent-soft:rgba(255,178,30,.16); --accent-glow:rgba(255,178,30,.14); }
    .theme-light .swipe-card{ --accent-soft:rgba(237,0,60,.07); --accent-glow:rgba(237,0,60,.09); }
    .theme-light .swipe-card.card-color-blue{ --accent-soft:rgba(46,167,255,.07); --accent-glow:rgba(46,167,255,.09); }
    .theme-light .swipe-card.card-color-yellow{ --accent-soft:rgba(255,178,30,.07); --accent-glow:rgba(255,178,30,.09); }
    .swipe-card {
      transition: transform 0.25s ease, opacity 0.25s ease;
    }
  
    .card-inner{ width:100%; height:100%; position:relative; transform-style:preserve-3d; transition:transform .35s ease; border-radius:22px; }
    .card-front,.card-back{
      position:absolute; inset:0; border-radius:22px; backface-visibility:hidden;
      display:flex; flex-direction:column; align-items:center;
      padding:26px 22px 28px;
      box-sizing:border-box;
    }
  
    .card-front{ gap:14px; }
  
    .card-front{
      color:#e8eef9;
      background:
        radial-gradient(120% 90% at 16% 0%, var(--accent-soft), transparent 58%),
        linear-gradient(180deg, #0f1527 0%, #0c1426 100%);
      border: 1px solid rgba(148,163,184,.16);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.06),
        var(--elev-2),
        0 0 26px var(--accent-glow);
    }
    .card-front::before{
      content:""; position:absolute; inset:-1px; border-radius:inherit;
      box-shadow: inset 0 0 28px var(--accent-soft);
      pointer-events:none; opacity:.5;
    }
    .theme-light .card-front{
      color:#0e1320;
      background:
        radial-gradient(120% 90% at 16% 0%, var(--accent-soft), transparent 58%),
        linear-gradient(180deg, #f6f8fc 0%, #eef2f7 100%);
      border:1px solid rgba(15,23,42,.12);
      box-shadow:
        inset 0 1px 0 rgba(0,0,0,.025),
        var(--elev-1),
        0 0 14px var(--accent-soft);
    }
    .card-back{
      padding-bottom: 12px !important;
      color:#d7dfef;
      background: linear-gradient(180deg, #10192b, #0c1324);
      border: 1px solid rgba(148,163,184,.16);
      transform: rotateY(180deg);
      align-items:flex-start; text-align:left; overflow-y:auto;
    }
    .theme-light .card-back{
      color:#0e1320;
      background: linear-gradient(180deg, #f6f8fc, #eef2f7);
      border:1px solid rgba(15,23,42,.12);
    }
  
    /* === Logo frame === */
    .logo-frame{
      --aiAngle: 0deg;
      display:inline-flex;
      align-items:center; justify-content:center;
      padding:10px;
      border-radius:18px;
      margin-bottom: 10px;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)) padding-box,
        conic-gradient(from var(--aiAngle),
          rgba(237,0,60,.26) 0deg,
          rgba(237,0,60,.06) 160deg,
          rgba(237,0,60,.26) 360deg) border-box;
      border:1px solid transparent;
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.05),
        0 8px 22px rgba(2,6,23,.32),
        0 0 20px var(--accent-glow);
      transition: box-shadow .25s ease, transform .25s ease, background .25s ease;
      animation: aiBorderSpin 36s linear infinite;
    }
    .swipe-card.is-top .logo-frame{ animation-duration: 22s; box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 10px 26px rgba(2,6,23,.4), 0 0 24px var(--accent-glow); }
    .logo-frame:hover{ transform: translateY(-1px); }
    .theme-light .logo-frame{
      background:
        linear-gradient(180deg, #f6f8fb, #f6f8fb) padding-box,
        conic-gradient(from var(--aiAngle),
          rgba(237,0,60,.14) 0deg,
          rgba(237,0,60,.04) 160deg,
          rgba(237,0,60,.14) 360deg) border-box;
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,.02),
        0 8px 18px rgba(2,6,23,.07),
        0 0 12px var(--accent-soft);
    }
  
    .company-logo{
      display:block;
      max-width: 88%;
      max-height: clamp(120px, 28vh, 220px);
      width:auto; height:auto; object-fit:contain;
      margin: 2px auto 2px;
      border-radius:14px;
      background: transparent !important;
      border: 0 !important;
      box-shadow:none !important;
      filter: drop-shadow(0 2px 6px rgba(0,0,0,.18));
    }
  
    @keyframes aiBorderSpin { to { --aiAngle: 360deg; } }
    @media (prefers-reduced-motion: reduce){
      .logo-frame, .logo-chip{ animation: none !important; }
    }
  
    /* Titles */
    .title-block{ text-align:center; margin-top: 8px; }
    .title-block h4{
      margin:0 0 10px; font-size:13px; color:#a8b3c7; font-weight:600; letter-spacing:.16em; text-transform:uppercase; line-height:1.6;
    }
    .title-block h3{
      margin:6px 0; font-size:28px; color:#f2f6ff; font-weight:900; letter-spacing:.04em; text-transform:uppercase; line-height:1.25;
    }
    .title-block h2{
      margin:8px 0 10px; font-size:16px; color:#c9d6ea; font-weight:700; letter-spacing:.02em; line-height:1.4;
    }
    .theme-light .title-block h3{ color:#0e1320; }
    .theme-light .title-block h2{ color:#26344d; }
    .theme-light .title-block h4{ color:#5d6a81; }
  
    /* Meta pill */
    .meta{
      margin:12px 0 0;
      font-size:12px; color:#c0cbe0;
      background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.10);
      padding:6px 10px; border-radius:999px; display:inline-flex; align-items:center; gap:6px;
    }
    .theme-light .meta{ color:#3b485e; background: rgba(2,6,23,.04); border-color: rgba(15,23,42,.10); }
    .meta .dot{ display:inline-block; width:6px; height:6px; border-radius:999px; background:var(--accent); transform: translateY(-1px); }
  
    /* Badges */
    .info-badges{ display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin-top:14px; }
    .badge{ background:rgba(255,255,255,.06); color:#e9f0ff; padding:6px 10px; border-radius:999px; font-size:11px; font-weight:800; border:1px solid rgba(255,255,255,.10); }
    .badge--brand{ background:var(--accent-soft); color:#fff; border-color:rgba(237,0,60,.22); }
    .badge--hot{ background:rgba(255,87,87,.14); color:#fecaca; border-color:#fecaca22; }
    .theme-light .badge{ background:rgba(2,6,23,.04); color:#0e1320; border-color:rgba(15,23,42,.10); }
    .theme-light .badge--hot{ background:#fde9ea; color:#842a2a; border-color:#f3c8cb; }
  
    .card-cta {
      margin-top: auto;
      margin-bottom: 0 !important;
      display: flex;
      justify-content: space-between; /* push buttons to far edges */
      align-items: center;
      width: 100%;
      padding: 20px;
    }
  
    .swipe-btn{
      height:60px; aspect-ratio:1/1; border-radius:999px;
      border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(120% 140% at 50% 0%, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.22), 0 10px 26px rgba(2,6,23,.35);
      cursor:pointer; display:flex; align-items:center; justify-content:center; position:relative; overflow:hidden;
      transition: transform .14s ease, box-shadow .14s ease, background .14s ease, border-color .14s ease;
      color:#e7eefc;
    }
    .swipe-btn:hover{
      transform: translateY(-2px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.24), 0 14px 34px rgba(2,6,23,.44), 0 0 0 8px var(--accent-soft);
      border-color: rgba(255,255,255,.22);
    }
    .theme-light .swipe-btn{
      background: radial-gradient(120% 140% at 50% 0%, rgba(0,0,0,.018), rgba(0,0,0,.012));
      border-color: rgba(15,23,42,.12);
      color:#0e1320;
      box-shadow: inset 0 1px 0 rgba(0,0,0,.03), 0 10px 20px rgba(2,6,23,.07);
    }
  
    /* Back of card text */
    .card-back h3{ font-size:16px; font-weight:800; color:#f2f6ff; margin:0 0 6px; }
    .card-back h4{ font-size:14px; font-weight:700; color:#c9d6ea; margin:0 0 10px; }
    .card-back .location{ color:#c0cbe0; margin:0 0 10px; }
    .card-back .divider{ height:1px; width:100%; background:#22304a; margin:10px 0 12px; }
    .card-back .desc{ font-size:13px; line-height:1.6; color:#e2e8f5; }
    .theme-light .card-back h3{ color:#0e1320; }
    .theme-light .card-back h4{ color:#26344d; }
    .theme-light .card-back .location{ color:#4b5563; }
    .theme-light .card-back .divider{ background:#dde4ee; }
    .theme-light .card-back .desc{ color:#1f2b3b; }
  
    /* Stamps */
    .stamp{ position:absolute; top:12px; right:12px; padding:6px 10px; font-weight:900; letter-spacing:.12em; border-radius:8px; transform:scale(.9) translateY(-6px); opacity:0; transition:.25s ease; box-shadow:0 10px 24px rgba(2,6,23,.18); font-size:10px; }
    .stamp--apply{ color:#ffd6df; background:rgba(237,0,60,.14); border:1px solid rgba(237,0,60,.28); }
    .stamp--dismiss{ color:#fecaca; background:#7f1d1d40; border:1px solid #fecaca33; right:auto; left:12px; }
    .theme-light .stamp--dismiss{ background:#fde9ea; color:#842a2a; border-color:#f3c8cb; }
    .stamp.show{ transform: scale(1) translateY(0); opacity:1; }
  
    /* Stack layers */
    .swipe-card{ transition: transform .35s ease, opacity .35s ease; }
    .swipe-card.is-top   { transform: translateY(0) scale(1);   filter:none; }
    .swipe-card.is-next  { transform: translateY(14px) scale(.97); opacity:.97; }
    .swipe-card.is-third { transform: translateY(28px) scale(.94); opacity:.94; }
    .swipe-card.leaving  { pointer-events:none; }
  
    /* Flip state */
    .card-inner.is-flipped{ transform: rotateY(180deg) }
  
    /* Toast */
    .toast {
      position: fixed;
      /* move it up and further right */
      top: 8px;         /* was 20px */
      right: 30px;      /* was 20px */
      z-index: 10000;   /* keep it above cards */
      background: linear-gradient(180deg, #0b1220, #0e1729);
      color: #fff;
      border: 1px solid var(--border);
      padding: 10px 14px;
      border-radius: 12px;
      box-shadow: 0 14px 36px rgba(2,6,23,.36);
      opacity: 0;
      transform: translateY(-8px);
      transition: .2s ease;
      font-weight: 700;
    }

    .theme-light .toast{
      background: linear-gradient(180deg, #f4f6fa, #e9edf3);
      color:#0e1320; box-shadow:0 14px 28px rgba(15,23,42,.07); border-color: rgba(15,23,42,.12);
    }
    .toast.show{ opacity:1; transform:translateY(0); }
  
    /* Fly-to-counter ghost */
    .fly-ghost{
      position:fixed; z-index:9998; pointer-events:none;
      border-radius:22px; background: linear-gradient(180deg, #0f1527, #0c1426);
      border:1px solid rgba(148,163,184,.16); box-shadow: 0 18px 48px rgba(2,6,23,.28);
      transform: translate(0,0) scale(1); opacity: 1;
    }
    .theme-light .fly-ghost{
      background: linear-gradient(180deg, #f6f8fc, #eef2f7); border-color: rgba(15,23,42,.12); box-shadow: 0 18px 34px rgba(2,6,23,.09);
    }
    .fly-ghost.run{ transition: transform .7s cubic-bezier(0.22,1,0.36,1), opacity .7s ease; }
  
    /* Small screens */
    @media (max-width: 900px){
      .sidebar{ width:min(var(--sb-w), 86vw); }
    }


    /* Dark theme */
    .card-front{
      /* solid base + radial highlight that fades into the same base color */
      background-color:#0f1527;
      background-image:
        radial-gradient(120% 90% at 16% 0%, rgba(237,0,60,.16), #0f1527 58%),
        linear-gradient(180deg, #0f1527 0%, #0c1426 100%);
      border-color:#243049; /* no alpha */
    }
    .card-front::before{
      /* keep the inner glow but remove any holes */
      box-shadow: inset 0 0 28px rgba(237,0,60,.16);
    }
    .card-back{
      /* already opaque, just ensure border is solid */
      background: linear-gradient(180deg, #10192b 0%, #0c1324 100%);
      border-color:#243049;
    }

    /* Light theme */
    .theme-light .card-front{
      background-color:#f6f8fc;
      background-image:
        radial-gradient(120% 90% at 16% 0%, rgba(237,0,60,.07), #f6f8fc 58%),
        linear-gradient(180deg, #f6f8fc 0%, #eef2f7 100%);
      border-color:#d5dbe6;
    }
    .theme-light .card-back{
      background: linear-gradient(180deg, #f6f8fc 0%, #eef2f7 100%);
      border-color:#d5dbe6;
    }

    /* (Optional) Don‚Äôt dim stacked cards */
    .swipe-card.is-next,
    .swipe-card.is-third{
      opacity:1;
    }


    /* Hide night/day toggle and streak chip when sidebar is open */
    .sb-open .theme-toggle,
    .sb-open .hud__streak{
      opacity:0;
      visibility:hidden;
      pointer-events:none;
      transform: translateY(-6px);
      transition: opacity .18s ease, transform .18s ease, visibility 0s .18s;
    }

    /* Nice entrance when closing sidebar */
    .theme-toggle,
    .hud__streak{
      transition: opacity .18s ease, transform .18s ease;
    }

    .saved-card{
      display:flex; align-items:center; gap:10px;
      padding:12px; border-bottom:1px solid rgba(148,163,184,.22);
      color:var(--ink); background:rgba(255,255,255,.04);
    }
    .saved-logo{ width:40px; height:40px; object-fit:contain; border-radius:6px; }


    /* Saved jobs panel styled to match AI SaaS look */
    #savedList {
      display:none;
      margin-top:20px;
      background:var(--panel);
      border:1px solid var(--border);
      border-radius:20px;
      padding:16px;
      box-shadow: var(--elev-1);
      max-height:calc(100dvh - 180px);
      overflow-y:auto;
      color:var(--ink);
    }

    .theme-light #savedList{
      background:#f6f8fb;
      border-color:rgba(15,23,42,.12);
      box-shadow: var(--elev-1);
    }

    .saved-card{
      display:flex;align-items:center;gap:14px;
      padding:12px 10px;
      border-radius:12px;
      background:rgba(255,255,255,.04);
      border:1px solid var(--border-subtle);
      margin-bottom:10px;
      transition:transform .15s ease,box-shadow .15s ease,background .15s ease;
    }
    .saved-card:hover{
      background:rgba(255,255,255,.07);
      transform:translateY(-1px);
      box-shadow:0 6px 18px rgba(2,6,23,.2);
    }
    .theme-light .saved-card{
      background:rgba(2,6,23,.04);
      border-color:rgba(15,23,42,.08);
    }
    .saved-logo{
      width:48px;height:48px;
      object-fit:contain;border-radius:8px;
      background:#fff;
      box-shadow:0 1px 4px rgba(0,0,0,.08);
    }

    /* Pill tooltip for Saved link */
    #openSaved::after {
      content: "Coming soon";
      position: absolute;
      left: 100%;
      top: 50%;
      transform: translateY(-50%) translateX(8px);
      background: var(--brand);
      color: #fff;
      font: 700 12px/1 Inter;
      white-space: nowrap;
      padding: 5px 10px;
      border-radius: 999px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      opacity: 0;
      pointer-events: none;
      transition: opacity .15s ease, transform .15s ease;
      z-index: 10;
    }
    #openSaved:hover::after {
      opacity: 1;
      transform: translateY(-50%) translateX(12px);
    }

    /* Light theme version */
    .theme-light #openSaved::after {
      background: #0e1320;
      color: #fff;
    }


    /* make anchor the containing block */
    #openSaved {
      position: relative;
    }

    /* pill text */
    #openSaved::after {
      content: "Coming soon";
      position: absolute;
      top: 50%;
      left: 100%;                /* start just to the right */
      transform: translateY(-50%) translateX(6px);
      background: var(--brand);
      color: #fff;
      font: 700 12px/1 Inter;
      padding: 5px 10px;
      border-radius: 999px;
      white-space: nowrap;
      box-shadow: 0 4px 10px rgba(0,0,0,.25);
      opacity: 0;
      pointer-events: none;
      transition: opacity .15s ease, transform .15s ease;
      z-index: 100;
    }

    /* on hover show it */
    #openSaved:hover::after {
      opacity: 1;
      transform: translateY(-50%) translateX(10px);
    }

    /* light theme variant */
    .theme-light #openSaved::after {
      background: #0e1320;
      color: #fff;
    }


    /* --- Phones & small tablets ------------------------------------------------ */
    /* --- Phones & small tablets ------------------------------------------------ */
    /* --- Phones & small tablets ------------------------------------------------ */
    @media (max-width: 600px) {

      .swipe-container {
        width: 98vw;
        height: calc(100dvh - 130px);
        max-height: 88vh;
      }

      .card-front,
      .card-back {
        padding: 22px 18px 18px;
      }

      .company-logo {
        max-height: clamp(180px, 42vh, 280px);
      }

      .title-block h3 { font-size: 30px; line-height: 1.2; }
      .title-block h2 { font-size: 18px; line-height: 1.35; }
      .title-block h4 { font-size: 13px; letter-spacing: .15em; }
      .card-back .desc { font-size: 16px; line-height: 1.7; }

      .card-cta {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        padding-top: 14px;
      }

      .card-cta .swipe-btn {
        flex: 0 1 auto;
        width: clamp(46px, 20vw, 60px);
        aspect-ratio: 1/1;
        height: auto;
        border-radius: 14px;
      }

      .card-cta .swipe-btn svg {
        width: 20px !important;
        height: 20px !important;
      }

      .badge { font-size: 14px; padding: 7px 11px; }
      .meta  { font-size: 14px; padding: 7px 11px; }

      .toast { top: calc(8px + env(safe-area-inset-top)); right: 12px; }
      #savedList { width: 98vw !important; max-height: calc(100dvh - 140px); }

      /* ---- HUD chips top-left at same level as account icon ---- */
      .hud {
        position: fixed;
        top: calc(8px + env(safe-area-inset-top)); /* same height as account icon */
        left: 8px;
        display: flex;
        flex-direction: row;           /* chips side-by-side */
        align-items: center;           /* vertically center */
        gap: 8px;
        padding: 0;
        margin: 0;
        z-index: 30;
      }

      .hud__streak,
      .hud__swipes,
      .hud__applied,
      .swipes-widget,
      .applied-widget {
        display: flex;
        align-items: center;
        margin: 0;                    /* reset any default margin */
        min-height: 34px;
        width: auto;
        flex-shrink: 1;
      }

      /* account icon top-right */
      .account-button,
      .account-icon,
      .header__account {
        position: fixed;
        top: calc(8px + env(safe-area-inset-top));
        right: 14px;
        z-index: 40;
        transform: scale(1.1);
        background: transparent;
      }
    }

    /* Very small phones */
    @media (max-width: 420px) {
      .hud .ring { display:none; }

      .swipe-container {
        height: calc(100dvh - 140px);
        max-height: 90vh;
        width: 98vw;
      }

      .company-logo { max-height: clamp(160px, 46vh, 260px); }
      .title-block h3 { font-size: 28px; }
      .title-block h2 { font-size: 17px; }
      .title-block h4 { font-size: 12.5px; }

      .card-cta .swipe-btn {
        width: clamp(44px, 19vw, 56px);
        border-radius: 12px;
      }
      .card-cta .swipe-btn svg {
        width: 18px !important;
        height: 18px !important;
      }
    }

    /* Ultra small */
    @media (max-width: 380px) {
      .title-block h3 { font-size: 26px; }
      .title-block h2 { font-size: 16px; }
      .title-block h4 { font-size: 12px; letter-spacing: .13em; }

      .company-logo { max-height: clamp(140px, 48vh, 240px); }

      .badge { font-size: 13px; padding: 6px 10px; }
      .meta  { font-size: 13px; padding: 6px 10px; }

      .card-cta { gap: 8px; }
      .card-cta .swipe-btn {
        width: clamp(40px, 18vw, 52px);
      }
      .card-cta .swipe-btn svg {
        width: 16px !important;
        height: 16px !important;
      }
    }

    /* Hide sidebar on mobile */
    @media (max-width: 900px){
      #sidebar,
      #sidebarBackdrop,
      .sidebar__toggle{ display:none !important; }
      .layout{ padding-left:0 !important; }
    }


    /* Default: desktop ‚Äî show original HUD, hide mobile */
    .hud-mobile { display:none; }

    @media (max-width: 600px){
      /* hide full HUD on mobile */
      .hud { display:none !important; }

      /* show our new simpler mobile HUD */
      .hud-mobile {
        position:fixed;
        top:calc(8px + env(safe-area-inset-top));
        left:50%;
        transform:translateX(-50%);
        width:98vw;
        display:flex;
        justify-content:space-between;
        gap:14px;
        padding:8px 12px;
        background:rgba(255,255,255,.06);
        border:1px solid var(--border);
        border-radius:12px;
        color:var(--ink);
        backdrop-filter:blur(6px);
        z-index:30;
        font-weight:700;
        font-size:14px;
      }
      .theme-light .hud-mobile{
        background:rgba(2,6,23,.045);
        border-color:rgba(15,23,42,.12);
      }
    }

    main.layout {
      padding-top: 12px;               /* pushes your cards etc. down */
    }


    /* ===== Modal Base ===== */
    .modal {
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      font-family: 'Manrope', sans-serif !important;
    }

    .modal.show { display: flex; }

    /* Backdrop */
    .modal__backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0,0,0,0.65);
      backdrop-filter: blur(3px);
    }

    /* Dialog box */
    .modal__dialog {
      position: relative;
      background: #0e162a;   /* dark background matching theme */
      border-radius: 16px;
      padding: 28px 24px;
      max-width: 420px;
      width: 90%;
      box-shadow: 0 18px 36px rgba(0,0,0,0.5);
      animation: fadeUp .25s ease;
      z-index: 2;
      text-align: center;
      color: #f5f5f5;
    }

    /* Close button */
    .modal__close {
      position: absolute;
      top: 12px;
      right: 12px;
      border: none;
      background: none;
      font-size: 22px;
      color: #aaa;
      cursor: pointer;
      transition: color .2s ease;
    }
    .modal__close:hover { color: #fff; }

    /* Content */
    .modal__content h2 {
      margin: 0 0 12px;
      font-size: 22px;
      font-weight: 700;
      color: #fff;
    }
    .modal__content p {
      font-size: 16px;
      line-height: 1.5;
      color: #d1d5db;
      margin: 0 0 20px;
    }

    /* Actions */
    .modal__actions {
      display: flex;
      justify-content: center;
    }
    .btn-secondary {
      padding: 10px 22px;
      border-radius: 10px;
      background: #FF2F5A; /* brand red */
      border: none;
      font-size: 15px;
      font-weight: 600;
      color: #fff;
      cursor: pointer;
      transition: background .2s ease, transform .15s ease;
    }
    .btn-secondary:hover {
      background: #e92650;
      transform: translateY(-1px);
    }

    /* Animation */
    @keyframes fadeUp {
      from { opacity: 0; transform: translateY(12px) scale(.98); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }


    /* --- Mobile-only "Get more swipes" button --- */
    .mobile-premium-btn {
      display: none; /* hidden by default (desktop) */
      background: linear-gradient(135deg, #ed003c, #ff4f7a);
      color: #fff;
      font-weight: 700;
      font-size: 14px;
      border: none;
      border-radius: 10px;
      padding: 6px 12px;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.15s ease;
    }

    .mobile-premium-btn:hover {
      background: linear-gradient(135deg, #d80038, #ff3b6b);
      transform: translateY(-1px);
    }

    /* Show only on mobile */
    @media (max-width: 768px) {
      .bgFX,
      .bgFX__beam,
      .bgFX__orb,
      .bgFX__grid {
        display: none !important;
      }
      main.layout {
        background: linear-gradient(135deg, #0b0f1a 0%, #16203b 100%) !important;
      }
    }


    @media (max-width: 768px) {
      /* Disable only heavy visual effects (NOT layout/visibility) */
      .bgFX,
      .bgFX__beam,
      .bgFX__orb,
      .bgFX__grid {
        display: none !important;
      }

      .swipe-container {
        perspective: none !important;
      }

      .card-inner {
        transform: none !important;
      }

      /* Ensure logo container still behaves as intended */
      .logo-frame {
        display: flex !important;
        justify-content: center;
        align-items: center;
        padding: 8px;
        margin-bottom: 12px;
        border-radius: 16px;
        background: none !important;
        border: none !important;
        box-shadow: none !important;
      }

      .company-logo {
        display: block !important;
        max-width: 80%;
        max-height: 160px;
        width: auto;
        height: auto;
        object-fit: contain;
      }
    }


    @media (max-width: 768px) {
      .mobile-premium-btn {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 0 auto;         /* centers horizontally */
        position: relative;     /* ensures it stays within header flow */
        left: 50%;
        transform: translateX(-50%);
      }
    }

    /* Hide or show elements based on screen size */
    .desktop-only {
      display: inline-flex;
    }

    .mobile-only {
      display: none !important;
    }

    @media (max-width: 768px) {
      .desktop-only {
        display: none !important;
      }
      .mobile-only {
        display: inline-flex !important;
      }
    }

    @media (max-width: 768px) {
      .logo-frame {
        display: flex !important;
        justify-content: center;
        align-items: center;
        padding: 8px;
        margin-bottom: 12px;
        border-radius: 16px;
        background: none !important;
        border: none !important;
        box-shadow: none !important;
      }

      .company-logo {
        display: block !important;
        max-width: 80%;
        max-height: 160px;
        width: auto;
        height: auto;
        object-fit: contain;
      }
    }




    /* üì± Allow scrolling inside the modal on mobile */
    @media (max-width: 768px) {
      #noSwipesModal .modal__dialog {
        max-height: 90dvh;      /* don‚Äôt overflow screen */
        overflow-y: auto;       /* enable scrolling inside modal */
        -webkit-overflow-scrolling: touch; /* smooth iOS scroll */
        padding-bottom: 20px;   /* breathing room for bottom content */
      }

      /* keep plans spaced properly */
      #noSwipesModal .modal__plans {
        flex-direction: column !important;
        gap: 1.2rem;
      }
    }



















    /* ===== Onboarding base ===== */
    #ifOnb[hidden]{ display:none !important; }
    #ifOnb{
      position:fixed; inset:0; z-index:10050; font-family:'Manrope',sans-serif !important;
    }
    .ifOnb__backdrop{
      position:absolute; inset:0; background: rgba(2,6,23,0.72);
      animation: if-fade .25s ease both;
    }
    .ifOnb__card{
      position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
      width:min(520px, calc(100vw - 32px));
      background:var(--panel); color:var(--ink);
      border:1px solid var(--border); border-radius:18px; padding:22px;
      box-shadow:0 30px 80px rgba(0,0,0,.55);
      animation: if-pop .25s ease both;
    }
    .theme-light .ifOnb__card{ background:#f6f8fb; }

    .ifOnb__head{ display:flex; align-items:center; justify-content:space-between; margin-bottom:8px; }
    .ifOnb__chip{
      font:800 11px/1 Inter; color:#fff; background:linear-gradient(135deg,var(--brand),var(--brand-400));
      padding:6px 10px; border-radius:999px; box-shadow:0 10px 22px rgba(237,0,60,.25);
    }
    .theme-light .ifOnb__chip{ color:#fff; }
    .ifOnb__close{ background:none; border:0; color:var(--ink); opacity:.6; font-size:22px; cursor:pointer; }
    .ifOnb__title{ margin:6px 0 6px; font:800 20px/1.3 Inter; color:var(--ink); }
    .ifOnb__desc{ margin:0 0 10px; color:var(--ink-500); }
    .ifOnb__progress{ margin:8px 0 14px; color:var(--ink-500); font-weight:700; }

    .ifOnb__actions{ display:flex; gap:10px; justify-content:flex-end; }
    .ifOnb__stage{ border:1px dashed var(--border-subtle); border-radius:12px; padding:12px; background:rgba(255,255,255,.04); }
    .theme-light .ifOnb__stage{ background:rgba(2,6,23,.035); }

    /* Spotlight ring that positions over real targets */
    .ifOnb__spot{
      position:fixed; width:96px; height:96px; border-radius:999px; pointer-events:none;
      box-shadow:0 0 0 9999px rgba(0,0,0,.55), 0 0 0 2px var(--brand);
      transform:scale(.9); opacity:0; transition: .25s ease;
    }
    .ifOnb__spot.show{ transform:scale(1); opacity:1; }

    /* Tooltip arrow (auto flips) */
    .ifOnb__tooltip{
      position:fixed;
      max-width:340px;
      background:linear-gradient(180deg,#020617,#020617);
      color:#fff; border:1px solid var(--border);
      border-radius:16px; padding:16px 18px;
      box-shadow:0 18px 44px rgba(2,6,23,.6);
      opacity:0; transform:translateY(6px);
      transition:.18s ease;
    }

    .theme-light .ifOnb__tooltip{ background:#020617; color:#fff; }
    .ifOnb__tooltip.show{ opacity:1; transform:translateY(0); }
    .ifOnb__tipTitle{ font-weight:800; margin:0 0 6px; font-size:16px; }
    .ifOnb__tipText{ color:#cbd5e1; font-weight:600; margin:0; font-size:14px; line-height:1.6; }


    .ifOnb__tooltip::after{
      content:"";
      position:absolute;
      width:10px; height:10px; transform:rotate(45deg);
      background:inherit; border:inherit; border-left:none; border-top:none;
      box-shadow:inherit;
    }

    /* when tooltip is above the target */
    .ifOnb__tooltip.is-above::after{
      bottom:-5px; left:calc(50% - 5px);
    }
    /* when tooltip is below the target */
    .ifOnb__tooltip.is-below::after{
      top:-5px; left:calc(50% - 5px);
    }

    /* leader line from target ‚Üí tooltip arrow */
    .ifOnb__leader{
      position:fixed; height:2px; width:0;
      background: linear-gradient(90deg, var(--brand), rgba(237,0,60,.0));
      box-shadow: 0 0 8px rgba(237,0,60,.45);
      border-radius:2px;
      transform-origin: 0 50%;
      pointer-events:none; opacity:.95;
    }

    /* little polish on the title spacing */
    .ifOnb__tipTitle{ font-weight:800; margin:0 0 6px; font-size:16px; }
    .ifOnb__tipText{ color:#cbd5e1; font-weight:600; margin:0; font-size:14px; line-height:1.6; }



    /* Demo card used for fake animations (does not alter data) */
    .ifOnb__demoCard{
      position:fixed; left:50%; top:56%; width:min(360px, 88vw); height:220px;
      border-radius:18px; border:1px solid rgba(148,163,184,.16);
      background:linear-gradient(180deg,#0f1527,#0c1426);
      box-shadow:var(--elev-2);
      display:none; align-items:center; justify-content:center;
    }
    .theme-light .ifOnb__demoCard{ background:linear-gradient(180deg,#f6f8fc,#eef2f7); }
    .ifOnb__demoStamp{
      position:absolute; top:12px; left:12px;
      padding:6px 10px; border-radius:8px; font-weight:900; letter-spacing:.12em; font-size:10px;
      color:#fecaca; background:#7f1d1d40; border:1px solid #fecaca33; opacity:0; transform:translateY(-6px) scale(.9);
      transition:.25s ease;
    }
    .ifOnb__demoStamp.show{ opacity:1; transform:translateY(0) scale(1); }

    /* Brand buttons (reuse your tokens) */
    .btn-primary{ background:var(--brand); color:#fff; border:0; padding:10px 16px; border-radius:12px; font-weight:800; }
    .btn-secondary{ background:rgba(255,255,255,.06); border:1px solid var(--border); color:var(--ink); padding:10px 16px; border-radius:12px; font-weight:800; }

    @keyframes if-pop{ from{opacity:0; transform:translate(-50%,-44%) scale(.98)} to{opacity:1; transform:translate(-50%,-50%) scale(1)}}
    @keyframes if-fade{ from{opacity:0} to{opacity:1}}

    /* Small screens */
    @media (max-width:600px){
      .ifOnb__card{ width:calc(100vw - 20px); padding:18px; }
      .ifOnb__demoCard{ top:60%; height:200px; }
    }

    /* Make whole card clickable except buttons */
    .swipe-card .card-front,
    .swipe-card .card-back {
      cursor: pointer;
    }

    /* Buttons stay buttons */
    .swipe-card .swipe-btn {
      pointer-events: auto;
      cursor: pointer;
    }

    /* --- Fix: prevent onboarding tooltip flash --- */
    .ifOnb__tooltip,
    .ifOnb__spot,
    .ifOnb__demoCard,
    .ifOnb__demoStamp {
      visibility: hidden;
      opacity: 0;
      transition: opacity .25s ease;
    }

    .ifOnb__tooltip.show,
    .ifOnb__spot.show,
    .ifOnb__demoCard.show,
    .ifOnb__demoStamp.show {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);  /* important */
    }



    /* --- Fix: enforce Manrope font on onboarding buttons --- */
    #ifOnb,
    #ifOnb * {
      font-family: 'Manrope', sans-serif !important;
    }

    #ifOnb .ifOnb__actions button {
      font-family: 'Manrope', sans-serif !important;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    /* üîπ Swipe explainer pill */
    /* üîπ Swipe explainer pill (attached to swipe-right button) */
    .swipe-hint {
      position: fixed;              /* we‚Äôll position it via JS over the button/card */
      padding: 10px 18px;
      border-radius: 999px;
      background: rgba(2,6,23,0.96);
      color: #f9fafb;
      font-size: 15px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 14px 40px rgba(0,0,0,0.6);
      z-index: 9999;
      transition: opacity .25s ease, transform .25s ease;
      transform: translate(-50%, -100%);  /* centered above anchor point */
    }

    .theme-light .swipe-hint {
      background: #020617;
      color: #ffffff;
    }

    .swipe-hint__icon {
      font-size: 16px;
    }

    .swipe-hint.hide {
      opacity: 0;
      pointer-events: none;
      transform: translate(-50%, calc(-100% + 8px)); /* slide down slightly when hiding */
    }

    /* üîπ Next button inside swipe hint */
    .swipe-hint__next {
      display: none; /* HIDE the button, autoplay instead */
      border: none;
      background: #FF2F5A;
      color: #ffffff;
      font-size: 14px;
      font-weight: 700;
      padding: 5px 12px;
      border-radius: 999px;
      cursor: pointer;
      white-space: nowrap;
    }
    .swipe-hint__next:hover {
      background: #e92650;
    }


    .card-back .compensation {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.6;
      color: #e2e8f5;
    }
    .card-back .comp-line {
      margin: 0;
      font-weight: 600;
    }
    .theme-light .card-back .compensation {
      color: #1f2b3b;
    }


    /* ===== FINAL MOBILE LAYOUT OVERRIDES ===== */
    @media (max-width: 768px) {
      /* Hide sidebar + backdrop completely */
      #sidebar,
      #sidebarBackdrop {
        display: none !important;
      }

      /* Hide both HUD variants on mobile to avoid clutter */
      .hud,
      .hud-mobile {
        display: none !important;
      }

      /* Simplify header: keep only account icon */
      .header-left {
        display: none !important; /* hides theme toggle + mobile premium */
      }

      .custom-header {
        width: 100%;
        max-width: none;
        left: 0;
        transform: none;
        padding: 8px 12px;
      }

      .header__account {
        position: fixed;
        top: calc(8px + env(safe-area-inset-top));
        right: 12px;
        z-index: 40;
      }

      /* Center the main card nicely */
      main.layout {
        padding-top: 0 !important;
        padding-left: 0 !important;
        align-items: center !important;
        justify-content: center !important;
      }

      .swipe-container {
        width: 92vw;
        max-width: 440px;
        height: min(640px, calc(100dvh - 120px));  /* make sure the card keeps a real height on mobile */
        max-height: calc(100dvh - 80px);
      }
    }







/* üî• Make swipe card fill the screen on mobile */
@media (max-width: 600px) {
  main.layout {
    width: 100vw;
    max-width: 100vw;
    padding: 0 !important;
    align-items: stretch !important;   /* fill height */
    justify-content: flex-start !important; /* no vertical centering */
  }

  .swipe-container {
    position: relative;
    width: 100vw;
    max-width: 100vw;
    height: 100dvh;          /* full height */
    max-height: 100dvh;
    margin: 0;
    padding-inline: 0;       /* remove side gap */
  }

  .card-inner,
  .card-front,
  .card-back {
    border-radius: 0;        /* optional: remove rounded corners */
  }
}

@media (max-width: 600px) {
  main.layout {
    width: 100vw;
    max-width: 100vw;
    padding: 0 !important;
    display: flex;
    flex-direction: column;
    align-items: stretch !important;         /* fill vertically */
    justify-content: center !important;  /* no vertical centering */
  }

  .swipe-container {
    flex: 1 1 auto;        /* let it grow to full width */
    width: 100%;
    max-width: 100%;
    height: 100dvh;
    max-height: 100dvh;
    margin: 0;
  }

  .swipe-card,
  .card-inner,
  .card-front,
  .card-back {
    width: 100%;
    height: 100%;
    border-radius: 0;       /* keep flat edges ‚Äì change if you want rounded */
  }
}

/* ‚úÖ FINAL MOBILE CENTERING OVERRIDE */
@media (max-width: 600px) {
  main.layout {
    height: 100dvh;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
    align-items: center !important;    /* horizontal center */
    justify-content: center !important;/* vertical center   */
    padding: 0 !important;
  }

  .swipe-container {
    position: relative;
    margin: 0 auto;                    /* center horizontally */
    width: 92vw;
    max-width: 440px;
    height: auto;                      /* don't stretch full height */
    max-height: calc(100dvh - 140px);  /* leaves room for header/onboarding pill */
  }

  .swipe-card,
  .card-inner,
  .card-front,
  .card-back {
    width: 100%;
    height: 100%;
    border-radius: 22px;               /* back to nice rounded card */
  }
}

/* üîª Make the card shorter on mobile */
@media (max-width: 600px) {
  /* Let the card shrink to content instead of filling the screen */
  .swipe-container {
    width: 92vw;
    max-width: 420px;
    height: auto;
    max-height: none;
    margin: 0 auto;
  }

  .swipe-card,
  .card-inner,
  .card-front,
  .card-back {
    height: auto;      /* stop forcing 100% height */
  }

  /* Make the top part less tall */
  .logo-frame {
    margin-bottom: 6px;
  }

  .company-logo {
    max-height: 120px; /* was much taller before */
  }

  /* Don‚Äôt push buttons to the absolute bottom */
  .card-cta {
    margin-top: 16px;  /* override margin-top:auto; */
    padding-top: 10px;
    padding-bottom: 14px;
  }
}


  </style>

{% include "base/email_flow_showcase.html" %}

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('showEFSNow');
    if (!btn) {
      console.log('‚ùå showEFSNow not found in DOM');
      return;
    }
    console.log('‚úÖ showEFSNow found, forcing visible');
    btn.style.display = 'flex';
  });
</script>

<script>
  
  // (checkout + quota logic removed for staging)
  
</script>

<script src="{% static 'js/email_flow_showcase.js' %}"></script>

<script>
// ===== 5-second page loading overlay =====
document.addEventListener('DOMContentLoaded', () => {
  const loader = document.getElementById('page-loader');
  if (!loader) return;

  // Keep overlay for 5 seconds, then fade out
  setTimeout(() => {
    loader.classList.add('hidden');

    // After the fade-out transition, remove it from layout
    const removeAfter = () => {
      loader.style.display = 'none';
      loader.removeEventListener('transitionend', removeAfter);
    };
    loader.addEventListener('transitionend', removeAfter);
  }, 5000); // 5000ms = 5 seconds
});


console.log("üî• AI card loader script running...");

document.addEventListener('DOMContentLoaded', () => {
  const deck = document.getElementById('swipeDeck');
  if (deck) {
    deck.style.opacity = '1';
    deck.style.pointerEvents = 'auto';
  }

  const container = document.querySelector('.swipe-container');
  const cardInner = container?.querySelector('.card-inner');
  const toastEl = document.getElementById('toast');

  const appliedCount = document.getElementById('appliedCount');
  const appliedMobile = document.getElementById('appliedCountMobile');
  const swipesLeftEl = document.getElementById('swipesLeft');
  const swipesLeftMobileEl = document.getElementById('swipesLeftMobile');

  const swipeHint = document.getElementById('swipeHint');
  const swipeRightBtn = document.querySelector('.swipe-btn.swipe-right');
  const swipeLeftBtn = document.querySelector('.swipe-btn.swipe-left');
  const swipeHintText = swipeHint ? swipeHint.querySelector('.swipe-hint__text') : null;
  const swipeHintIcon = swipeHint ? swipeHint.querySelector('.swipe-hint__icon') : null;
  const swipeHintNext = swipeHint ? swipeHint.querySelector('.swipe-hint__next') : null;

  let applied = 0;
  let swipesLeft = parseInt(swipesLeftEl?.textContent || '0', 10) || 10;

  // 1 = "Swipe right to apply"
  // 2 = "Swipe left to dismiss"
  // 3 = "Click the card to see more info"
  let hintStage = 1;
  let hintTimers = [];

  function clearHintTimers() {
    hintTimers.forEach(id => clearTimeout(id));
    hintTimers = [];
  }

  function showToast(msg) {
    if (!toastEl) return;
    toastEl.textContent = msg;
    toastEl.classList.add('show');
    clearTimeout(showToast._t);
    showToast._t = setTimeout(() => {
      toastEl.classList.remove('show');
    }, 1500);
  }

  // üîπ Position hint directly above the current anchor (button for stages 1‚Äì2, card for stage 3)
  function positionSwipeHint() {
    if (!swipeHint) return;

    let anchorEl = null;
    if (hintStage === 1) {
      anchorEl = swipeRightBtn;
    } else if (hintStage === 2) {
      anchorEl = swipeLeftBtn;
    } else if (hintStage === 3) {
      anchorEl = container || swipeRightBtn || swipeLeftBtn;
    }

    if (!anchorEl) return;

    const rect = anchorEl.getBoundingClientRect();
    const left = rect.left + rect.width / 2;
    const top = rect.top - 8; // a bit above anchor

    swipeHint.style.position = 'fixed';
    swipeHint.style.left = `${left}px`;
    swipeHint.style.top = `${top}px`;
    swipeHint.style.transform = 'translate(-50%, -100%)';
  }

  // üîπ Autoplay hint stages: 1 ‚Üí 2 ‚Üí 3 ‚Üí hide
function autoAdvanceHints() {
  if (!swipeHint) return;

  clearHintTimers();

  // Start at stage 1 explicitly
  hintStage = 1;
  if (swipeHintText) swipeHintText.textContent = 'Swipe right to apply';
  if (swipeHintIcon) swipeHintIcon.textContent = '‚úì';
  swipeHint.classList.remove('hide');
  positionSwipeHint();

  // Stage 2 after **3 seconds**
  hintTimers.push(setTimeout(() => {
    if (!swipeHint || swipeHint.classList.contains('hide')) return;
    hintStage = 2;
    swipeHintText.textContent = 'Swipe left to dismiss';
    swipeHintIcon.textContent = '‚úï';
    positionSwipeHint();
  }, 3000));

  // Stage 3 after **6 seconds**
  hintTimers.push(setTimeout(() => {
    if (!swipeHint || swipeHint.classList.contains('hide')) return;
    hintStage = 3;
    swipeHintText.textContent = 'Click the card to see more info';
    swipeHintIcon.textContent = 'üëÜ';
    if (cardInner && !cardInner.classList.contains('is-flipped')) {
      cardInner.classList.add('is-flipped');
    }
    positionSwipeHint();
  }, 6000));

  // End sequence after **9 seconds**
  hintTimers.push(setTimeout(() => {
    if (!swipeHint) return;
    if (cardInner && cardInner.classList.contains('is-flipped')) {
      cardInner.classList.remove('is-flipped');
    }
    swipeHint.classList.add('hide');
    clearHintTimers();
  }, 9000));
}



  if (swipeHint && (swipeRightBtn || swipeLeftBtn || container)) {
    positionSwipeHint();
    window.addEventListener('resize', positionSwipeHint);
    // Delay hint sequence until after 5s loader overlay is gone
    setTimeout(() => {
      autoAdvanceHints(); // start automatic sequence
    }, 5000);
  }

  // (Manual "Next" handler left in place but button is hidden; it won't be used)
  if (swipeHintNext) {
    swipeHintNext.addEventListener('click', (e) => {
      e.stopPropagation();

      if (hintStage === 1) {
        hintStage = 2;
        if (swipeHintText) swipeHintText.textContent = 'Swipe left to dismiss';
        if (swipeHintIcon) swipeHintIcon.textContent = '‚úï';
        positionSwipeHint();
      } else if (hintStage === 2) {
        hintStage = 3;
        if (swipeHintText) swipeHintText.textContent = 'Click the card to see more info';
        if (swipeHintIcon) swipeHintIcon.textContent = 'üëÜ';
        if (cardInner && !cardInner.classList.contains('is-flipped')) {
          cardInner.classList.add('is-flipped');
        }
        positionSwipeHint();
      } else if (hintStage === 3) {
        if (cardInner && cardInner.classList.contains('is-flipped')) {
          cardInner.classList.remove('is-flipped');
        }
        if (swipeHint) swipeHint.classList.add('hide');
      }
    });
  }

  // Simple card flip: click anywhere on card (except buttons)
  container?.addEventListener('click', (e) => {
    if (e.target.closest('.swipe-btn')) return;
    if (!cardInner) return;
    cardInner.classList.toggle('is-flipped');
  });

  // Fake swipe buttons: just animate counters & toast (no backend)
  container?.addEventListener('click', (e) => {
    const btn = e.target.closest('.swipe-btn');
    if (!btn) return;
    e.stopPropagation();

    // üîπ First real interaction with a swipe button hides the hint and stops autoplay
    if (swipeHint && !swipeHint.classList.contains('hide')) {
      swipeHint.classList.add('hide');
      clearHintTimers();
    }

    if (btn.classList.contains('swipe-right')) {
      applied += 1;
      if (appliedCount) appliedCount.textContent = applied;
      if (appliedMobile) appliedMobile.textContent = applied;

      swipesLeft = Math.max(0, swipesLeft - 1);
      if (swipesLeftEl) swipesLeftEl.textContent = swipesLeft;
      if (swipesLeftMobileEl) swipesLeftMobileEl.textContent = swipesLeft;

      showToast('Demo only: no real application sent');
    } else if (btn.classList.contains('swipe-left')) {
      showToast('Demo only: skipped');
    }
  });

  // Open premium modal visually only
  const openPremium = document.getElementById('openPremium');
  const openPremiumMobile = document.getElementById('openPremiumMobile');
  const noSwipesModal = document.getElementById('noSwipesModal');

  function openModal() {
    if (!noSwipesModal) return;
    noSwipesModal.classList.add('show');
    document.documentElement.style.overflow = 'hidden';
  }

  openPremium?.addEventListener('click', (e) => {
    e.preventDefault();
    openModal();
  });

  openPremiumMobile?.addEventListener('click', (e) => {
    e.preventDefault();
    openModal();
  });

  // Simple theme toggle (dark / light)
  const themeToggle = document.getElementById('themeToggle');
  themeToggle?.addEventListener('click', () => {
    document.documentElement.classList.toggle('theme-light');
  });

  // Saved list toggle (visual only)
  const openSaved = document.getElementById('openSaved');
  const savedList = document.getElementById('savedList');
  openSaved?.addEventListener('click', (e) => {
    e.preventDefault();
    if (!savedList) return;
    const visible = savedList.style.display === 'block';
    savedList.style.display = visible ? 'none' : 'block';
  });
});

// üëâ LOAD AI-GENERATED FIRST CARD
document.addEventListener("DOMContentLoaded", () => {
  fetch("/swipe/next/", { credentials: "include" })
    .then(r => r.json())
    .then(job => {
      console.log("AI job loaded:", job);

      // FRONT
      document.getElementById("cCompany").textContent = job.company || "Company";
      document.getElementById("cTitle").textContent   = job.title   || "Title";
      document.getElementById("cRole").textContent    = job.role    || "Role";
      document.getElementById("cLoc").textContent     = job.location || "Location";

      // LOGO
      const logoURL = job.logo_domain
        ? `https://logo.clearbit.com/${job.logo_domain}`
        : "https://logo.clearbit.com/openai.com";
      document.getElementById("cLogo").src = logoURL;

      // BACK OF CARD
      document.getElementById("bCompany").textContent = job.company || "Company";
      document.getElementById("bRole").textContent    = job.role    || "Role";
      document.getElementById("bLoc").textContent     = job.location || "Location";

      // Use long_description if available, fallback to short desc
      const longDesc = job.long_desc || job.long_description || job.desc || "";
      document.getElementById("bDesc").textContent = longDesc;

      // Compensation
      const compWrap   = document.getElementById("bCompWrap");
      const compTypeEl = document.getElementById("bCompType");
      const compValEl  = document.getElementById("bCompValue");

      const compType = (job.compensation_type || "").toLowerCase().trim();
      const compVal  = (job.compensation || "").trim();

      if (compVal && compWrap) {
        // Decide label
        let label = "Compensation";
        if (compType === "salary") label = "Salary";
        else if (compType === "hourly") label = "Hourly pay";
        else if (compType === "stipend") label = "Stipend";

        compWrap.style.display = "block";
        if (compTypeEl) compTypeEl.textContent = label;
        if (compValEl)  compValEl.textContent  = compVal;
      } else if (compWrap) {
        // Hide block if AI didn‚Äôt return any comp
        compWrap.style.display = "none";
      }
    })
    .catch(err => console.error("AI job fetch failed:", err));
});



// ===============================
//  EASY SWIPE CARD ENGINE
// ===============================

// DOM refs for content
const elCompany = document.getElementById("cCompany");
const elTitle   = document.getElementById("cTitle");
const elRole    = document.getElementById("cRole");
const elLoc     = document.getElementById("cLoc");
const elLogo    = document.getElementById("companyLogo");
const elDesc    = document.getElementById("cDesc");

// API endpoint
const NEXT_URL = "/swipe/next/";

// Load a new card from backend
async function loadNextCard() {
  try {
    const r = await fetch(NEXT_URL, {credentials:"include"});
    if (!r.ok) throw new Error("Bad response");
    const data = await r.json();

    // Fill UI fields
    elCompany.textContent = data.company || "Unknown Company";
    elTitle.textContent   = data.title   || "Job Title";
    elRole.textContent    = data.role    || "";

    elLoc.textContent     = data.location || "";
    elDesc.textContent    = data.desc || "";

    // logo: only if domain exists
    if (data.logo_domain) {
      elLogo.src = `https://logo.clearbit.com/${data.logo_domain}`;
    } else {
      elLogo.src = "/static/images/default_logo.png";
    }

    return true;

  } catch (err) {
    console.error("next card fetch error:", err);
    return false;
  }
}

// -------------------------------
// SWIPE ANIMATION HELPERS
// -------------------------------
function animateSwipe(card, direction = "left") {
  return new Promise(resolve => {
    card.classList.add("leaving");
    card.style.transition = "transform 0.35s ease, opacity 0.35s ease";

    if (direction === "left") {
      card.style.transform = "translateX(-300px) rotate(-12deg)";
    } else {
      card.style.transform = "translateX(300px) rotate(12deg)";
    }
    card.style.opacity = "0";

    setTimeout(resolve, 350);
  });
}

function resetCard(card) {
  card.classList.remove("leaving");
  card.style.transform = "translateX(0) rotate(0deg)";
  card.style.opacity = "1";
  card.style.transition = "none";
}

// -------------------------------
// MAIN SWIPE HANDLER
// -------------------------------
async function handleSwipe(direction) {
  const topCard = document.querySelector(".swipe-card.is-top");
  if (!topCard) return;

  // 1. Load next card BEFORE animating
  const ok = await loadNextCard();
  if (!ok) return;

  // 2. Animate current card out
  await animateSwipe(topCard, direction);

  // 3. Reset + reinsert at bottom of stack
  resetCard(topCard);
  topCard.parentNode.appendChild(topCard); // move to back
}

// -------------------------------
// BUTTONS
// -------------------------------
document.getElementById("swipe-left-btn")
  .addEventListener("click", () => handleSwipe("left"));

document.getElementById("swipe-right-btn")
  .addEventListener("click", () => handleSwipe("right"));

// -------------------------------
// INITIAL LOAD
// -------------------------------
loadNextCard();
</script>


</main>

{% endif %}
{% endblock %}
